/* AllAboutMe.Js @rev. 2683 @build 1.0.6 @UTC 2018-09-26 15:20 */
!function(){var e,t,n,r,o,a,l,u,c,d,f,p,h,g,v,m,y,b,x,w,C,S,E,L,I,k,T,M,A,D,H,z;!function(){function P(e,t,n){function r(e){return e.touches?e.touches.length:1}function i(e){if(e=e||window.event,j){for(var t,n=[],r=0,i=e.touches.length;r<i;r++)t=e.touches[r],n.push({x:t.pageX,y:t.pageY});return n}var o=document,a=o.body;return[{x:e.pageX||e.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&o.clientLeft||0),y:e.pageY||e.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&o.clientTop||0)}]}function o(e,t){return 180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI}function a(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}function s(e,t){if(2==e.length&&2==t.length){var n=a(e[0],e[1]);return a(t[0],t[1])/n}return 0}function l(e,t){if(2==e.length&&2==t.length){var n=o(e[1],e[0]);return o(t[1],t[0])-n}return 0}function u(e,t){t.touches=i(t.originalEvent),t.type=e,g(y["on"+e])&&y["on"+e].call(y,t)}function c(e){e=e||window.event,e.preventDefault?(e.preventDefault(),e.stopPropagation()):(e.returnValue=!1,e.cancelBubble=!0)}function d(){_={},k=!1,I=0,S=0,E=0,T=null}function f(n){switch(n.type){case"mousedown":case"touchstart":_.start=i(n),A=(new Date).getTime(),I=r(n),k=!0,x=n;var o=e.getBoundingClientRect(),a=e.clientTop||document.body.clientTop||0,f=e.clientLeft||document.body.clientLeft||0,p=window.pageYOffset||e.scrollTop||document.body.scrollTop,h=window.pageXOffset||e.scrollLeft||document.body.scrollLeft;P={top:o.top+p-a,left:o.left+h-f},R=!0,U.hold(n),t.prevent_default&&c(n);break;case"mousemove":case"touchmove":if(!R)return!1;w=n,_.move=i(n),U.transform(n)||U.drag(n);break;case"mouseup":case"mouseout":case"touchcancel":case"touchend":if(!R||"transform"!=T&&n.touches&&n.touches.length>0)return!1;R=!1,C=n,U.swipe(n),"drag"==T?u("dragend",{originalEvent:n,direction:L,distance:S,angle:E}):"transform"==T?u("transformend",{originalEvent:n,position:_.center,scale:s(_.start,_.move),rotation:l(_.start,_.move)}):U.tap(x),M=T,u("release",{originalEvent:n,gesture:T,position:_.move||_.start}),d()}}function p(t){h(e,t.relatedTarget)||f(t)}function h(e,t){if(!t&&window.event&&window.event.toElement&&(t=window.event.toElement),e===t)return!0;if(t)for(var n=t.parentNode;null!==n;){if(n===e)return!0;n=n.parentNode}return!1}function g(e){return"[object Function]"==Object.prototype.toString.call(e)}function v(e,t,n){t=t.split(" ");for(var r=0,i=t.length;r<i;r++)e.addEventListener?e.addEventListener(t[r],n,!1):document.attachEvent&&e.attachEvent("on"+t[r],n)}function m(e,t,n){t=t.split(" ");for(var r=0,i=t.length;r<i;r++)e.removeEventListener?e.removeEventListener(t[r],n,!1):document.detachEvent&&e.detachEvent("on"+t[r],n)}var y=this,b={prevent_default:!1,css_hacks:!0,swipe:!0,swipe_time:200,swipe_min_distance:20,drag:!0,drag_vertical:!0,drag_horizontal:!0,drag_min_distance:20,transform:!0,scale_treshold:.1,rotation_treshold:15,tap:!0,tap_double:!0,tap_max_interval:300,tap_max_distance:10,tap_double_distance:20,hold:!0,hold_timeout:500};t=function(e,t){var n={};if(!t)return e;for(var r in e)n[r]=r in t?t[r]:e[r];return n}(b,t),function(){if(!t.css_hacks)return!1;for(var n=["webkit","moz","ms","o",""],r={userSelect:"none",touchCallout:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"},i="",o=0;o<n.length;o++)for(var a in r)i=a,n[o]&&(i=n[o]+i.substring(0,1).toUpperCase()+i.substring(1)),e.style[i]=r[a]}();var x,w,C,S=0,E=0,L=0,_={},I=0,k=!1,T=null,M=null,A=null,D={x:0,y:0},H=null,z=null,P={},R=!1,j="ontouchstart"in window;this.option=function(e,r){return r!=n&&(t[e]=r),t[e]},this.getDirectionFromAngle=function(e){var t,n,r={down:e>=45&&e<135,left:e>=135||e<=-135,up:e<-45&&e>-135,right:e>=-45&&e<=45};for(n in r)if(r[n]){t=n;break}return t},this.destroy=function(){j?m(e,"touchstart touchmove touchend touchcancel",f):(m(e,"mouseup mousedown mousemove",f),m(e,"mouseout",p))};var U={hold:function(e){t.hold&&(T="hold",clearTimeout(z),z=setTimeout(function(){"hold"==T&&u("hold",{originalEvent:e,position:_.start})},t.hold_timeout))},swipe:function(e){if(_.move){var n=_.move[0].x-_.start[0].x,r=_.move[0].y-_.start[0].y;S=Math.sqrt(n*n+r*r);var i=(new Date).getTime(),a=i-A;if(t.swipe&&t.swipe_time>a&&S>t.swipe_min_distance){E=o(_.start[0],_.move[0]),L=y.getDirectionFromAngle(E),T="swipe";u("swipe",{originalEvent:e,position:{x:_.move[0].x-P.left,y:_.move[0].y-P.top},direction:L,distance:S,distanceX:n,distanceY:r,angle:E})}}},drag:function(e){var n=_.move[0].x-_.start[0].x,r=_.move[0].y-_.start[0].y;if(S=Math.sqrt(n*n+r*r),t.drag&&S>t.drag_min_distance||"drag"==T){E=o(_.start[0],_.move[0]),L=y.getDirectionFromAngle(E);var i="up"==L||"down"==L;if((i&&!t.drag_vertical||!i&&!t.drag_horizontal)&&S>t.drag_min_distance)return;T="drag";var a={x:_.move[0].x-P.left,y:_.move[0].y-P.top},s={originalEvent:e,position:a,direction:L,distance:S,distanceX:n,distanceY:r,angle:E};k&&(u("dragstart",s),k=!1),u("drag",s),c(e)}},transform:function(e){if(t.transform){if(2!=r(e))return!1;var n=l(_.start,_.move),i=s(_.start,_.move);if("drag"!=T&&("transform"==T||Math.abs(1-i)>t.scale_treshold||Math.abs(n)>t.rotation_treshold)){T="transform",_.center={x:(_.move[0].x+_.move[1].x)/2-P.left,y:(_.move[0].y+_.move[1].y)/2-P.top};var o={originalEvent:e,position:_.center,scale:i,rotation:n};return k&&(u("transformstart",o),k=!1),u("transform",o),c(e),!0}}return!1},tap:function(e){var n=(new Date).getTime(),r=n-A;if(!t.hold||t.hold&&t.hold_timeout>r){if(function(){if(D&&t.tap_double&&"tap"==M&&A-H<t.tap_max_interval){var e=Math.abs(D[0].x-_.start[0].x),n=Math.abs(D[0].y-_.start[0].y);return D&&_.start&&Math.max(e,n)<t.tap_double_distance}return!1}())T="double_tap",H=null,u("doubletap",{originalEvent:e,position:_.start}),c(e);else{var i=_.move?Math.abs(_.move[0].x-_.start[0].x):0,o=_.move?Math.abs(_.move[0].y-_.start[0].y):0;S=Math.max(i,o),S<t.tap_max_distance&&(T="tap",H=n,D=_.start,t.tap&&(u("tap",{originalEvent:e,position:_.start}),c(e)))}}}};j?v(e,"touchstart touchmove touchend touchcancel",f):(v(e,"mouseup mousedown mousemove",f),v(e,"mouseout",p))}e=void 0,function(){function e(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function t(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function n(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function r(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function i(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function o(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function a(e,t){return!(null==e||!e.length)&&-1<g(e,t,0)}function s(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function l(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function u(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function c(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function d(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function f(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function p(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function h(e,t,n,r){var i=e.length;for(n+=r?1:-1;r?n--:++n<i;)if(t(e[n],n,e))return n;return-1}function g(e,t,n){if(t===t)e:{--n;for(var r=e.length;++n<r;)if(e[n]===t){e=n;break e}e=-1}else e=h(e,m,n);return e}function v(e,t,n,r){--n;for(var i=e.length;++n<i;)if(r(e[n],t))return n;return-1}function m(e){return e!==e}function y(e,t){var n=null==e?0:e.length;return n?S(e,t)/n:O}function b(e){return function(t){return null==t?B:t[e]}}function x(e){return function(t){return null==e?B:e[t]}}function w(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function C(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].c;return e}function S(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);o!==B&&(n=n===B?o:n+o)}return n}function E(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function L(e,t){return l(t,function(t){return[t,e[t]]})}function _(e){return function(t){return e(t)}}function I(e,t){return l(t,function(t){return e[t]})}function k(e,t){return e.has(t)}function T(e,t){for(var n=-1,r=e.length;++n<r&&-1<g(t,e[n],0););return n}function M(e,t){for(var n=e.length;n--&&-1<g(t,e[n],0););return n}function A(e){return"\\"+De[e]}function D(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function H(e,t){return function(n){return e(t(n))}}function z(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&"__lodash_placeholder__"!==a||(e[n]="__lodash_placeholder__",o[i++]=n)}return o}function P(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function R(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function j(e){if(Ie.test(e)){for(var t=Le.lastIndex=0;Le.test(e);)++t;e=t}else e=Xe(e);return e}function U(e){return Ie.test(e)?e.match(Le)||[]:e.split("")}var B,N=1/0,O=NaN,G=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],F=/\b__p\+='';/g,$=/\b(__p\+=)''\+/g,V=/(__e\(.*?\)|\b__t\))\+'';/g,q=/&(?:amp|lt|gt|quot|#39);/g,W=/[&<>"']/g,K=RegExp(q.source),X=RegExp(W.source),Y=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,Z=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ee=/^\w*$/,te=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ne=/[\\^$.*+?()[\]{}|]/g,re=RegExp(ne.source),ie=/^\s+|\s+$/g,oe=/^\s+/,ae=/\s+$/,se=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,le=/\{\n\/\* \[wrapped with (.+)\] \*/,ue=/,? & /,ce=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,de=/\\(\\)?/g,fe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pe=/\w*$/,he=/^[-+]0x[0-9a-f]+$/i,ge=/^0b[01]+$/i,ve=/^\[object .+?Constructor\]$/,me=/^0o[0-7]+$/i,ye=/^(?:0|[1-9]\d*)$/,be=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xe=/($^)/,we=/['\n\r\u2028\u2029\\]/g,Ce="[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?)*",Se=RegExp("['’]","g"),Ee=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),Le=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]?|[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])"+Ce,"g"),_e=RegExp(["[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])|\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])|\\d+","(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?)*"].join("|"),"g"),Ie=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),ke=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Te="Array Buffer DataView Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Promise RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ clearTimeout isFinite parseInt setTimeout".split(" "),Me={};Me["[object Float32Array]"]=Me["[object Float64Array]"]=Me["[object Int8Array]"]=Me["[object Int16Array]"]=Me["[object Int32Array]"]=Me["[object Uint8Array]"]=Me["[object Uint8ClampedArray]"]=Me["[object Uint16Array]"]=Me["[object Uint32Array]"]=!0,Me["[object Arguments]"]=Me["[object Array]"]=Me["[object ArrayBuffer]"]=Me["[object Boolean]"]=Me["[object DataView]"]=Me["[object Date]"]=Me["[object Error]"]=Me["[object Function]"]=Me["[object Map]"]=Me["[object Number]"]=Me["[object Object]"]=Me["[object RegExp]"]=Me["[object Set]"]=Me["[object String]"]=Me["[object WeakMap]"]=!1;var Ae={};Ae["[object Arguments]"]=Ae["[object Array]"]=Ae["[object ArrayBuffer]"]=Ae["[object DataView]"]=Ae["[object Boolean]"]=Ae["[object Date]"]=Ae["[object Float32Array]"]=Ae["[object Float64Array]"]=Ae["[object Int8Array]"]=Ae["[object Int16Array]"]=Ae["[object Int32Array]"]=Ae["[object Map]"]=Ae["[object Number]"]=Ae["[object Object]"]=Ae["[object RegExp]"]=Ae["[object Set]"]=Ae["[object String]"]=Ae["[object Symbol]"]=Ae["[object Uint8Array]"]=Ae["[object Uint8ClampedArray]"]=Ae["[object Uint16Array]"]=Ae["[object Uint32Array]"]=!0,Ae["[object Error]"]=Ae["[object Function]"]=Ae["[object WeakMap]"]=!1;var De={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},He=parseFloat,ze=parseInt,Pe="object"==typeof global&&global&&global.Object===Object&&global,Re="object"==typeof self&&self&&self.Object===Object&&self,je=Pe||Re||Function("return this")(),Ue="object"==typeof exports&&exports&&!exports.nodeType&&exports,Be=Ue&&"object"==typeof module&&module&&!module.nodeType&&module,Ne=Be&&Be.exports===Ue,Oe=Ne&&Pe.process,Ge=function(){try{var e=Be&&Be.f&&Be.f("util").types;return e||Oe&&Oe.binding&&Oe.binding("util")}catch(e){}}(),Fe=Ge&&Ge.isArrayBuffer,$e=Ge&&Ge.isDate,Ve=Ge&&Ge.isMap,qe=Ge&&Ge.isRegExp,We=Ge&&Ge.isSet,Ke=Ge&&Ge.isTypedArray,Xe=b("length"),Ye=x({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Qe=x({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),Ze=x({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Je=function x(Ce){function Le(e){if(mi(e)&&!os(e)&&!(e instanceof Re)){if(e instanceof Pe)return e;if(oo.call(e,"__wrapped__"))return Nr(e)}return new Pe(e)}function De(){}function Pe(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=B}function Re(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Ue(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Be(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Oe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ge(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Oe;++t<n;)this.add(e[t])}function Xe(e){this.size=(this.__data__=new Be(e)).size}function et(e,t){var n,r=os(e),i=!r&&is(e),o=!r&&!i&&ss(e),a=!r&&!i&&!o&&fs(e),i=(r=r||i||o||a)?E(e.length,Ji):[],s=i.length;for(n in e)!t&&!oo.call(e,n)||r&&("length"==n||o&&("offset"==n||"parent"==n)||a&&("buffer"==n||"byteLength"==n||"byteOffset"==n)||Ir(n,s))||i.push(n);return i}function tt(e){var t=e.length;return t?e[on(0,t-1)]:B}function nt(e,t){return Rr(Pn(e),ft(t,0,e.length))}function rt(e){return Rr(Pn(e))}function it(e,t,n){(n===B||ui(e[t],n))&&(n!==B||t in e)||ct(e,t,n)}function ot(e,t,n){var r=e[t];oo.call(e,t)&&ui(r,n)&&(n!==B||t in e)||ct(e,t,n)}function at(e,t){for(var n=e.length;n--;)if(ui(e[n][0],t))return n;return-1}function st(e,t,n,r){return ia(e,function(e,i,o){t(r,e,n(e),o)}),r}function lt(e,t){return e&&Rn(t,Ai(t),e)}function ut(e,t){return e&&Rn(t,Di(t),e)}function ct(e,t,n){"__proto__"==t&&Eo?Eo(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function dt(e,t){for(var n=-1,r=t.length,i=qi(r),o=null==e;++n<r;)i[n]=o?B:Ti(e,t[n]);return i}function ft(e,t,n){return e===e&&(n!==B&&(e=e<=n?e:n),t!==B&&(e=e>=t?e:t)),e}function pt(e,t,r,i,o,a){var s,l=1&t,u=2&t,c=4&t;if(r&&(s=o?r(e,i,o,a):r(e)),s!==B)return s;if(!vi(e))return e;if(i=os(e)){if(s=Sr(e),!l)return Pn(e,s)}else{var d=ga(e),f="[object Function]"==d||"[object GeneratorFunction]"==d;if(ss(e))return Tn(e,l);if("[object Object]"==d||"[object Arguments]"==d||f&&!o){if(s=u||f?{}:Er(e),!l)return u?Un(e,ut(s,e)):jn(e,lt(s,e))}else{if(!Ae[d])return o?e:{};s=Lr(e,d,l)}}if(a||(a=new Xe),o=a.get(e))return o;if(a.set(e,s),ds(e))return e.forEach(function(n){s.add(pt(n,t,r,n,e,a))}),s;if(us(e))return e.forEach(function(n,i){s.set(i,pt(n,t,r,i,e,a))}),s;var u=c?u?gr:hr:u?Di:Ai,p=i?B:u(e);return n(p||e,function(n,i){p&&(i=n,n=e[i]),ot(s,i,pt(n,t,r,i,e,a))}),s}function ht(e){var t=Ai(e);return function(n){return gt(n,e,t)}}function gt(e,t,n){var r=n.length;if(null==e)return!r;for(e=Qi(e);r--;){var i=n[r],o=t[i],a=e[i];if(a===B&&!(i in e)||!o(a))return!1}return!0}function vt(e,t,n){if("function"!=typeof e)throw new eo("Expected a function");return ya(function(){e.apply(B,n)},t)}function mt(e,t,n,r){var i=-1,o=a,u=!0,c=e.length,d=[],f=t.length;if(!c)return d;n&&(t=l(t,_(n))),r?(o=s,u=!1):200<=t.length&&(o=k,u=!1,t=new Ge(t));e:for(;++i<c;){var p=e[i],h=null==n?p:n(p),p=r||0!==p?p:0;if(u&&h===h){for(var g=f;g--;)if(t[g]===h)continue e;d.push(p)}else o(t,h,r)||d.push(p)}return d}function yt(e,t){var n=!0;return ia(e,function(e,r,i){return n=!!t(e,r,i)}),n}function bt(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],a=t(o);if(null!=a&&(s===B?a===a&&!wi(a):n(a,s)))var s=a,l=o}return l}function xt(e,t){var n=[];return ia(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function wt(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=_r),i||(i=[]);++o<a;){var s=e[o];0<t&&n(s)?1<t?wt(s,t-1,n,r,i):u(i,s):r||(i[i.length]=s)}return i}function Ct(e,t){return e&&aa(e,t,Ai)}function St(e,t){return e&&sa(e,t,Ai)}function Et(e,t){return o(t,function(t){return pi(e[t])})}function Lt(e,t){t=In(t,e);for(var n=0,r=t.length;null!=e&&n<r;)e=e[jr(t[n++])];return n&&n==r?e:B}function _t(e,t,n){return t=t(e),os(e)?t:u(t,n(e))}function It(e){if(null==e)e=e===B?"[object Undefined]":"[object Null]";else if(So&&So in Qi(e)){var t=oo.call(e,So),n=e[So];try{e[So]=B;var r=!0}catch(e){}var i=lo.call(e);r&&(t?e[So]=n:delete e[So]),e=i}else e=lo.call(e);return e}function kt(e,t){return e>t}function Tt(e,t){return null!=e&&oo.call(e,t)}function Mt(e,t){return null!=e&&t in Qi(e)}function At(e,t,n){for(var r=n?s:a,i=e[0].length,o=e.length,u=o,c=qi(o),d=1/0,f=[];u--;){var p=e[u];u&&t&&(p=l(p,_(t))),d=Ro(p.length,d),c[u]=!n&&(t||120<=i&&120<=p.length)?new Ge(u&&p):B}var p=e[0],h=-1,g=c[0];e:for(;++h<i&&f.length<d;){var v=p[h],m=t?t(v):v,v=n||0!==v?v:0;if(g?!k(g,m):!r(f,m,n)){for(u=o;--u;){var y=c[u];if(y?!k(y,m):!r(e[u],m,n))continue e}g&&g.push(m),f.push(v)}}return f}function Dt(e,t,n){var r={};return Ct(e,function(e,i,o){t(r,n(e),i,o)}),r}function Ht(t,n,r){return n=In(n,t),t=2>n.length?t:Lt(t,fn(n,0,-1)),n=null==t?t:t[jr(Vr(n))],null==n?B:e(n,t,r)}function zt(e){return mi(e)&&"[object Arguments]"==It(e)}function Pt(e){return mi(e)&&"[object ArrayBuffer]"==It(e)}function Rt(e){return mi(e)&&"[object Date]"==It(e)}function jt(e,t,n,r,i){if(e===t)t=!0;else if(null==e||null==t||!mi(e)&&!mi(t))t=e!==e&&t!==t;else e:{var o=os(e),a=os(t),s=o?"[object Array]":ga(e),l=a?"[object Array]":ga(t),s="[object Arguments]"==s?"[object Object]":s,l="[object Arguments]"==l?"[object Object]":l,u="[object Object]"==s,a="[object Object]"==l;if((l=s==l)&&ss(e)){if(!ss(t)){t=!1;break e}o=!0,u=!1}if(l&&!u)i||(i=new Xe),t=o||fs(e)?dr(e,t,n,r,jt,i):fr(e,t,s,n,r,jt,i);else{if(!(1&n)&&(o=u&&oo.call(e,"__wrapped__"),s=a&&oo.call(t,"__wrapped__"),o||s)){e=o?e.value():e,t=s?t.value():t,i||(i=new Xe),t=jt(e,t,n,r,i);break e}if(l)t:if(i||(i=new Xe),o=1&n,s=hr(e),a=s.length,l=hr(t).length,a==l||o){for(u=a;u--;){var c=s[u];if(!(o?c in t:oo.call(t,c))){t=!1;break t}}if((l=i.get(e))&&i.get(t))t=l==t;else{l=!0,i.set(e,t),i.set(t,e);for(var d=o;++u<a;){var c=s[u],f=e[c],p=t[c];if(r)var h=o?r(p,f,c,t,e,i):r(f,p,c,e,t,i);if(h===B?f!==p&&!jt(f,p,n,r,i):!h){l=!1;break}d||(d="constructor"==c)}l&&!d&&(n=e.constructor,r=t.constructor,n!=r&&"constructor"in e&&"constructor"in t&&!("function"==typeof n&&n instanceof n&&"function"==typeof r&&r instanceof r)&&(l=!1)),i.delete(e),i.delete(t),t=l}}else t=!1;else t=!1}}return t}function Ut(e){return mi(e)&&"[object Map]"==ga(e)}function Bt(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Qi(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var s=n[i],l=s[0],u=e[l],c=s[1];if(a&&s[2]){if(u===B&&!(l in e))return!1}else{if(s=new Xe,r)var d=r(u,c,l,e,t,s);if(d===B?!jt(c,u,3,r,s):!d)return!1}}return!0}function Nt(e){return!(!vi(e)||so&&so in e)&&(pi(e)?fo:ve).test(Ur(e))}function Ot(e){return mi(e)&&"[object RegExp]"==It(e)}function Gt(e){return mi(e)&&"[object Set]"==ga(e)}function Ft(e){return mi(e)&&gi(e.length)&&!!Me[It(e)]}function $t(e){return"function"==typeof e?e:null==e?Bi:"object"==typeof e?os(e)?Xt(e[0],e[1]):Kt(e):Fi(e)}function Vt(e){if(!Ar(e))return zo(e);var t,n=[];for(t in Qi(e))oo.call(e,t)&&"constructor"!=t&&n.push(t);return n}function qt(e,t){return e<t}function Wt(e,t){var n=-1,r=ci(e)?qi(e.length):[];return ia(e,function(e,i,o){r[++n]=t(e,i,o)}),r}function Kt(e){var t=xr(e);return 1==t.length&&t[0][2]?Dr(t[0][0],t[0][1]):function(n){return n===e||Bt(n,e,t)}}function Xt(e,t){return Tr(e)&&t===t&&!vi(t)?Dr(jr(e),t):function(n){var r=Ti(n,e);return r===B&&r===t?Mi(n,e):jt(t,r,3)}}function Yt(e,t,n,r,i){e!==t&&aa(t,function(o,a){if(vi(o)){i||(i=new Xe);var s=i,l="__proto__"==a?B:e[a],u="__proto__"==a?B:t[a],c=s.get(u);if(c)it(e,a,c);else{var c=r?r(l,u,a+"",e,t,s):B,d=c===B;if(d){var f=os(u),p=!f&&ss(u),h=!f&&!p&&fs(u),c=u;f||p||h?os(l)?c=l:di(l)?c=Pn(l):p?(d=!1,c=Tn(u,!0)):h?(d=!1,c=An(u,!0)):c=[]:bi(u)||is(u)?(c=l,is(l)?c=Ii(l):(!vi(l)||n&&pi(l))&&(c=Er(u))):d=!1}d&&(s.set(u,c),Yt(c,u,n,r,s),s.delete(u)),it(e,a,c)}}else s=r?r("__proto__"==a?B:e[a],o,a+"",e,t,i):B,s===B&&(s=o),it(e,a,s)},Di)}function Qt(e,t){var n=e.length;if(n)return t+=0>t?n:0,Ir(t,n)?e[t]:B}function Zt(e,t,n){var r=-1;return t=l(t.length?t:[Bi],_(yr())),e=Wt(e,function(e){return{a:l(t,function(t){return t(e)}),b:++r,c:e}}),C(e,function(e,t){var r;e:{r=-1;for(var i=e.a,o=t.a,a=i.length,s=n.length;++r<a;){var l=Dn(i[r],o[r]);if(l){r=r>=s?l:l*("desc"==n[r]?-1:1);break e}}r=e.b-t.b}return r})}function Jt(e,t){return en(e,t,function(t,n){return Mi(e,n)})}function en(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=Lt(e,a);n(s,a)&&cn(o,In(a,e),s)}return o}function tn(e){return function(t){return Lt(t,e)}}function nn(e,t,n,r){var i=r?v:g,o=-1,a=t.length,s=e;for(e===t&&(t=Pn(t)),n&&(s=l(e,_(n)));++o<a;)for(var u=0,c=t[o],c=n?n(c):c;-1<(u=i(s,c,u,r));)s!==e&&xo.call(s,u,1),xo.call(e,u,1);return e}function rn(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;Ir(i)?xo.call(e,i,1):xn(e,i)}}}function on(e,t){return e+To(Bo()*(t-e+1))}function an(e,t){var n="";if(!e||1>t||9007199254740991<t)return n;do{t%2&&(n+=e),(t=To(t/2))&&(e+=e)}while(t);return n}function sn(e,t){return ba(Hr(e,t,Bi),e+"")}function ln(e){return tt(zi(e))}function un(e,t){var n=zi(e);return Rr(n,ft(t,0,n.length))}function cn(e,t,n,r){if(!vi(e))return e;t=In(t,e);for(var i=-1,o=t.length,a=o-1,s=e;null!=s&&++i<o;){var l=jr(t[i]),u=n;if(i!=a){var c=s[l],u=r?r(c,l,s):B;u===B&&(u=vi(c)?c:Ir(t[i+1])?[]:{})}ot(s,l,u),s=s[l]}return e}function dn(e){return Rr(zi(e))}function fn(e,t,n){var r=-1,i=e.length;for(0>t&&(t=-t>i?0:i+t),n=n>i?i:n,0>n&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0,n=qi(i);++r<i;)n[r]=e[r+t];return n}function pn(e,t){var n;return ia(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function hn(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&2147483647>=i){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!wi(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return gn(e,t,Bi,n)}function gn(e,t,n,r){t=n(t);for(var i=0,o=null==e?0:e.length,a=t!==t,s=null===t,l=wi(t),u=t===B;i<o;){var c=To((i+o)/2),d=n(e[c]),f=d!==B,p=null===d,h=d===d,g=wi(d);(a?r||h:u?h&&(r||f):s?h&&f&&(r||!p):l?h&&f&&!p&&(r||!g):p||g?0:r?d<=t:d<t)?i=c+1:o=c}return Ro(o,4294967294)}function vn(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!ui(s,l)){var l=s;o[i++]=0===a?0:a}}return o}function mn(e){return"number"==typeof e?e:wi(e)?O:+e}function yn(e){if("string"==typeof e)return e;if(os(e))return l(e,yn)+"";if(wi(e))return na?na.call(e):"";var t=e+"";return"0"==t&&1/e==-N?"-0":t}function bn(e,t,n){var r=-1,i=a,o=e.length,l=!0,u=[],c=u;if(n)l=!1,i=s;else if(200<=o){if(i=t?null:da(e))return P(i);l=!1,i=k,c=new Ge}else c=t?[]:u;e:for(;++r<o;){var d=e[r],f=t?t(d):d,d=n||0!==d?d:0;if(l&&f===f){for(var p=c.length;p--;)if(c[p]===f)continue e;t&&c.push(f),u.push(d)}else i(c,f,n)||(c!==u&&c.push(f),u.push(d))}return u}function xn(e,t){return t=In(t,e),null==(e=2>t.length?e:Lt(e,fn(t,0,-1)))||delete e[jr(Vr(t))]}function wn(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?fn(e,r?0:o,r?o+1:i):fn(e,r?o+1:0,r?i:o)}function Cn(e,t){var n=e;return n instanceof Re&&(n=n.value()),c(t,function(e,t){return t.func.apply(t.thisArg,u([e],t.args))},n)}function Sn(e,t,n){var r=e.length;if(2>r)return r?bn(e[0]):[];for(var i=-1,o=qi(r);++i<r;)for(var a=e[i],s=-1;++s<r;)s!=i&&(o[i]=mt(o[i]||a,e[s],t,n));return bn(wt(o,1),t,n)}function En(e,t,n){for(var r=-1,i=e.length,o=t.length,a={};++r<i;)n(a,e[r],r<o?t[r]:B);return a}function Ln(e){return di(e)?e:[]}function _n(e){return"function"==typeof e?e:Bi}function In(e,t){return os(e)?e:Tr(e,t)?[e]:xa(ki(e))}function kn(e,t,n){var r=e.length;return n=n===B?r:n,!t&&n>=r?e:fn(e,t,n)}function Tn(e,t){if(t)return e.slice();var n=e.length,n=vo?vo(n):new e.constructor(n);return e.copy(n),n}function Mn(e){var t=new e.constructor(e.byteLength);return new go(t).set(new go(e)),t}function An(e,t){return new e.constructor(t?Mn(e.buffer):e.buffer,e.byteOffset,e.length)}function Dn(e,t){if(e!==t){var n=e!==B,r=null===e,i=e===e,o=wi(e),a=t!==B,s=null===t,l=t===t,u=wi(t);if(!s&&!u&&!o&&e>t||o&&a&&l&&!s&&!u||r&&a&&l||!n&&l||!i)return 1;if(!r&&!o&&!u&&e<t||u&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!l)return-1}return 0}function Hn(e,t,n,r){var i=-1,o=e.length,a=n.length,s=-1,l=t.length,u=Po(o-a,0),c=qi(l+u);for(r=!r;++s<l;)c[s]=t[s];for(;++i<a;)(r||i<o)&&(c[n[i]]=e[i]);for(;u--;)c[s++]=e[i++];return c}function zn(e,t,n,r){var i=-1,o=e.length,a=-1,s=n.length,l=-1,u=t.length,c=Po(o-s,0),d=qi(c+u);for(r=!r;++i<c;)d[i]=e[i];for(c=i;++l<u;)d[c+l]=t[l];for(;++a<s;)(r||i<o)&&(d[c+n[a]]=e[i++]);return d}function Pn(e,t){var n=-1,r=e.length;for(t||(t=qi(r));++n<r;)t[n]=e[n];return t}function Rn(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=r?r(n[s],e[s],s,n,e):B;l===B&&(l=e[s]),i?ct(n,s,l):ot(n,s,l)}return n}function jn(e,t){return Rn(e,pa(e),t)}function Un(e,t){return Rn(e,ha(e),t)}function Bn(e,n){return function(r,i){var o=os(r)?t:st,a=n?n():{};return o(r,e,yr(i,2),a)}}function Nn(e){return sn(function(t,n){var r=-1,i=n.length,o=1<i?n[i-1]:B,a=2<i?n[2]:B,o=3<e.length&&"function"==typeof o?(i--,o):B;for(a&&kr(n[0],n[1],a)&&(o=3>i?B:o,i=1),t=Qi(t);++r<i;)(a=n[r])&&e(t,a,r,o);return t})}function On(e,t){return function(n,r){if(null==n)return n;if(!ci(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Qi(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Gn(e){return function(t,n,r){var i=-1,o=Qi(t);r=r(t);for(var a=r.length;a--;){var s=r[e?a:++i];if(!1===n(o[s],s,o))break}return t}}function Fn(e,t,n){function r(){return(this&&this!==je&&this instanceof r?o:e).apply(i?n:this,arguments)}var i=1&t,o=qn(e);return r}function $n(e){return function(t){t=ki(t);var n=Ie.test(t)?U(t):B,r=n?n[0]:t.charAt(0);return t=n?kn(n,1).join(""):t.slice(1),r[e]()+t}}function Vn(e){return function(t){return c(ji(Ri(t).replace(Se,"")),e,"")}}function qn(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=ra(e.prototype),t=e.apply(n,t);return vi(t)?t:n}}function Wn(t,n,r){function i(){for(var a=arguments.length,s=qi(a),l=a,u=mr(i);l--;)s[l]=arguments[l];return l=3>a&&s[0]!==u&&s[a-1]!==u?[]:z(s,u),a-=l.length,a<r?ir(t,n,Yn,i.placeholder,B,s,l,B,B,r-a):e(this&&this!==je&&this instanceof i?o:t,this,s)}var o=qn(t);return i}function Kn(e){return function(t,n,r){var i=Qi(t);if(!ci(t)){var o=yr(n,3);t=Ai(t),n=function(e){return o(i[e],e,i)}}return n=e(t,n,r),-1<n?i[o?t[n]:n]:B}}function Xn(e){return pr(function(t){var n=t.length,r=n,i=Pe.prototype.thru;for(e&&t.reverse();r--;){var o=t[r]
;if("function"!=typeof o)throw new eo("Expected a function");if(i&&!a&&"wrapper"==vr(o))var a=new Pe([],!0)}for(r=a?r:n;++r<n;)var o=t[r],i=vr(o),s="wrapper"==i?fa(o):B,a=s&&Mr(s[0])&&424==s[1]&&!s[4].length&&1==s[9]?a[vr(s[0])].apply(a,s[3]):1==o.length&&Mr(o)?a[i]():a.thru(o);return function(){var e=arguments,r=e[0];if(a&&1==e.length&&os(r))return a.plant(r).value();for(var i=0,e=n?t[i].apply(this,e):r;++i<n;)e=t[i].call(this,e);return e}})}function Yn(e,t,n,r,i,o,a,s,l,u){function c(){for(var m=arguments.length,y=qi(m),b=m;b--;)y[b]=arguments[b];if(h){var x,w=mr(c),b=y.length;for(x=0;b--;)y[b]===w&&++x}if(r&&(y=Hn(y,r,i,h)),o&&(y=zn(y,o,a,h)),m-=x,h&&m<u)return w=z(y,w),ir(e,t,Yn,c.placeholder,n,y,w,s,l,u-m);if(w=f?n:this,b=p?w[e]:e,m=y.length,s){x=y.length;for(var C=Ro(s.length,x),S=Pn(y);C--;){var E=s[C];y[C]=Ir(E,x)?S[E]:B}}else g&&1<m&&y.reverse();return d&&l<m&&(y.length=l),this&&this!==je&&this instanceof c&&(b=v||qn(b)),b.apply(w,y)}var d=128&t,f=1&t,p=2&t,h=24&t,g=512&t,v=p?B:qn(e);return c}function Qn(e,t){return function(n,r){return Dt(n,e,t(r))}}function Zn(e,t){return function(n,r){var i;if(n===B&&r===B)return t;if(n!==B&&(i=n),r!==B){if(i===B)return r;"string"==typeof n||"string"==typeof r?(n=yn(n),r=yn(r)):(n=mn(n),r=mn(r)),i=e(n,r)}return i}}function Jn(t){return pr(function(n){return n=l(n,_(yr())),sn(function(r){var i=this;return t(n,function(t){return e(t,i,r)})})})}function er(e,t){t=t===B?" ":yn(t);var n=t.length;return 2>n?n?an(t,e):t:(n=an(t,ko(e/j(t))),Ie.test(t)?kn(U(n),0,e).join(""):n.slice(0,e))}function tr(t,n,r,i){function o(){for(var n=-1,l=arguments.length,u=-1,c=i.length,d=qi(c+l),f=this&&this!==je&&this instanceof o?s:t;++u<c;)d[u]=i[u];for(;l--;)d[u++]=arguments[++n];return e(f,a?r:this,d)}var a=1&n,s=qn(t);return o}function nr(e){return function(t,n,r){r&&"number"!=typeof r&&kr(t,n,r)&&(n=r=B),t=Si(t),n===B?(n=t,t=0):n=Si(n),r=r===B?t<n?1:-1:Si(r);var i=-1;n=Po(ko((n-t)/(r||1)),0);for(var o=qi(n);n--;)o[e?n:++i]=t,t+=r;return o}}function rr(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=_i(t),n=_i(n)),e(t,n)}}function ir(e,t,n,r,i,o,a,s,l,u){var c=8&t,d=c?a:B;a=c?B:a;var f=c?o:B;return o=c?B:o,t=(t|(c?32:64))&~(c?64:32),4&t||(t&=-4),i=[e,t,i,f,d,o,a,s,l,u],n=n.apply(B,i),Mr(e)&&ma(n,i),n.placeholder=r,zr(n,e,t)}function or(e){var t=Yi[e];return function(e,n){if(e=_i(e),n=null==n?0:Ro(Ei(n),292)){var r=(ki(e)+"e").split("e"),r=t(r[0]+"e"+(+r[1]+n)),r=(ki(r)+"e").split("e");return+(r[0]+"e"+(+r[1]-n))}return t(e)}}function ar(e){return function(t){var n=ga(t);return"[object Map]"==n?D(t):"[object Set]"==n?R(t):L(t,e(t))}}function sr(e,t,n,r,i,o,a,s){var l=2&t;if(!l&&"function"!=typeof e)throw new eo("Expected a function");var u=r?r.length:0;if(u||(t&=-97,r=i=B),a=a===B?a:Po(Ei(a),0),s=s===B?s:Ei(s),u-=i?i.length:0,64&t){var c=r,d=i;r=i=B}var f=l?B:fa(e);return o=[e,t,n,r,i,c,d,o,a,s],f&&(n=o[1],e=f[1],t=n|e,r=128==e&&8==n||128==e&&256==n&&o[7].length<=f[8]||384==e&&f[7].length<=f[8]&&8==n,131>t||r)&&(1&e&&(o[2]=f[2],t|=1&n?0:4),(n=f[3])&&(r=o[3],o[3]=r?Hn(r,n,f[4]):n,o[4]=r?z(o[3],"__lodash_placeholder__"):f[4]),(n=f[5])&&(r=o[5],o[5]=r?zn(r,n,f[6]):n,o[6]=r?z(o[5],"__lodash_placeholder__"):f[6]),(n=f[7])&&(o[7]=n),128&e&&(o[8]=null==o[8]?f[8]:Ro(o[8],f[8])),null==o[9]&&(o[9]=f[9]),o[0]=f[0],o[1]=t),e=o[0],t=o[1],n=o[2],r=o[3],i=o[4],s=o[9]=o[9]===B?l?0:e.length:Po(o[9]-u,0),!s&&24&t&&(t&=-25),zr((f?la:ma)(t&&1!=t?8==t||16==t?Wn(e,t,s):32!=t&&33!=t||i.length?Yn.apply(B,o):tr(e,t,n,r):Fn(e,t,n),o),e,t)}function lr(e,t,n,r){return e===B||ui(e,no[n])&&!oo.call(r,n)?t:e}function ur(e,t,n,r,i,o){return vi(e)&&vi(t)&&(o.set(t,e),Yt(e,t,B,ur,o),o.delete(t)),e}function cr(e){return bi(e)?B:e}function dr(e,t,n,r,i,o){var a=1&n,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;if((l=o.get(e))&&o.get(t))return l==t;var l=-1,u=!0,c=2&n?new Ge:B;for(o.set(e,t),o.set(t,e);++l<s;){var d=e[l],p=t[l];if(r)var h=a?r(p,d,l,t,e,o):r(d,p,l,e,t,o);if(h!==B){if(h)continue;u=!1;break}if(c){if(!f(t,function(e,t){if(!k(c,t)&&(d===e||i(d,e,n,r,o)))return c.push(t)})){u=!1;break}}else if(d!==p&&!i(d,p,n,r,o)){u=!1;break}}return o.delete(e),o.delete(t),u}function fr(e,t,n,r,i,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!o(new go(e),new go(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return ui(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=D;case"[object Set]":if(s||(s=P),e.size!=t.size&&!(1&r))break;return(n=a.get(e))?n==t:(r|=2,a.set(e,t),t=dr(s(e),s(t),r,i,o,a),a.delete(e),t);case"[object Symbol]":if(ta)return ta.call(e)==ta.call(t)}return!1}function pr(e){return ba(Hr(e,B,Fr),e+"")}function hr(e){return _t(e,Ai,pa)}function gr(e){return _t(e,Di,ha)}function vr(e){for(var t=e.name+"",n=Ko[t],r=oo.call(Ko,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function mr(e){return(oo.call(Le,"placeholder")?Le:e).placeholder}function yr(){var e=Le.iteratee||Ni,e=e===Ni?$t:e;return arguments.length?e(arguments[0],arguments[1]):e}function br(e,t){var n=e.__data__,r=typeof t;return("string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?n["string"==typeof t?"string":"hash"]:n.map}function xr(e){for(var t=Ai(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,i===i&&!vi(i)]}return t}function wr(e,t){var n=null==e?B:e[t];return Nt(n)?n:B}function Cr(e,t,n){t=In(t,e);for(var r=-1,i=t.length,o=!1;++r<i;){var a=jr(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&gi(i)&&Ir(a,i)&&(os(e)||is(e))}function Sr(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&oo.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Er(e){return"function"!=typeof e.constructor||Ar(e)?{}:ra(mo(e))}function Lr(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return Mn(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return t=n?Mn(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return An(e,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return t=new e.constructor(e.source,pe.exec(e)),t.lastIndex=e.lastIndex,t;case"[object Set]":return new r;case"[object Symbol]":return ta?Qi(ta.call(e)):{}}}function _r(e){return os(e)||is(e)||!!(wo&&e&&e[wo])}function Ir(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&ye.test(e))&&-1<e&&0==e%1&&e<t}function kr(e,t,n){if(!vi(n))return!1;var r=typeof t;return!!("number"==r?ci(n)&&Ir(t,n.length):"string"==r&&t in n)&&ui(n[t],e)}function Tr(e,t){if(os(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!wi(e))||ee.test(e)||!J.test(e)||null!=t&&e in Qi(t)}function Mr(e){var t=vr(e),n=Le[t];return"function"==typeof n&&t in Re.prototype&&(e===n||!!(t=fa(n))&&e===t[0])}function Ar(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||no)}function Dr(e,t){return function(n){return null!=n&&n[e]===t&&(t!==B||e in Qi(n))}}function Hr(t,n,r){return n=Po(n===B?t.length-1:n,0),function(){for(var i=arguments,o=-1,a=Po(i.length-n,0),s=qi(a);++o<a;)s[o]=i[n+o];for(o=-1,a=qi(n+1);++o<n;)a[o]=i[o];return a[n]=r(s),e(t,this,a)}}function zr(e,t,n){var r=t+"";t=ba;var i,o=Br;return i=(i=r.match(le))?i[1].split(ue):[],n=o(i,n),(o=n.length)&&(i=o-1,n[i]=(1<o?"& ":"")+n[i],n=n.join(2<o?", ":" "),r=r.replace(se,"{\n/* [wrapped with "+n+"] */\n")),t(e,r)}function Pr(e){var t=0,n=0;return function(){var r=jo(),i=16-(r-n);if(n=r,0<i){if(800<=++t)return arguments[0]}else t=0;return e.apply(B,arguments)}}function Rr(e,t){var n=-1,r=e.length,i=r-1;for(t=t===B?r:t;++n<t;){var r=on(n,i),o=e[r];e[r]=e[n],e[n]=o}return e.length=t,e}function jr(e){if("string"==typeof e||wi(e))return e;var t=e+"";return"0"==t&&1/e==-N?"-0":t}function Ur(e){if(null!=e){try{return io.call(e)}catch(e){}return e+""}return""}function Br(e,t){return n(G,function(n){var r="_."+n[0];t&n[1]&&!a(e,r)&&e.push(r)}),e.sort()}function Nr(e){if(e instanceof Re)return e.clone();var t=new Pe(e.__wrapped__,e.__chain__);return t.__actions__=Pn(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Or(e,t,n){var r=null==e?0:e.length;return r?(n=null==n?0:Ei(n),0>n&&(n=Po(r+n,0)),h(e,yr(t,3),n)):-1}function Gr(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==B&&(i=Ei(n),i=0>n?Po(r+i,0):Ro(i,r-1)),h(e,yr(t,3),i,!0)}function Fr(e){return(null==e?0:e.length)?wt(e,1):[]}function $r(e){return e&&e.length?e[0]:B}function Vr(e){var t=null==e?0:e.length;return t?e[t-1]:B}function qr(e,t){return e&&e.length&&t&&t.length?nn(e,t):e}function Wr(e){return null==e?e:No.call(e)}function Kr(e){if(!e||!e.length)return[];var t=0;return e=o(e,function(e){if(di(e))return t=Po(e.length,t),!0}),E(t,function(t){return l(e,b(t))})}function Xr(t,n){if(!t||!t.length)return[];var r=Kr(t);return null==n?r:l(r,function(t){return e(n,B,t)})}function Yr(e){return e=Le(e),e.__chain__=!0,e}function Qr(e,t){return t(e)}function Zr(){return this}function Jr(e,t){return(os(e)?n:ia)(e,yr(t,3))}function ei(e,t){return(os(e)?r:oa)(e,yr(t,3))}function ti(e,t){return(os(e)?l:Wt)(e,yr(t,3))}function ni(e,t,n){return t=n?B:t,t=e&&null==t?e.length:t,sr(e,128,B,B,B,B,t)}function ri(e,t){var n;if("function"!=typeof t)throw new eo("Expected a function");return e=Ei(e),function(){return 0<--e&&(n=t.apply(this,arguments)),1>=e&&(t=B),n}}function ii(e,t,n){return t=n?B:t,e=sr(e,8,B,B,B,B,B,t),e.placeholder=ii.placeholder,e}function oi(e,t,n){return t=n?B:t,e=sr(e,16,B,B,B,B,B,t),e.placeholder=oi.placeholder,e}function ai(e,t,n){function r(t){var n=l,r=u;return l=u=B,h=t,d=e.apply(r,n)}function i(e){var n=e-p;return e-=h,p===B||n>=t||0>n||v&&e>=c}function o(){var e=Wa();if(i(e))return a(e);var n,r=ya;n=e-h,e=t-(e-p),n=v?Ro(e,c-n):e,f=r(o,n)}function a(e){return f=B,m&&l?r(e):(l=u=B,d)}function s(){var e=Wa(),n=i(e);if(l=arguments,u=this,p=e,n){if(f===B)return h=e=p,f=ya(o,t),g?r(e):d;if(v)return f=ya(o,t),r(p)}return f===B&&(f=ya(o,t)),d}var l,u,c,d,f,p,h=0,g=!1,v=!1,m=!0;if("function"!=typeof e)throw new eo("Expected a function");return t=_i(t)||0,vi(n)&&(g=!!n.leading,c=(v="maxWait"in n)?Po(_i(n.maxWait)||0,t):c,m="trailing"in n?!!n.trailing:m),s.cancel=function(){f!==B&&ca(f),h=0,l=p=u=f=B},s.flush=function(){return f===B?d:a(Wa())},s}function si(e,t){function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;return o.has(i)?o.get(i):(r=e.apply(this,r),n.cache=o.set(i,r)||o,r)}if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new eo("Expected a function");return n.cache=new(si.Cache||Oe),n}function li(e){if("function"!=typeof e)throw new eo("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function ui(e,t){return e===t||e!==e&&t!==t}function ci(e){return null!=e&&gi(e.length)&&!pi(e)}function di(e){return mi(e)&&ci(e)}function fi(e){if(!mi(e))return!1;var t=It(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!bi(e)}function pi(e){return!!vi(e)&&("[object Function]"==(e=It(e))||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e)}function hi(e){return"number"==typeof e&&e==Ei(e)}function gi(e){return"number"==typeof e&&-1<e&&0==e%1&&9007199254740991>=e}function vi(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function mi(e){return null!=e&&"object"==typeof e}function yi(e){return"number"==typeof e||mi(e)&&"[object Number]"==It(e)}function bi(e){return!(!mi(e)||"[object Object]"!=It(e))&&(null===(e=mo(e))||"function"==typeof(e=oo.call(e,"constructor")&&e.constructor)&&e instanceof e&&io.call(e)==uo)}function xi(e){return"string"==typeof e||!os(e)&&mi(e)&&"[object String]"==It(e)}function wi(e){return"symbol"==typeof e||mi(e)&&"[object Symbol]"==It(e)}function Ci(e){if(!e)return[];if(ci(e))return xi(e)?U(e):Pn(e);if(Co&&e[Co]){e=e[Co]();for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}return t=ga(e),("[object Map]"==t?D:"[object Set]"==t?P:zi)(e)}function Si(e){return e?(e=_i(e),e===N||e===-N?1.7976931348623157e308*(0>e?-1:1):e===e?e:0):0===e?e:0}function Ei(e){e=Si(e);var t=e%1;return e===e?t?e-t:e:0}function Li(e){return e?ft(Ei(e),0,4294967295):0}function _i(e){if("number"==typeof e)return e;if(wi(e))return O;if(vi(e)&&(e="function"==typeof e.valueOf?e.valueOf():e,e=vi(e)?e+"":e),"string"!=typeof e)return 0===e?e:+e;e=e.replace(ie,"");var t=ge.test(e);return t||me.test(e)?ze(e.slice(2),t?2:8):he.test(e)?O:+e}function Ii(e){return Rn(e,Di(e))}function ki(e){return null==e?"":yn(e)}function Ti(e,t,n){return e=null==e?B:Lt(e,t),e===B?n:e}function Mi(e,t){return null!=e&&Cr(e,t,Mt)}function Ai(e){return ci(e)?et(e):Vt(e)}function Di(e){if(ci(e))e=et(e,!0);else if(vi(e)){var t,n=Ar(e),r=[];for(t in e)("constructor"!=t||!n&&oo.call(e,t))&&r.push(t);e=r}else{if(t=[],null!=e)for(n in Qi(e))t.push(n);e=t}return e}function Hi(e,t){if(null==e)return{};var n=l(gr(e),function(e){return[e]});return t=yr(t),en(e,n,function(e,n){return t(e,n[0])})}function zi(e){return null==e?[]:I(e,Ai(e))}function Pi(e){return Us(ki(e).toLowerCase())}function Ri(e){return(e=ki(e))&&e.replace(be,Ye).replace(Ee,"")}function ji(e,t,n){return e=ki(e),t=n?B:t,t===B?ke.test(e)?e.match(_e)||[]:e.match(ce)||[]:e.match(t)||[]}function Ui(e){return function(){return e}}function Bi(e){return e}function Ni(e){return $t("function"==typeof e?e:pt(e,1))}function Oi(e,t,r){var i=Ai(t),o=Et(t,i);null!=r||vi(t)&&(o.length||!i.length)||(r=t,t=e,e=this,o=Et(t,Ai(t)));var a=!(vi(r)&&"chain"in r&&!r.chain),s=pi(e);return n(o,function(n){var r=t[n];e[n]=r,s&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__);return(n.__actions__=Pn(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,u([this.value()],arguments))})}),e}function Gi(){}function Fi(e){return Tr(e)?b(jr(e)):tn(e)}function $i(){return[]}function Vi(){return!1}Ce=null==Ce?je:Je.defaults(je.Object(),Ce,Je.pick(je,Te));var qi=Ce.Array,Wi=Ce.Date,Ki=Ce.Error,Xi=Ce.Function,Yi=Ce.Math,Qi=Ce.Object,Zi=Ce.RegExp,Ji=Ce.String,eo=Ce.TypeError,to=qi.prototype,no=Qi.prototype,ro=Ce["__core-js_shared__"],io=Xi.prototype.toString,oo=no.hasOwnProperty,ao=0,so=function(){var e=/[^.]+$/.exec(ro&&ro.keys&&ro.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),lo=no.toString,uo=io.call(Qi),co=je._,fo=Zi("^"+io.call(oo).replace(ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),po=Ne?Ce.Buffer:B,ho=Ce.Symbol,go=Ce.Uint8Array,vo=po?po.g:B,mo=H(Qi.getPrototypeOf,Qi),yo=Qi.create,bo=no.propertyIsEnumerable,xo=to.splice,wo=ho?ho.isConcatSpreadable:B,Co=ho?ho.iterator:B,So=ho?ho.toStringTag:B,Eo=function(){try{var e=wr(Qi,"defineProperty");return e({},"",{}),e}catch(e){}}(),Lo=Ce.clearTimeout!==je.clearTimeout&&Ce.clearTimeout,_o=Wi&&Wi.now!==je.Date.now&&Wi.now,Io=Ce.setTimeout!==je.setTimeout&&Ce.setTimeout,ko=Yi.ceil,To=Yi.floor,Mo=Qi.getOwnPropertySymbols,Ao=po?po.isBuffer:B,Do=Ce.isFinite,Ho=to.join,zo=H(Qi.keys,Qi),Po=Yi.max,Ro=Yi.min,jo=Wi.now,Uo=Ce.parseInt,Bo=Yi.random,No=to.reverse,Oo=wr(Ce,"DataView"),Go=wr(Ce,"Map"),Fo=wr(Ce,"Promise"),$o=wr(Ce,"Set"),Vo=wr(Ce,"WeakMap"),qo=wr(Qi,"create"),Wo=Vo&&new Vo,Ko={},Xo=Ur(Oo),Yo=Ur(Go),Qo=Ur(Fo),Zo=Ur($o),Jo=Ur(Vo),ea=ho?ho.prototype:B,ta=ea?ea.valueOf:B,na=ea?ea.toString:B,ra=function(){function e(){}return function(t){return vi(t)?yo?yo(t):(e.prototype=t,t=new e,e.prototype=B,t):{}}}();Le.templateSettings={escape:Y,evaluate:Q,interpolate:Z,variable:"",imports:{_:Le}},Le.prototype=De.prototype,Le.prototype.constructor=Le,Pe.prototype=ra(De.prototype),Pe.prototype.constructor=Pe,Re.prototype=ra(De.prototype),Re.prototype.constructor=Re,Ue.prototype.clear=function(){this.__data__=qo?qo(null):{},this.size=0},Ue.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},Ue.prototype.get=function(e){var t=this.__data__;return qo?(e=t[e],"__lodash_hash_undefined__"===e?B:e):oo.call(t,e)?t[e]:B},Ue.prototype.has=function(e){var t=this.__data__;return qo?t[e]!==B:oo.call(t,e)},Ue.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=qo&&t===B?"__lodash_hash_undefined__":t,this},Be.prototype.clear=function(){this.__data__=[],this.size=0},Be.prototype.delete=function(e){var t=this.__data__;return!(0>(e=at(t,e))||(e==t.length-1?t.pop():xo.call(t,e,1),--this.size,0))},Be.prototype.get=function(e){var t=this.__data__;return e=at(t,e),0>e?B:t[e][1]},Be.prototype.has=function(e){return-1<at(this.__data__,e)},Be.prototype.set=function(e,t){var n=this.__data__,r=at(n,e);return 0>r?(++this.size,n.push([e,t])):n[r][1]=t,this},Oe.prototype.clear=function(){this.size=0,this.__data__={hash:new Ue,map:new(Go||Be),string:new Ue}},Oe.prototype.delete=function(e){return e=br(this,e).delete(e),this.size-=e?1:0,e},Oe.prototype.get=function(e){return br(this,e).get(e)},Oe.prototype.has=function(e){return br(this,e).has(e)},Oe.prototype.set=function(e,t){var n=br(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Ge.prototype.add=Ge.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Ge.prototype.has=function(e){return this.__data__.has(e)},Xe.prototype.clear=function(){this.__data__=new Be,this.size=0},Xe.prototype.delete=function(e){var t=this.__data__;return e=t.delete(e),this.size=t.size,e},Xe.prototype.get=function(e){return this.__data__.get(e)},Xe.prototype.has=function(e){return this.__data__.has(e)},Xe.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Be){var r=n.__data__;if(!Go||199>r.length)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Oe(r)}return n.set(e,t),this.size=n.size,this};var ia=On(Ct),oa=On(St,!0),aa=Gn(),sa=Gn(!0),la=Wo?function(e,t){return Wo.set(e,t),e}:Bi,ua=Eo?function(e,t){return Eo(e,"toString",{configurable:!0,enumerable:!1,value:Ui(t),writable:!0})}:Bi,ca=Lo||function(e){return je.clearTimeout(e)},da=$o&&1/P(new $o([,-0]))[1]==N?function(e){return new $o(e)}:Gi,fa=Wo?function(e){return Wo.get(e)}:Gi,pa=Mo?function(e){return null==e?[]:(e=Qi(e),o(Mo(e),function(t){return bo.call(e,t)}))}:$i,ha=Mo?function(e){for(var t=[];e;)u(t,pa(e)),e=mo(e);return t}:$i,ga=It;(Oo&&"[object DataView]"!=ga(new Oo(new ArrayBuffer(1)))||Go&&"[object Map]"!=ga(new Go)||Fo&&"[object Promise]"!=ga(Fo.resolve())||$o&&"[object Set]"!=ga(new $o)||Vo&&"[object WeakMap]"!=ga(new Vo))&&(ga=function(e){var t=It(e);if(e=(e="[object Object]"==t?e.constructor:B)?Ur(e):"")switch(e){case Xo:return"[object DataView]";case Yo:return"[object Map]";case Qo:return"[object Promise]";case Zo:return"[object Set]";case Jo:return"[object WeakMap]"}return t});var va=ro?pi:Vi,ma=Pr(la),ya=Io||function(e,t){return je.setTimeout(e,t)},ba=Pr(ua),xa=function(e){e=si(e,function(e){return 500===t.size&&t.clear(),e});var t=e.cache;return e}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(te,function(e,n,r,i){t.push(r?i.replace(de,"$1"):n||e)}),t}),wa=sn(function(e,t){return di(e)?mt(e,wt(t,1,di,!0)):[]}),Ca=sn(function(e,t){var n=Vr(t);return di(n)&&(n=B),di(e)?mt(e,wt(t,1,di,!0),yr(n,2)):[]}),Sa=sn(function(e,t){var n=Vr(t);return di(n)&&(n=B),di(e)?mt(e,wt(t,1,di,!0),B,n):[]}),Ea=sn(function(e){var t=l(e,Ln);return t.length&&t[0]===e[0]?At(t):[]}),La=sn(function(e){var t=Vr(e),n=l(e,Ln);return t===Vr(n)?t=B:n.pop(),n.length&&n[0]===e[0]?At(n,yr(t,2)):[]}),_a=sn(function(e){var t=Vr(e),n=l(e,Ln);return(t="function"==typeof t?t:B)&&n.pop(),n.length&&n[0]===e[0]?At(n,B,t):[]}),Ia=sn(qr),ka=pr(function(e,t){var n=null==e?0:e.length,r=dt(e,t);return rn(e,l(t,function(e){return Ir(e,n)?+e:e}).sort(Dn)),r}),Ta=sn(function(e){return bn(wt(e,1,di,!0))}),Ma=sn(function(e){var t=Vr(e);return di(t)&&(t=B),bn(wt(e,1,di,!0),yr(t,2))}),Aa=sn(function(e){var t=Vr(e),t="function"==typeof t?t:B;return bn(wt(e,1,di,!0),B,t)}),Da=sn(function(e,t){return di(e)?mt(e,t):[]}),Ha=sn(function(e){return Sn(o(e,di))}),za=sn(function(e){var t=Vr(e);return di(t)&&(t=B),Sn(o(e,di),yr(t,2))}),Pa=sn(function(e){var t=Vr(e),t="function"==typeof t?t:B;return Sn(o(e,di),B,t)}),Ra=sn(Kr),ja=sn(function(e){var t=e.length,t=1<t?e[t-1]:B,t="function"==typeof t?(e.pop(),t):B;return Xr(e,t)}),Ua=pr(function(e){function t(t){return dt(t,e)}var n=e.length,r=n?e[0]:0,i=this.__wrapped__;return!(1<n||this.__actions__.length)&&i instanceof Re&&Ir(r)?(i=i.slice(r,+r+(n?1:0)),i.__actions__.push({func:Qr,args:[t],thisArg:B}),new Pe(i,this.__chain__).thru(function(e){return n&&!e.length&&e.push(B),e})):this.thru(t)}),Ba=Bn(function(e,t,n){oo.call(e,n)?++e[n]:ct(e,n,1)}),Na=Kn(Or),Oa=Kn(Gr),Ga=Bn(function(e,t,n){oo.call(e,n)?e[n].push(t):ct(e,n,[t])}),Fa=sn(function(t,n,r){var i=-1,o="function"==typeof n,a=ci(t)?qi(t.length):[];return ia(t,function(t){a[++i]=o?e(n,t,r):Ht(t,n,r)}),a}),$a=Bn(function(e,t,n){ct(e,n,t)}),Va=Bn(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),qa=sn(function(e,t){if(null==e)return[];var n=t.length;return 1<n&&kr(e,t[0],t[1])?t=[]:2<n&&kr(t[0],t[1],t[2])&&(t=[t[0]]),Zt(e,wt(t,1),[])}),Wa=_o||function(){return je.Date.now()},Ka=sn(function(e,t,n){var r=1;if(n.length)var i=z(n,mr(Ka)),r=32|r;return sr(e,r,t,n,i)}),Xa=sn(function(e,t,n){var r=3;if(n.length)var i=z(n,mr(Xa)),r=32|r;return sr(t,r,e,n,i)}),Ya=sn(function(e,t){return vt(e,1,t)}),Qa=sn(function(e,t,n){return vt(e,_i(t)||0,n)});si.Cache=Oe;var Za=sn(function(t,n){n=1==n.length&&os(n[0])?l(n[0],_(yr())):l(wt(n,1),_(yr()));var r=n.length;return sn(function(i){for(var o=-1,a=Ro(i.length,r);++o<a;)i[o]=n[o].call(this,i[o]);return e(t,this,i)})}),Ja=sn(function(e,t){return sr(e,32,B,t,z(t,mr(Ja)))}),es=sn(function(e,t){return sr(e,64,B,t,z(t,mr(es)))}),ts=pr(function(e,t){return sr(e,256,B,B,B,t)}),ns=rr(kt),rs=rr(function(e,t){return e>=t}),is=zt(function(){return arguments}())?zt:function(e){return mi(e)&&oo.call(e,"callee")&&!bo.call(e,"callee")},os=qi.isArray,as=Fe?_(Fe):Pt,ss=Ao||Vi,ls=$e?_($e):Rt,us=Ve?_(Ve):Ut,cs=qe?_(qe):Ot,ds=We?_(We):Gt,fs=Ke?_(Ke):Ft,ps=rr(qt),hs=rr(function(e,t){return e<=t}),gs=Nn(function(e,t){if(Ar(t)||ci(t))Rn(t,Ai(t),e);else for(var n in t)oo.call(t,n)&&ot(e,n,t[n])}),vs=Nn(function(e,t){Rn(t,Di(t),e)}),ms=Nn(function(e,t,n,r){Rn(t,Di(t),e,r)}),ys=Nn(function(e,t,n,r){Rn(t,Ai(t),e,r)}),bs=pr(dt),xs=sn(function(e,t){e=Qi(e);var n=-1,r=t.length,i=2<r?t[2]:B;for(i&&kr(t[0],t[1],i)&&(r=1);++n<r;)for(var i=t[n],o=Di(i),a=-1,s=o.length;++a<s;){var l=o[a],u=e[l];(u===B||ui(u,no[l])&&!oo.call(e,l))&&(e[l]=i[l])}return e}),ws=sn(function(t){return t.push(B,ur),e(_s,B,t)}),Cs=Qn(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=lo.call(t)),e[t]=n},Ui(Bi)),Ss=Qn(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=lo.call(t)),oo.call(e,t)?e[t].push(n):e[t]=[n]},yr),Es=sn(Ht),Ls=Nn(function(e,t,n){Yt(e,t,n)}),_s=Nn(function(e,t,n,r){Yt(e,t,n,r)}),Is=pr(function(e,t){var n={};if(null==e)return n;var r=!1;t=l(t,function(t){return t=In(t,e),r||(r=1<t.length),t}),Rn(e,gr(e),n),r&&(n=pt(n,7,cr));for(var i=t.length;i--;)xn(n,t[i]);return n}),ks=pr(function(e,t){return null==e?{}:Jt(e,t)}),Ts=ar(Ai),Ms=ar(Di),As=Vn(function(e,t,n){return t=t.toLowerCase(),e+(n?Pi(t):t)}),Ds=Vn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Hs=Vn(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),zs=$n("toLowerCase"),Ps=Vn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Rs=Vn(function(e,t,n){return e+(n?" ":"")+Us(t)}),js=Vn(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Us=$n("toUpperCase"),Bs=sn(function(t,n){try{return e(t,B,n)}catch(e){return fi(e)?e:new Ki(e)}}),Ns=pr(function(e,t){return n(t,function(t){t=jr(t),ct(e,t,Ka(e[t],e))}),e}),Os=Xn(),Gs=Xn(!0),Fs=sn(function(e,t){return function(n){return Ht(n,e,t)}}),$s=sn(function(e,t){return function(n){return Ht(e,n,t)}}),Vs=Jn(l),qs=Jn(i),Ws=Jn(f),Ks=nr(),Xs=nr(!0),Ys=Zn(function(e,t){return e+t},0),Qs=or("ceil"),Zs=Zn(function(e,t){return e/t},1),Js=or("floor"),el=Zn(function(e,t){return e*t},1),tl=or("round"),nl=Zn(function(e,t){return e-t},0);return Le.after=function(e,t){if("function"!=typeof t)throw new eo("Expected a function");return e=Ei(e),function(){if(1>--e)return t.apply(this,arguments)}},Le.ary=ni,Le.assign=gs,Le.assignIn=vs,Le.assignInWith=ms,Le.assignWith=ys,Le.at=bs,Le.before=ri,Le.bind=Ka,Le.bindAll=Ns,Le.bindKey=Xa,Le.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return os(e)?e:[e]},Le.chain=Yr,Le.chunk=function(e,t,n){if(t=(n?kr(e,t,n):t===B)?1:Po(Ei(t),0),!(n=null==e?0:e.length)||1>t)return[];for(var r=0,i=0,o=qi(ko(n/t));r<n;)o[i++]=fn(e,r,r+=t);return o},Le.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},Le.concat=function(){var e=arguments.length;if(!e)return[];for(var t=qi(e-1),n=arguments[0];e--;)t[e-1]=arguments[e];return u(os(n)?Pn(n):[n],wt(t,1))},Le.cond=function(t){var n=null==t?0:t.length,r=yr();return t=n?l(t,function(e){if("function"!=typeof e[1])throw new eo("Expected a function");return[r(e[0]),e[1]]}):[],sn(function(r){for(var i=-1;++i<n;){var o=t[i];if(e(o[0],this,r))return e(o[1],this,r)}})},Le.conforms=function(e){return ht(pt(e,1))},Le.constant=Ui,Le.countBy=Ba,Le.create=function(e,t){var n=ra(e);return null==t?n:lt(n,t)},Le.curry=ii,Le.curryRight=oi,Le.debounce=ai,Le.defaults=xs,Le.defaultsDeep=ws,Le.defer=Ya,Le.delay=Qa,Le.difference=wa,Le.differenceBy=Ca,Le.differenceWith=Sa,Le.drop=function(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===B?1:Ei(t),fn(e,0>t?0:t,r)):[]},Le.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===B?1:Ei(t),t=r-t,fn(e,0,0>t?0:t)):[]},Le.dropRightWhile=function(e,t){return e&&e.length?wn(e,yr(t,3),!0,!0):[]},Le.dropWhile=function(e,t){return e&&e.length?wn(e,yr(t,3),!0):[]},Le.fill=function(e,t,n,r){var i=null==e?0:e.length;if(!i)return[];for(n&&"number"!=typeof n&&kr(e,t,n)&&(n=0,r=i),i=e.length,n=Ei(n),0>n&&(n=-n>i?0:i+n),r=r===B||r>i?i:Ei(r),0>r&&(r+=i),r=n>r?0:Li(r);n<r;)e[n++]=t;return e},Le.filter=function(e,t){return(os(e)?o:xt)(e,yr(t,3))},Le.flatMap=function(e,t){return wt(ti(e,t),1)},Le.flatMapDeep=function(e,t){return wt(ti(e,t),N)},Le.flatMapDepth=function(e,t,n){return n=n===B?1:Ei(n),wt(ti(e,t),n)},Le.flatten=Fr,Le.flattenDeep=function(e){return(null==e?0:e.length)?wt(e,N):[]},Le.flattenDepth=function(e,t){return null!=e&&e.length?(t=t===B?1:Ei(t),wt(e,t)):[]},Le.flip=function(e){return sr(e,512)},Le.flow=Os,Le.flowRight=Gs,Le.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Le.functions=function(e){return null==e?[]:Et(e,Ai(e))},Le.functionsIn=function(e){return null==e?[]:Et(e,Di(e))},Le.groupBy=Ga,Le.initial=function(e){return(null==e?0:e.length)?fn(e,0,-1):[]},Le.intersection=Ea,Le.intersectionBy=La,Le.intersectionWith=_a,Le.invert=Cs,Le.invertBy=Ss,Le.invokeMap=Fa,Le.iteratee=Ni,Le.keyBy=$a,Le.keys=Ai,Le.keysIn=Di,Le.map=ti,Le.mapKeys=function(e,t){var n={};return t=yr(t,3),Ct(e,function(e,r,i){ct(n,t(e,r,i),e)}),n},Le.mapValues=function(e,t){var n={};return t=yr(t,3),Ct(e,function(e,r,i){ct(n,r,t(e,r,i))}),n},Le.matches=function(e){return Kt(pt(e,1))},Le.matchesProperty=function(e,t){return Xt(e,pt(t,1))},Le.memoize=si,Le.merge=Ls,Le.mergeWith=_s,Le.method=Fs,Le.methodOf=$s,Le.mixin=Oi,Le.negate=li,Le.nthArg=function(e){return e=Ei(e),sn(function(t){return Qt(t,e)})},Le.omit=Is,Le.omitBy=function(e,t){return Hi(e,li(yr(t)))},Le.once=function(e){return ri(2,e)},Le.orderBy=function(e,t,n,r){return null==e?[]:(os(t)||(t=null==t?[]:[t]),n=r?B:n,os(n)||(n=null==n?[]:[n]),Zt(e,t,n))},Le.over=Vs,Le.overArgs=Za,Le.overEvery=qs,Le.overSome=Ws,Le.partial=Ja,Le.partialRight=es,Le.partition=Va,Le.pick=ks,Le.pickBy=Hi,Le.property=Fi,Le.propertyOf=function(e){return function(t){return null==e?B:Lt(e,t)}},Le.pull=Ia,Le.pullAll=qr,Le.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?nn(e,t,yr(n,2)):e},Le.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?nn(e,t,B,n):e},Le.pullAt=ka,Le.range=Ks,Le.rangeRight=Xs,Le.rearg=ts,Le.reject=function(e,t){return(os(e)?o:xt)(e,li(yr(t,3)))},Le.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=yr(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return rn(e,i),n},Le.rest=function(e,t){if("function"!=typeof e)throw new eo("Expected a function");return t=t===B?t:Ei(t),sn(e,t)},Le.reverse=Wr,Le.sampleSize=function(e,t,n){return t=(n?kr(e,t,n):t===B)?1:Ei(t),(os(e)?nt:un)(e,t)},Le.set=function(e,t,n){return null==e?e:cn(e,t,n)},Le.setWith=function(e,t,n,r){return r="function"==typeof r?r:B,null==e?e:cn(e,t,n,r)},Le.shuffle=function(e){return(os(e)?rt:dn)(e)},Le.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&kr(e,t,n)?(t=0,n=r):(t=null==t?0:Ei(t),n=n===B?r:Ei(n)),fn(e,t,n)):[]},Le.sortBy=qa,Le.sortedUniq=function(e){return e&&e.length?vn(e):[]},Le.sortedUniqBy=function(e,t){return e&&e.length?vn(e,yr(t,2)):[]},Le.split=function(e,t,n){return n&&"number"!=typeof n&&kr(e,t,n)&&(t=n=B),n=n===B?4294967295:n>>>0,n?(e=ki(e))&&("string"==typeof t||null!=t&&!cs(t))&&!(t=yn(t))&&Ie.test(e)?kn(U(e),0,n):e.split(t,n):[]},Le.spread=function(t,n){if("function"!=typeof t)throw new eo("Expected a function");return n=null==n?0:Po(Ei(n),0),sn(function(r){var i=r[n];return r=kn(r,0,n),i&&u(r,i),e(t,this,r)})},Le.tail=function(e){var t=null==e?0:e.length;return t?fn(e,1,t):[]},Le.take=function(e,t,n){return e&&e.length?(t=n||t===B?1:Ei(t),fn(e,0,0>t?0:t)):[]},Le.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===B?1:Ei(t),t=r-t,fn(e,0>t?0:t,r)):[]},Le.takeRightWhile=function(e,t){return e&&e.length?wn(e,yr(t,3),!1,!0):[]},Le.takeWhile=function(e,t){return e&&e.length?wn(e,yr(t,3)):[]},Le.tap=function(e,t){return t(e),e},Le.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new eo("Expected a function");return vi(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),ai(e,t,{leading:r,maxWait:t,trailing:i})},Le.thru=Qr,Le.toArray=Ci,Le.toPairs=Ts,Le.toPairsIn=Ms,Le.toPath=function(e){return os(e)?l(e,jr):wi(e)?[e]:Pn(xa(ki(e)))},Le.toPlainObject=Ii,Le.transform=function(e,t,r){var i=os(e),o=i||ss(e)||fs(e);if(t=yr(t,4),null==r){var a=e&&e.constructor;r=o?i?new a:[]:vi(e)&&pi(a)?ra(mo(e)):{}}return(o?n:Ct)(e,function(e,n,i){return t(r,e,n,i)}),r},Le.unary=function(e){return ni(e,1)},Le.union=Ta,Le.unionBy=Ma,Le.unionWith=Aa,Le.uniq=function(e){return e&&e.length?bn(e):[]},Le.uniqBy=function(e,t){return e&&e.length?bn(e,yr(t,2)):[]},Le.uniqWith=function(e,t){return t="function"==typeof t?t:B,e&&e.length?bn(e,B,t):[]},Le.unset=function(e,t){return null==e||xn(e,t)},Le.unzip=Kr,Le.unzipWith=Xr,Le.update=function(e,t,n){return null==e?e:cn(e,t,_n(n)(Lt(e,t)),void 0)},Le.updateWith=function(e,t,n,r){return r="function"==typeof r?r:B,null!=e&&(e=cn(e,t,_n(n)(Lt(e,t)),r)),e},Le.values=zi,Le.valuesIn=function(e){return null==e?[]:I(e,Di(e))},Le.without=Da,Le.words=ji,Le.wrap=function(e,t){return Ja(_n(t),e)},Le.xor=Ha,Le.xorBy=za,Le.xorWith=Pa,Le.zip=Ra,Le.zipObject=function(e,t){return En(e||[],t||[],ot)},Le.zipObjectDeep=function(e,t){return En(e||[],t||[],cn)},Le.zipWith=ja,Le.entries=Ts,Le.entriesIn=Ms,Le.extend=vs,Le.extendWith=ms,Oi(Le,Le),Le.add=Ys,Le.attempt=Bs,
Le.camelCase=As,Le.capitalize=Pi,Le.ceil=Qs,Le.clamp=function(e,t,n){return n===B&&(n=t,t=B),n!==B&&(n=_i(n),n=n===n?n:0),t!==B&&(t=_i(t),t=t===t?t:0),ft(_i(e),t,n)},Le.clone=function(e){return pt(e,4)},Le.cloneDeep=function(e){return pt(e,5)},Le.cloneDeepWith=function(e,t){return t="function"==typeof t?t:B,pt(e,5,t)},Le.cloneWith=function(e,t){return t="function"==typeof t?t:B,pt(e,4,t)},Le.conformsTo=function(e,t){return null==t||gt(e,t,Ai(t))},Le.deburr=Ri,Le.defaultTo=function(e,t){return null==e||e!==e?t:e},Le.divide=Zs,Le.endsWith=function(e,t,n){e=ki(e),t=yn(t);var r=e.length,r=n=n===B?r:ft(Ei(n),0,r);return 0<=(n-=t.length)&&e.slice(n,r)==t},Le.eq=ui,Le.escape=function(e){return(e=ki(e))&&X.test(e)?e.replace(W,Qe):e},Le.escapeRegExp=function(e){return(e=ki(e))&&re.test(e)?e.replace(ne,"\\$&"):e},Le.every=function(e,t,n){var r=os(e)?i:yt;return n&&kr(e,t,n)&&(t=B),r(e,yr(t,3))},Le.find=Na,Le.findIndex=Or,Le.findKey=function(e,t){return p(e,yr(t,3),Ct)},Le.findLast=Oa,Le.findLastIndex=Gr,Le.findLastKey=function(e,t){return p(e,yr(t,3),St)},Le.floor=Js,Le.forEach=Jr,Le.forEachRight=ei,Le.forIn=function(e,t){return null==e?e:aa(e,yr(t,3),Di)},Le.forInRight=function(e,t){return null==e?e:sa(e,yr(t,3),Di)},Le.forOwn=function(e,t){return e&&Ct(e,yr(t,3))},Le.forOwnRight=function(e,t){return e&&St(e,yr(t,3))},Le.get=Ti,Le.gt=ns,Le.gte=rs,Le.has=function(e,t){return null!=e&&Cr(e,t,Tt)},Le.hasIn=Mi,Le.head=$r,Le.identity=Bi,Le.includes=function(e,t,n,r){return e=ci(e)?e:zi(e),n=n&&!r?Ei(n):0,r=e.length,0>n&&(n=Po(r+n,0)),xi(e)?n<=r&&-1<e.indexOf(t,n):!!r&&-1<g(e,t,n)},Le.indexOf=function(e,t,n){var r=null==e?0:e.length;return r?(n=null==n?0:Ei(n),0>n&&(n=Po(r+n,0)),g(e,t,n)):-1},Le.inRange=function(e,t,n){return t=Si(t),n===B?(n=t,t=0):n=Si(n),(e=_i(e))>=Ro(t,n)&&e<Po(t,n)},Le.invoke=Es,Le.isArguments=is,Le.isArray=os,Le.isArrayBuffer=as,Le.isArrayLike=ci,Le.isArrayLikeObject=di,Le.isBoolean=function(e){return!0===e||!1===e||mi(e)&&"[object Boolean]"==It(e)},Le.isBuffer=ss,Le.isDate=ls,Le.isElement=function(e){return mi(e)&&1===e.nodeType&&!bi(e)},Le.isEmpty=function(e){if(null==e)return!0;if(ci(e)&&(os(e)||"string"==typeof e||"function"==typeof e.splice||ss(e)||fs(e)||is(e)))return!e.length;var t=ga(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(Ar(e))return!Vt(e).length;for(var n in e)if(oo.call(e,n))return!1;return!0},Le.isEqual=function(e,t){return jt(e,t)},Le.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:B)?n(e,t):B;return r===B?jt(e,t,B,n):!!r},Le.isError=fi,Le.isFinite=function(e){return"number"==typeof e&&Do(e)},Le.isFunction=pi,Le.isInteger=hi,Le.isLength=gi,Le.isMap=us,Le.isMatch=function(e,t){return e===t||Bt(e,t,xr(t))},Le.isMatchWith=function(e,t,n){return n="function"==typeof n?n:B,Bt(e,t,xr(t),n)},Le.isNaN=function(e){return yi(e)&&e!=+e},Le.isNative=function(e){if(va(e))throw new Ki("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Nt(e)},Le.isNil=function(e){return null==e},Le.isNull=function(e){return null===e},Le.isNumber=yi,Le.isObject=vi,Le.isObjectLike=mi,Le.isPlainObject=bi,Le.isRegExp=cs,Le.isSafeInteger=function(e){return hi(e)&&-9007199254740991<=e&&9007199254740991>=e},Le.isSet=ds,Le.isString=xi,Le.isSymbol=wi,Le.isTypedArray=fs,Le.isUndefined=function(e){return e===B},Le.isWeakMap=function(e){return mi(e)&&"[object WeakMap]"==ga(e)},Le.isWeakSet=function(e){return mi(e)&&"[object WeakSet]"==It(e)},Le.join=function(e,t){return null==e?"":Ho.call(e,t)},Le.kebabCase=Ds,Le.last=Vr,Le.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;if(n!==B&&(i=Ei(n),i=0>i?Po(r+i,0):Ro(i,r-1)),t===t){for(n=i+1;n--&&e[n]!==t;);e=n}else e=h(e,m,i,!0);return e},Le.lowerCase=Hs,Le.lowerFirst=zs,Le.lt=ps,Le.lte=hs,Le.max=function(e){return e&&e.length?bt(e,Bi,kt):B},Le.maxBy=function(e,t){return e&&e.length?bt(e,yr(t,2),kt):B},Le.mean=function(e){return y(e,Bi)},Le.meanBy=function(e,t){return y(e,yr(t,2))},Le.min=function(e){return e&&e.length?bt(e,Bi,qt):B},Le.minBy=function(e,t){return e&&e.length?bt(e,yr(t,2),qt):B},Le.stubArray=$i,Le.stubFalse=Vi,Le.stubObject=function(){return{}},Le.stubString=function(){return""},Le.stubTrue=function(){return!0},Le.multiply=el,Le.nth=function(e,t){return e&&e.length?Qt(e,Ei(t)):B},Le.noConflict=function(){return je._===this&&(je._=co),this},Le.noop=Gi,Le.now=Wa,Le.pad=function(e,t,n){e=ki(e);var r=(t=Ei(t))?j(e):0;return!t||r>=t?e:(t=(t-r)/2,er(To(t),n)+e+er(ko(t),n))},Le.padEnd=function(e,t,n){e=ki(e);var r=(t=Ei(t))?j(e):0;return t&&r<t?e+er(t-r,n):e},Le.padStart=function(e,t,n){e=ki(e);var r=(t=Ei(t))?j(e):0;return t&&r<t?er(t-r,n)+e:e},Le.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),Uo(ki(e).replace(oe,""),t||0)},Le.random=function(e,t,n){if(n&&"boolean"!=typeof n&&kr(e,t,n)&&(t=n=B),n===B&&("boolean"==typeof t?(n=t,t=B):"boolean"==typeof e&&(n=e,e=B)),e===B&&t===B?(e=0,t=1):(e=Si(e),t===B?(t=e,e=0):t=Si(t)),e>t){var r=e;e=t,t=r}return n||e%1||t%1?(n=Bo(),Ro(e+n*(t-e+He("1e-"+((n+"").length-1))),t)):on(e,t)},Le.reduce=function(e,t,n){var r=os(e)?c:w,i=3>arguments.length;return r(e,yr(t,4),n,i,ia)},Le.reduceRight=function(e,t,n){var r=os(e)?d:w,i=3>arguments.length;return r(e,yr(t,4),n,i,oa)},Le.repeat=function(e,t,n){return t=(n?kr(e,t,n):t===B)?1:Ei(t),an(ki(e),t)},Le.replace=function(){var e=arguments,t=ki(e[0]);return 3>e.length?t:t.replace(e[1],e[2])},Le.result=function(e,t,n){t=In(t,e);var r=-1,i=t.length;for(i||(i=1,e=B);++r<i;){var o=null==e?B:e[jr(t[r])];o===B&&(r=i,o=n),e=pi(o)?o.call(e):o}return e},Le.round=tl,Le.runInContext=x,Le.sample=function(e){return(os(e)?tt:ln)(e)},Le.size=function(e){if(null==e)return 0;if(ci(e))return xi(e)?j(e):e.length;var t=ga(e);return"[object Map]"==t||"[object Set]"==t?e.size:Vt(e).length},Le.snakeCase=Ps,Le.some=function(e,t,n){var r=os(e)?f:pn;return n&&kr(e,t,n)&&(t=B),r(e,yr(t,3))},Le.sortedIndex=function(e,t){return hn(e,t)},Le.sortedIndexBy=function(e,t,n){return gn(e,t,yr(n,2))},Le.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=hn(e,t);if(r<n&&ui(e[r],t))return r}return-1},Le.sortedLastIndex=function(e,t){return hn(e,t,!0)},Le.sortedLastIndexBy=function(e,t,n){return gn(e,t,yr(n,2),!0)},Le.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=hn(e,t,!0)-1;if(ui(e[n],t))return n}return-1},Le.startCase=Rs,Le.startsWith=function(e,t,n){return e=ki(e),n=null==n?0:ft(Ei(n),0,e.length),t=yn(t),e.slice(n,n+t.length)==t},Le.subtract=nl,Le.sum=function(e){return e&&e.length?S(e,Bi):0},Le.sumBy=function(e,t){return e&&e.length?S(e,yr(t,2)):0},Le.template=function(e,t,n){var r=Le.templateSettings;n&&kr(e,t,n)&&(t=B),e=ki(e),t=ms({},t,r,lr),n=ms({},t.imports,r.imports,lr);var i,o,a=Ai(n),s=I(n,a),l=0;n=t.interpolate||xe;var u="__p+='";n=Zi((t.escape||xe).source+"|"+n.source+"|"+(n===Z?fe:xe).source+"|"+(t.evaluate||xe).source+"|$","g");var c="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";if(e.replace(n,function(t,n,r,a,s,c){return r||(r=a),u+=e.slice(l,c).replace(we,A),n&&(i=!0,u+="'+__e("+n+")+'"),s&&(o=!0,u+="';"+s+";\n__p+='"),r&&(u+="'+((__t=("+r+"))==null?'':__t)+'"),l=c+t.length,t}),u+="';",(t=t.variable)||(u="with(obj){"+u+"}"),u=(o?u.replace(F,""):u).replace($,"$1").replace(V,"$1;"),u="function("+(t||"obj")+"){"+(t?"":"obj||(obj={});")+"var __t,__p=''"+(i?",__e=_.escape":"")+(o?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+u+"return __p}",t=Bs(function(){return Xi(a,c+"return "+u).apply(B,s)}),t.source=u,fi(t))throw t;return t},Le.times=function(e,t){if(1>(e=Ei(e))||9007199254740991<e)return[];var n=4294967295,r=Ro(e,4294967295);for(t=yr(t),e-=4294967295,r=E(r,t);++n<e;)t(n);return r},Le.toFinite=Si,Le.toInteger=Ei,Le.toLength=Li,Le.toLower=function(e){return ki(e).toLowerCase()},Le.toNumber=_i,Le.toSafeInteger=function(e){return e?ft(Ei(e),-9007199254740991,9007199254740991):0===e?e:0},Le.toString=ki,Le.toUpper=function(e){return ki(e).toUpperCase()},Le.trim=function(e,t,n){return(e=ki(e))&&(n||t===B)?e.replace(ie,""):e&&(t=yn(t))?(e=U(e),n=U(t),t=T(e,n),n=M(e,n)+1,kn(e,t,n).join("")):e},Le.trimEnd=function(e,t,n){return(e=ki(e))&&(n||t===B)?e.replace(ae,""):e&&(t=yn(t))?(e=U(e),t=M(e,U(t))+1,kn(e,0,t).join("")):e},Le.trimStart=function(e,t,n){return(e=ki(e))&&(n||t===B)?e.replace(oe,""):e&&(t=yn(t))?(e=U(e),t=T(e,U(t)),kn(e,t).join("")):e},Le.truncate=function(e,t){var n=30,r="...";if(vi(t))var i="separator"in t?t.separator:i,n="length"in t?Ei(t.length):n,r="omission"in t?yn(t.omission):r;e=ki(e);var o=e.length;if(Ie.test(e))var a=U(e),o=a.length;if(n>=o)return e;if(1>(o=n-j(r)))return r;if(n=a?kn(a,0,o).join(""):e.slice(0,o),i===B)return n+r;if(a&&(o+=n.length-o),cs(i)){if(e.slice(o).search(i)){var s=n;for(i.global||(i=Zi(i.source,ki(pe.exec(i))+"g")),i.lastIndex=0;a=i.exec(s);)var l=a.index;n=n.slice(0,l===B?o:l)}}else e.indexOf(yn(i),o)!=o&&-1<(i=n.lastIndexOf(i))&&(n=n.slice(0,i));return n+r},Le.unescape=function(e){return(e=ki(e))&&K.test(e)?e.replace(q,Ze):e},Le.uniqueId=function(e){var t=++ao;return ki(e)+t},Le.upperCase=js,Le.upperFirst=Us,Le.each=Jr,Le.eachRight=ei,Le.first=$r,Oi(Le,function(){var e={};return Ct(Le,function(t,n){oo.call(Le.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),Le.VERSION="4.17.10",n("bind bindKey curry curryRight partial partialRight".split(" "),function(e){Le[e].placeholder=Le}),n(["drop","take"],function(e,t){Re.prototype[e]=function(n){n=n===B?1:Po(Ei(n),0);var r=this.__filtered__&&!t?new Re(this):this.clone();return r.__filtered__?r.__takeCount__=Ro(n,r.__takeCount__):r.__views__.push({size:Ro(n,4294967295),type:e+(0>r.__dir__?"Right":"")}),r},Re.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),n(["filter","map","takeWhile"],function(e,t){var n=t+1,r=1==n||3==n;Re.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:yr(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),n(["head","last"],function(e,t){var n="take"+(t?"Right":"");Re.prototype[e]=function(){return this[n](1).value()[0]}}),n(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Re.prototype[e]=function(){return this.__filtered__?new Re(this):this[n](1)}}),Re.prototype.compact=function(){return this.filter(Bi)},Re.prototype.find=function(e){return this.filter(e).head()},Re.prototype.findLast=function(e){return this.reverse().find(e)},Re.prototype.invokeMap=sn(function(e,t){return"function"==typeof e?new Re(this):this.map(function(n){return Ht(n,e,t)})}),Re.prototype.reject=function(e){return this.filter(li(yr(e)))},Re.prototype.slice=function(e,t){e=Ei(e);var n=this;return n.__filtered__&&(0<e||0>t)?new Re(n):(0>e?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==B&&(t=Ei(t),n=0>t?n.dropRight(-t):n.take(t-e)),n)},Re.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Re.prototype.toArray=function(){return this.take(4294967295)},Ct(Re.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=Le[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);i&&(Le.prototype[t]=function(){function t(e){return e=i.apply(Le,u([e],s)),r&&f?e[0]:e}var a=this.__wrapped__,s=r?[1]:arguments,l=a instanceof Re,c=s[0],d=l||os(a);d&&n&&"function"==typeof c&&1!=c.length&&(l=d=!1);var f=this.__chain__,p=!!this.__actions__.length,c=o&&!f,l=l&&!p;return!o&&d?(a=l?a:new Re(this),a=e.apply(a,s),a.__actions__.push({func:Qr,args:[t],thisArg:B}),new Pe(a,f)):c&&l?e.apply(this,s):(a=this.thru(t),c?r?a.value()[0]:a.value():a)})}),n("pop push shift sort splice unshift".split(" "),function(e){var t=to[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Le.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(os(i)?i:[],e)}return this[n](function(n){return t.apply(os(n)?n:[],e)})}}),Ct(Re.prototype,function(e,t){var n=Le[t];if(n){var r=n.name+"";(Ko[r]||(Ko[r]=[])).push({name:t,func:n})}}),Ko[Yn(B,2).name]=[{name:"wrapper",func:B}],Re.prototype.clone=function(){var e=new Re(this.__wrapped__);return e.__actions__=Pn(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Pn(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Pn(this.__views__),e},Re.prototype.reverse=function(){if(this.__filtered__){var e=new Re(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e},Re.prototype.value=function(){var e,t=this.__wrapped__.value(),n=this.__dir__,r=os(t),i=0>n,o=r?t.length:0;e=o;for(var a=this.__views__,s=0,l=-1,u=a.length;++l<u;){var c=a[l],d=c.size;switch(c.type){case"drop":s+=d;break;case"dropRight":e-=d;break;case"take":e=Ro(e,s+d);break;case"takeRight":s=Po(s,e-d)}}if(e={start:s,end:e},a=e.start,s=e.end,e=s-a,a=i?s:a-1,s=this.__iteratees__,l=s.length,u=0,c=Ro(e,this.__takeCount__),!r||!i&&o==e&&c==e)return Cn(t,this.__actions__);r=[];e:for(;e--&&u<c;){for(a+=n,i=-1,o=t[a];++i<l;){var f=s[i],d=f.type,f=(0,f.iteratee)(o);if(2==d)o=f;else if(!f){if(1==d)continue e;break e}}r[u++]=o}return r},Le.prototype.at=Ua,Le.prototype.chain=function(){return Yr(this)},Le.prototype.commit=function(){return new Pe(this.value(),this.__chain__)},Le.prototype.next=function(){this.__values__===B&&(this.__values__=Ci(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?B:this.__values__[this.__index__++]}},Le.prototype.plant=function(e){for(var t,n=this;n instanceof De;){var r=Nr(n);r.__index__=0,r.__values__=B,t?i.__wrapped__=r:t=r;var i=r,n=n.__wrapped__}return i.__wrapped__=e,t},Le.prototype.reverse=function(){var e=this.__wrapped__;return e instanceof Re?(this.__actions__.length&&(e=new Re(this)),e=e.reverse(),e.__actions__.push({func:Qr,args:[Wr],thisArg:B}),new Pe(e,this.__chain__)):this.thru(Wr)},Le.prototype.toJSON=Le.prototype.valueOf=Le.prototype.value=function(){return Cn(this.__wrapped__,this.__actions__)},Le.prototype.first=Le.prototype.head,Co&&(Le.prototype[Co]=Zr),Le}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(je._=Je,define("lodash",[],function(){return Je})):Be?((Be.exports=Je)._=Je,Ue._=Je):je._=Je}.call(this),function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,n){"use strict";function r(e,t,n){t=t||se;var r,i=t.createElement("script");if(i.text=e,n)for(r in we)n[r]&&(i[r]=n[r]);t.head.appendChild(i).parentNode.removeChild(i)}function i(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?pe[he.call(e)]||"object":typeof e}function o(e){var t=!!e&&"length"in e&&e.length,n=i(e);return!be(e)&&!xe(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function a(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function s(e,t,n){return be(t)?Ce.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?Ce.grep(e,function(e){return e===t!==n}):"string"!=typeof t?Ce.grep(e,function(e){return fe.call(t,e)>-1!==n}):Ce.filter(t,e,n)}function l(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function u(e){var t={};return Ce.each(e.match(He)||[],function(e,n){t[n]=!0}),t}function c(e){return e}function d(e){throw e}function f(e,t,n,r){var i;try{e&&be(i=e.promise)?i.call(e).done(t).fail(n):e&&be(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}function p(){se.removeEventListener("DOMContentLoaded",p),e.removeEventListener("load",p),Ce.ready()}function h(e,t){return t.toUpperCase()}function g(e){return e.replace(je,"ms-").replace(Ue,h)}function v(){this.expando=Ce.expando+v.uid++}function m(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Ge.test(e)?JSON.parse(e):e)}function y(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Fe,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=m(n)}catch(e){}Oe.set(e,t,n)}else n=void 0;return n}function b(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return Ce.css(e,t,"")},l=s(),u=n&&n[3]||(Ce.cssNumber[t]?"":"px"),c=(Ce.cssNumber[t]||"px"!==u&&+l)&&Ve.exec(Ce.css(e,t));if(c&&c[3]!==u){for(l/=2,u=u||c[3],c=+l||1;a--;)Ce.style(e,t,c+u),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),c/=o;c*=2,Ce.style(e,t,c+u),n=n||[]}return n&&(c=+c||+l||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=c,r.end=i)),i}function x(e){var t,n=e.ownerDocument,r=e.nodeName,i=Xe[r];return i||(t=n.body.appendChild(n.createElement(r)),i=Ce.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),Xe[r]=i,i)}function w(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)r=e[o],r.style&&(n=r.style.display,t?("none"===n&&(i[o]=Ne.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&We(r)&&(i[o]=x(r))):"none"!==n&&(i[o]="none",Ne.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}function C(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&a(e,t)?Ce.merge([e],n):n}function S(e,t){for(var n=0,r=e.length;n<r;n++)Ne.set(e[n],"globalEval",!t||Ne.get(t[n],"globalEval"))}function E(e,t,n,r,o){for(var a,s,l,u,c,d,f=t.createDocumentFragment(),p=[],h=0,g=e.length;h<g;h++)if((a=e[h])||0===a)if("object"===i(a))Ce.merge(p,a.nodeType?[a]:a);else if(et.test(a)){for(s=s||f.appendChild(t.createElement("div")),l=(Qe.exec(a)||["",""])[1].toLowerCase(),u=Je[l]||Je._default,s.innerHTML=u[1]+Ce.htmlPrefilter(a)+u[2],d=u[0];d--;)s=s.lastChild;Ce.merge(p,s.childNodes),s=f.firstChild,s.textContent=""}else p.push(t.createTextNode(a));for(f.textContent="",h=0;a=p[h++];)if(r&&Ce.inArray(a,r)>-1)o&&o.push(a);else if(c=Ce.contains(a.ownerDocument,a),s=C(f.appendChild(a),"script"),c&&S(s),n)for(d=0;a=s[d++];)Ze.test(a.type||"")&&n.push(a);return f}function L(){return!0}function _(){return!1}function I(){try{return se.activeElement}catch(e){}}function k(e,t,n,r,i,o){var a,s;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=void 0);for(s in t)k(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=_;else if(!i)return e;return 1===o&&(a=i,i=function(e){return Ce().off(e),a.apply(this,arguments)},i.guid=a.guid||(a.guid=Ce.guid++)),e.each(function(){Ce.event.add(this,t,i,r,n)})}function T(e,t){return a(e,"table")&&a(11!==t.nodeType?t:t.firstChild,"tr")?Ce(e).children("tbody")[0]||e:e}function M(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function A(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function D(e,t){var n,r,i,o,a,s,l,u;if(1===t.nodeType){if(Ne.hasData(e)&&(o=Ne.access(e),a=Ne.set(t,o),u=o.events)){delete a.handle,a.events={};for(i in u)for(n=0,r=u[i].length;n<r;n++)Ce.event.add(t,i,u[i][n])}Oe.hasData(e)&&(s=Oe.access(e),l=Ce.extend({},s),Oe.set(t,l))}}function H(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ye.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function z(e,t,n,i){t=ce.apply([],t);var o,a,s,l,u,c,d=0,f=e.length,p=f-1,h=t[0],g=be(h);if(g||f>1&&"string"==typeof h&&!ye.checkClone&&st.test(h))return e.each(function(r){var o=e.eq(r);g&&(t[0]=h.call(this,r,o.html())),z(o,t,n,i)});if(f&&(o=E(t,e[0].ownerDocument,!1,e,i),a=o.firstChild,1===o.childNodes.length&&(o=a),a||i)){for(s=Ce.map(C(o,"script"),M),l=s.length;d<f;d++)u=o,d!==p&&(u=Ce.clone(u,!0,!0),l&&Ce.merge(s,C(u,"script"))),n.call(e[d],u,d);if(l)for(c=s[s.length-1].ownerDocument,Ce.map(s,A),d=0;d<l;d++)u=s[d],Ze.test(u.type||"")&&!Ne.access(u,"globalEval")&&Ce.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?Ce._evalUrl&&Ce._evalUrl(u.src):r(u.textContent.replace(lt,""),c,u))}return e}function P(e,t,n){for(var r,i=t?Ce.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||Ce.cleanData(C(r)),r.parentNode&&(n&&Ce.contains(r.ownerDocument,r)&&S(C(r,"script")),r.parentNode.removeChild(r));return e}function R(e,t,n){var r,i,o,a,s=e.style;return n=n||ct(e),n&&(a=n.getPropertyValue(t)||n[t],""!==a||Ce.contains(e.ownerDocument,e)||(a=Ce.style(e,t)),!ye.pixelBoxStyles()&&ut.test(a)&&dt.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function j(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function U(e){if(e in mt)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=vt.length;n--;)if((e=vt[n]+t)in mt)return e}function B(e){var t=Ce.cssProps[e];return t||(t=Ce.cssProps[e]=U(e)||e),t}function N(e,t,n){var r=Ve.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function O(e,t,n,r,i,o){var a="width"===t?1:0,s=0,l=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=Ce.css(e,n+qe[a],!0,i)),r?("content"===n&&(l-=Ce.css(e,"padding"+qe[a],!0,i)),"margin"!==n&&(l-=Ce.css(e,"border"+qe[a]+"Width",!0,i))):(l+=Ce.css(e,"padding"+qe[a],!0,i),"padding"!==n?l+=Ce.css(e,"border"+qe[a]+"Width",!0,i):s+=Ce.css(e,"border"+qe[a]+"Width",!0,i));return!r&&o>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-s-.5))),l}function G(e,t,n){var r=ct(e),i=R(e,t,r),o="border-box"===Ce.css(e,"boxSizing",!1,r),a=o;if(ut.test(i)){if(!n)return i;i="auto"}return a=a&&(ye.boxSizingReliable()||i===e.style[t]),("auto"===i||!parseFloat(i)&&"inline"===Ce.css(e,"display",!1,r))&&(i=e["offset"+t[0].toUpperCase()+t.slice(1)],a=!0),(i=parseFloat(i)||0)+O(e,t,n||(o?"border":"content"),a,r,i)+"px"}function F(e,t,n,r,i){return new F.prototype.init(e,t,n,r,i)}function $(){bt&&(!1===se.hidden&&e.requestAnimationFrame?e.requestAnimationFrame($):e.setTimeout($,Ce.fx.interval),Ce.fx.tick())}function V(){return e.setTimeout(function(){yt=void 0}),yt=Date.now()}function q(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)n=qe[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function W(e,t,n){for(var r,i=(Y.tweeners[t]||[]).concat(Y.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function K(e,t,n){var r,i,o,a,s,l,u,c,d="width"in t||"height"in t,f=this,p={},h=e.style,g=e.nodeType&&We(e),v=Ne.get(e,"fxshow");n.queue||(a=Ce._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,f.always(function(){f.always(function(){a.unqueued--,Ce.queue(e,"fx").length||a.empty.fire()})}));for(r in t)if(i=t[r],xt.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}p[r]=v&&v[r]||Ce.style(e,r)}if((l=!Ce.isEmptyObject(t))||!Ce.isEmptyObject(p)){d&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],u=v&&v.display,null==u&&(u=Ne.get(e,"display")),c=Ce.css(e,"display"),"none"===c&&(u?c=u:(w([e],!0),u=e.style.display||u,c=Ce.css(e,"display"),w([e]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===Ce.css(e,"float")&&(l||(f.done(function(){h.display=u}),null==u&&(c=h.display,u="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",f.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),l=!1;for(r in p)l||(v?"hidden"in v&&(g=v.hidden):v=Ne.access(e,"fxshow",{display:u}),o&&(v.hidden=!g),g&&w([e],!0),f.done(function(){g||w([e]),Ne.remove(e,"fxshow");for(r in p)Ce.style(e,r,p[r])})),l=W(g?v[r]:0,r,f),r in v||(v[r]=l.start,g&&(l.end=l.start,l.start=0))}}function X(e,t){var n,r,i,o,a;for(n in e)if(r=g(n),i=t[r],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=Ce.cssHooks[r])&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function Y(e,t,n){var r,i,o=0,a=Y.prefilters.length,s=Ce.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var t=yt||V(),n=Math.max(0,u.startTime+u.duration-t),r=n/u.duration||0,o=1-r,a=0,l=u.tweens.length;a<l;a++)u.tweens[a].run(o);return s.notifyWith(e,[u,o,n]),o<1&&l?n:(l||s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:Ce.extend({},t),opts:Ce.extend(!0,{specialEasing:{},easing:Ce.easing._default},n),originalProperties:t,originalOptions:n,startTime:yt||V(),duration:n.duration,tweens:[],createTween:function(t,n){var r=Ce.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)u.tweens[n].run(1);return t?(s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u,t])):s.rejectWith(e,[u,t]),this}}),c=u.props;for(X(c,u.opts.specialEasing);o<a;o++)if(r=Y.prefilters[o].call(u,e,c,u.opts))return be(r.stop)&&(Ce._queueHooks(u.elem,u.opts.queue).stop=r.stop.bind(r)),r;return Ce.map(c,W,u),be(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),Ce.fx.timer(Ce.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u}function Q(e){return(e.match(He)||[]).join(" ")}function Z(e){return e.getAttribute&&e.getAttribute("class")||""}function J(e){return Array.isArray(e)?e:"string"==typeof e?e.match(He)||[]:[]}function ee(e,t,n,r){var o;if(Array.isArray(t))Ce.each(t,function(t,i){n||Dt.test(e)?r(e,i):ee(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==i(t))r(e,t);else for(o in t)ee(e+"["+o+"]",t[o],n,r)}function te(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(He)||[];if(be(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function ne(e,t,n,r){function i(s){var l;return o[s]=!0,Ce.each(e[s]||[],function(e,s){var u=s(t,n,r);return"string"!=typeof u||a||o[u]?a?!(l=u):void 0:(t.dataTypes.unshift(u),i(u),!1)}),l}var o={},a=e===$t;return i(t.dataTypes[0])||!o["*"]&&i("*")}function re(e,t){var n,r,i=Ce.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&Ce.extend(!0,e,r),e}function ie(e,t,n){for(var r,i,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||e.converters[i+" "+l[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}function oe(e,t,n,r){var i,o,a,s,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=u[l+" "+o]||u["* "+o]))for(i in u)if(s=i.split(" "),s[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[i]:!0!==u[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}var ae=[],se=e.document,le=Object.getPrototypeOf,ue=ae.slice,ce=ae.concat,de=ae.push,fe=ae.indexOf,pe={},he=pe.toString,ge=pe.hasOwnProperty,ve=ge.toString,me=ve.call(Object),ye={},be=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},xe=function(e){return null!=e&&e===e.window},we={type:!0,src:!0,noModule:!0},Ce=function(e,t){return new Ce.fn.init(e,t)},Se=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;Ce.fn=Ce.prototype={jquery:"3.3.1",constructor:Ce,length:0,toArray:function(){return ue.call(this)},get:function(e){return null==e?ue.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=Ce.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return Ce.each(this,e)},map:function(e){return this.pushStack(Ce.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(ue.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:de,sort:ae.sort,splice:ae.splice},Ce.extend=Ce.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||be(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],r=e[t],a!==r&&(u&&r&&(Ce.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,o=n&&Array.isArray(n)?n:[]):o=n&&Ce.isPlainObject(n)?n:{},a[t]=Ce.extend(u,o,r)):void 0!==r&&(a[t]=r));return a},Ce.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==he.call(e))&&(!(t=le(e))||"function"==typeof(n=ge.call(t,"constructor")&&t.constructor)&&ve.call(n)===me)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){r(e)},each:function(e,t){var n,r=0;if(o(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(Se,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(o(Object(e))?Ce.merge(n,"string"==typeof e?[e]:e):de.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:fe.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,a=0,s=[];if(o(e))for(r=e.length;a<r;a++)null!=(i=t(e[a],a,n))&&s.push(i);else for(a in e)null!=(i=t(e[a],a,n))&&s.push(i);return ce.apply([],s)},guid:1,support:ye}),"function"==typeof Symbol&&(Ce.fn[Symbol.iterator]=ae[Symbol.iterator]),Ce.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){pe["[object "+t+"]"]=t.toLowerCase()});var Ee=function(e){function t(e,t,n,r){var i,o,a,s,l,c,f,p=t&&t.ownerDocument,h=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==h&&9!==h&&11!==h)return n;if(!r&&((t?t.ownerDocument||t:B)!==A&&M(t),t=t||A,H)){if(11!==h&&(l=ge.exec(e)))if(i=l[1]){if(9===h){if(!(a=t.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(p&&(a=p.getElementById(i))&&j(t,a)&&a.id===i)return n.push(a),n}else{if(l[2])return Y.apply(n,t.getElementsByTagName(e)),n;if((i=l[3])&&x.getElementsByClassName&&t.getElementsByClassName)return Y.apply(n,t.getElementsByClassName(i)),n}if(x.qsa&&!$[e+" "]&&(!z||!z.test(e))){if(1!==h)p=t,f=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(be,xe):t.setAttribute("id",s=U),c=E(e),o=c.length;o--;)c[o]="#"+s+" "+d(c[o]);f=c.join(","),p=ve.test(e)&&u(t.parentNode)||t}if(f)try{return Y.apply(n,p.querySelectorAll(f)),n}catch(e){}finally{s===U&&t.removeAttribute("id")}}}return _(e.replace(oe,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>w.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[U]=!0,e}function i(e){var t=A.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=n.length;r--;)w.attrHandle[n[r]]=t}function a(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Ce(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function l(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function u(e){return e&&void 0!==e.getElementsByTagName&&e}function c(){}function d(e){
for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function f(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=O++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,l){var u,c,d,f=[N,s];if(l){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,l))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(d=t[U]||(t[U]={}),c=d[t.uniqueID]||(d[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((u=c[o])&&u[0]===N&&u[1]===s)return f[2]=u[2];if(c[o]=f,f[2]=e(t,n,l))return!0}return!1}}function p(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function h(e,n,r){for(var i=0,o=n.length;i<o;i++)t(e,n[i],r);return r}function g(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,u=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),u&&t.push(s)));return a}function v(e,t,n,i,o,a){return i&&!i[U]&&(i=v(i)),o&&!o[U]&&(o=v(o,a)),r(function(r,a,s,l){var u,c,d,f=[],p=[],v=a.length,m=r||h(t||"*",s.nodeType?[s]:s,[]),y=!e||!r&&t?m:g(m,f,e,s,l),b=n?o||(r?e:v||i)?[]:a:y;if(n&&n(y,b,s,l),i)for(u=g(b,p),i(u,[],s,l),c=u.length;c--;)(d=u[c])&&(b[p[c]]=!(y[p[c]]=d));if(r){if(o||e){if(o){for(u=[],c=b.length;c--;)(d=b[c])&&u.push(y[c]=d);o(null,b=[],u,l)}for(c=b.length;c--;)(d=b[c])&&(u=o?Z(r,d):f[c])>-1&&(r[u]=!(a[u]=d))}}else b=g(b===a?b.splice(v,b.length):b),o?o(null,a,b,l):Y.apply(a,b)})}function m(e){for(var t,n,r,i=e.length,o=w.relative[e[0].type],a=o||w.relative[" "],s=o?1:0,l=f(function(e){return e===t},a,!0),u=f(function(e){return Z(t,e)>-1},a,!0),c=[function(e,n,r){var i=!o&&(r||n!==I)||((t=n).nodeType?l(e,n,r):u(e,n,r));return t=null,i}];s<i;s++)if(n=w.relative[e[s].type])c=[f(p(c),n)];else{if(n=w.filter[e[s].type].apply(null,e[s].matches),n[U]){for(r=++s;r<i&&!w.relative[e[r].type];r++);return v(s>1&&p(c),s>1&&d(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(oe,"$1"),n,s<r&&m(e.slice(s,r)),r<i&&m(e=e.slice(r)),r<i&&d(e))}c.push(n)}return p(c)}function y(e,n){var i=n.length>0,o=e.length>0,a=function(r,a,s,l,u){var c,d,f,p=0,h="0",v=r&&[],m=[],y=I,b=r||o&&w.find.TAG("*",u),x=N+=null==y?1:Math.random()||.1,C=b.length;for(u&&(I=a===A||a||u);h!==C&&null!=(c=b[h]);h++){if(o&&c){for(d=0,a||c.ownerDocument===A||(M(c),s=!H);f=e[d++];)if(f(c,a||A,s)){l.push(c);break}u&&(N=x)}i&&((c=!f&&c)&&p--,r&&v.push(c))}if(p+=h,i&&h!==p){for(d=0;f=n[d++];)f(v,m,a,s);if(r){if(p>0)for(;h--;)v[h]||m[h]||(m[h]=K.call(l));m=g(m)}Y.apply(l,m),u&&!r&&m.length>0&&p+n.length>1&&t.uniqueSort(l)}return u&&(N=x,I=y),v};return i?r(a):a}var b,x,w,C,S,E,L,_,I,k,T,M,A,D,H,z,P,R,j,U="sizzle"+1*new Date,B=e.document,N=0,O=0,G=n(),F=n(),$=n(),V=function(e,t){return e===t&&(T=!0),0},q={}.hasOwnProperty,W=[],K=W.pop,X=W.push,Y=W.push,Q=W.slice,Z=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ee="[\\x20\\t\\r\\n\\f]",te="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ne="\\["+ee+"*("+te+")(?:"+ee+"*([*^$|!~]?=)"+ee+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+te+"))|)"+ee+"*\\]",re=":("+te+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ne+")*)|.*)\\)|)",ie=new RegExp(ee+"+","g"),oe=new RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),ae=new RegExp("^"+ee+"*,"+ee+"*"),se=new RegExp("^"+ee+"*([>+~]|"+ee+")"+ee+"*"),le=new RegExp("="+ee+"*([^\\]'\"]*?)"+ee+"*\\]","g"),ue=new RegExp(re),ce=new RegExp("^"+te+"$"),de={ID:new RegExp("^#("+te+")"),CLASS:new RegExp("^\\.("+te+")"),TAG:new RegExp("^("+te+"|[*])"),ATTR:new RegExp("^"+ne),PSEUDO:new RegExp("^"+re),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},fe=/^(?:input|select|textarea|button)$/i,pe=/^h\d$/i,he=/^[^{]+\{\s*\[native \w/,ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ve=/[+~]/,me=new RegExp("\\\\([\\da-f]{1,6}"+ee+"?|("+ee+")|.)","ig"),ye=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},be=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,xe=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},we=function(){M()},Ce=f(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{Y.apply(W=Q.call(B.childNodes),B.childNodes),W[B.childNodes.length].nodeType}catch(e){Y={apply:W.length?function(e,t){X.apply(e,Q.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}x=t.support={},S=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},M=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:B;return r!==A&&9===r.nodeType&&r.documentElement?(A=r,D=A.documentElement,H=!S(A),B!==A&&(n=A.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",we,!1):n.attachEvent&&n.attachEvent("onunload",we)),x.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),x.getElementsByTagName=i(function(e){return e.appendChild(A.createComment("")),!e.getElementsByTagName("*").length}),x.getElementsByClassName=he.test(A.getElementsByClassName),x.getById=i(function(e){return D.appendChild(e).id=U,!A.getElementsByName||!A.getElementsByName(U).length}),x.getById?(w.filter.ID=function(e){var t=e.replace(me,ye);return function(e){return e.getAttribute("id")===t}},w.find.ID=function(e,t){if(void 0!==t.getElementById&&H){var n=t.getElementById(e);return n?[n]:[]}}):(w.filter.ID=function(e){var t=e.replace(me,ye);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},w.find.ID=function(e,t){if(void 0!==t.getElementById&&H){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),w.find.TAG=x.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):x.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},w.find.CLASS=x.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&H)return t.getElementsByClassName(e)},P=[],z=[],(x.qsa=he.test(A.querySelectorAll))&&(i(function(e){D.appendChild(e).innerHTML="<a id='"+U+"'></a><select id='"+U+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&z.push("[*^$]="+ee+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||z.push("\\["+ee+"*(?:value|"+J+")"),e.querySelectorAll("[id~="+U+"-]").length||z.push("~="),e.querySelectorAll(":checked").length||z.push(":checked"),e.querySelectorAll("a#"+U+"+*").length||z.push(".#.+[+~]")}),i(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=A.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&z.push("name"+ee+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&z.push(":enabled",":disabled"),D.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&z.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),z.push(",.*:")})),(x.matchesSelector=he.test(R=D.matches||D.webkitMatchesSelector||D.mozMatchesSelector||D.oMatchesSelector||D.msMatchesSelector))&&i(function(e){x.disconnectedMatch=R.call(e,"*"),R.call(e,"[s!='']:x"),P.push("!=",re)}),z=z.length&&new RegExp(z.join("|")),P=P.length&&new RegExp(P.join("|")),t=he.test(D.compareDocumentPosition),j=t||he.test(D.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},V=t?function(e,t){if(e===t)return T=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!x.sortDetached&&t.compareDocumentPosition(e)===n?e===A||e.ownerDocument===B&&j(B,e)?-1:t===A||t.ownerDocument===B&&j(B,t)?1:k?Z(k,e)-Z(k,t):0:4&n?-1:1)}:function(e,t){if(e===t)return T=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,s=[e],l=[t];if(!i||!o)return e===A?-1:t===A?1:i?-1:o?1:k?Z(k,e)-Z(k,t):0;if(i===o)return a(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;s[r]===l[r];)r++;return r?a(s[r],l[r]):s[r]===B?-1:l[r]===B?1:0},A):A},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==A&&M(e),n=n.replace(le,"='$1']"),x.matchesSelector&&H&&!$[n+" "]&&(!P||!P.test(n))&&(!z||!z.test(n)))try{var r=R.call(e,n);if(r||x.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return t(n,A,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==A&&M(e),j(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==A&&M(e);var n=w.attrHandle[t.toLowerCase()],r=n&&q.call(w.attrHandle,t.toLowerCase())?n(e,t,!H):void 0;return void 0!==r?r:x.attributes||!H?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.escape=function(e){return(e+"").replace(be,xe)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(T=!x.detectDuplicates,k=!x.sortStable&&e.slice(0),e.sort(V),T){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return k=null,e},C=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=C(t);return n},w=t.selectors={cacheLength:50,createPseudo:r,match:de,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(me,ye),e[3]=(e[3]||e[4]||e[5]||"").replace(me,ye),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return de.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ue.test(n)&&(t=E(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(me,ye).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=G[e+" "];return t||(t=new RegExp("(^|"+ee+")"+e+"("+ee+"|$)"))&&G(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:!n||(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(ie," ")+" ").indexOf(r)>-1:"|="===n&&(o===r||o.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,c,d,f,p,h,g=o!==a?"nextSibling":"previousSibling",v=t.parentNode,m=s&&t.nodeName.toLowerCase(),y=!l&&!s,b=!1;if(v){if(o){for(;g;){for(f=t;f=f[g];)if(s?f.nodeName.toLowerCase()===m:1===f.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?v.firstChild:v.lastChild],a&&y){for(f=v,d=f[U]||(f[U]={}),c=d[f.uniqueID]||(d[f.uniqueID]={}),u=c[e]||[],p=u[0]===N&&u[1],b=p&&u[2],f=p&&v.childNodes[p];f=++p&&f&&f[g]||(b=p=0)||h.pop();)if(1===f.nodeType&&++b&&f===t){c[e]=[N,p,b];break}}else if(y&&(f=t,d=f[U]||(f[U]={}),c=d[f.uniqueID]||(d[f.uniqueID]={}),u=c[e]||[],p=u[0]===N&&u[1],b=p),!1===b)for(;(f=++p&&f&&f[g]||(b=p=0)||h.pop())&&((s?f.nodeName.toLowerCase()!==m:1!==f.nodeType)||!++b||(y&&(d=f[U]||(f[U]={}),c=d[f.uniqueID]||(d[f.uniqueID]={}),c[e]=[N,b]),f!==t)););return(b-=i)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,n){var i,o=w.pseudos[e]||w.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[U]?o(n):o.length>1?(i=[e,e,"",n],w.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),a=i.length;a--;)r=Z(e,i[a]),e[r]=!(t[r]=i[a])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=L(e.replace(oe,"$1"));return i[U]?r(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(me,ye),function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:r(function(e){return ce.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(me,ye).toLowerCase(),function(t){var n;do{if(n=H?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===D},focus:function(e){return e===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:s(!1),disabled:s(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!w.pseudos.empty(e)},header:function(e){return pe.test(e.nodeName)},input:function(e){return fe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[n<0?n+t:n]}),even:l(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:l(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},w.pseudos.nth=w.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[b]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(b);for(b in{submit:!0,reset:!0})w.pseudos[b]=function(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}(b);return c.prototype=w.filters=w.pseudos,w.setFilters=new c,E=t.tokenize=function(e,n){var r,i,o,a,s,l,u,c=F[e+" "];if(c)return n?0:c.slice(0);for(s=e,l=[],u=w.preFilter;s;){r&&!(i=ae.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),r=!1,(i=se.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(oe," ")}),s=s.slice(r.length));for(a in w.filter)!(i=de[a].exec(s))||u[a]&&!(i=u[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):F(e,l).slice(0)},L=t.compile=function(e,t){var n,r=[],i=[],o=$[e+" "];if(!o){for(t||(t=E(e)),n=t.length;n--;)o=m(t[n]),o[U]?r.push(o):i.push(o);o=$(e,y(i,r)),o.selector=e}return o},_=t.select=function(e,t,n,r){var i,o,a,s,l,c="function"==typeof e&&e,f=!r&&E(e=c.selector||e);if(n=n||[],1===f.length){if(o=f[0]=f[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&9===t.nodeType&&H&&w.relative[o[1].type]){if(!(t=(w.find.ID(a.matches[0].replace(me,ye),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=de.needsContext.test(e)?0:o.length;i--&&(a=o[i],!w.relative[s=a.type]);)if((l=w.find[s])&&(r=l(a.matches[0].replace(me,ye),ve.test(o[0].type)&&u(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&d(o)))return Y.apply(n,r),n;break}}return(c||L(e,f))(r,t,!H,n,!t||ve.test(e)&&u(t.parentNode)||t),n},x.sortStable=U.split("").sort(V).join("")===U,x.detectDuplicates=!!T,M(),x.sortDetached=i(function(e){return 1&e.compareDocumentPosition(A.createElement("fieldset"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),x.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(J,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);Ce.find=Ee,Ce.expr=Ee.selectors,Ce.expr[":"]=Ce.expr.pseudos,Ce.uniqueSort=Ce.unique=Ee.uniqueSort,Ce.text=Ee.getText,Ce.isXMLDoc=Ee.isXML,Ce.contains=Ee.contains,Ce.escapeSelector=Ee.escape;var Le=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&Ce(e).is(n))break;r.push(e)}return r},_e=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},Ie=Ce.expr.match.needsContext,ke=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;Ce.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?Ce.find.matchesSelector(r,e)?[r]:[]:Ce.find.matches(e,Ce.grep(t,function(e){return 1===e.nodeType}))},Ce.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(Ce(e).filter(function(){for(t=0;t<r;t++)if(Ce.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)Ce.find(e,i[t],n);return r>1?Ce.uniqueSort(n):n},filter:function(e){return this.pushStack(s(this,e||[],!1))},not:function(e){return this.pushStack(s(this,e||[],!0))},is:function(e){return!!s(this,"string"==typeof e&&Ie.test(e)?Ce(e):e||[],!1).length}});var Te,Me=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(Ce.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||Te,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:Me.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof Ce?t[0]:t,Ce.merge(this,Ce.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:se,!0)),ke.test(r[1])&&Ce.isPlainObject(t))for(r in t)be(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=se.getElementById(r[2]),i&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):be(e)?void 0!==n.ready?n.ready(e):e(Ce):Ce.makeArray(e,this)}).prototype=Ce.fn,Te=Ce(se);var Ae=/^(?:parents|prev(?:Until|All))/,De={children:!0,contents:!0,next:!0,prev:!0};Ce.fn.extend({has:function(e){var t=Ce(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(Ce.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&Ce(e);if(!Ie.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&Ce.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?Ce.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?fe.call(Ce(e),this[0]):fe.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Ce.uniqueSort(Ce.merge(this.get(),Ce(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Ce.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Le(e,"parentNode")},parentsUntil:function(e,t,n){return Le(e,"parentNode",n)},next:function(e){return l(e,"nextSibling")},prev:function(e){return l(e,"previousSibling")},nextAll:function(e){return Le(e,"nextSibling")},prevAll:function(e){return Le(e,"previousSibling")},nextUntil:function(e,t,n){return Le(e,"nextSibling",n)},prevUntil:function(e,t,n){return Le(e,"previousSibling",n)},siblings:function(e){return _e((e.parentNode||{}).firstChild,e)},children:function(e){return _e(e.firstChild)},contents:function(e){return a(e,"iframe")?e.contentDocument:(a(e,"template")&&(e=e.content||e),Ce.merge([],e.childNodes))}},function(e,t){Ce.fn[e]=function(n,r){var i=Ce.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=Ce.filter(r,i)),this.length>1&&(De[e]||Ce.uniqueSort(i),Ae.test(e)&&i.reverse()),this.pushStack(i)}});var He=/[^\x20\t\r\n\f]+/g;Ce.Callbacks=function(e){e="string"==typeof e?u(e):Ce.extend({},e);var t,n,r,o,a=[],s=[],l=-1,c=function(){for(o=o||e.once,r=t=!0;s.length;l=-1)for(n=s.shift();++l<a.length;)!1===a[l].apply(n[0],n[1])&&e.stopOnFalse&&(l=a.length,n=!1);e.memory||(n=!1),t=!1,o&&(a=n?[]:"")},d={add:function(){return a&&(n&&!t&&(l=a.length-1,s.push(n)),function t(n){Ce.each(n,function(n,r){be(r)?e.unique&&d.has(r)||a.push(r):r&&r.length&&"string"!==i(r)&&t(r)})}(arguments),n&&!t&&c()),this},remove:function(){return Ce.each(arguments,function(e,t){for(var n;(n=Ce.inArray(t,a,n))>-1;)a.splice(n,1),n<=l&&l--}),this},has:function(e){return e?Ce.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return o=s=[],a=n="",this},disabled:function(){return!a},lock:function(){return o=s=[],n||t||(a=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=n||[],n=[e,n.slice?n.slice():n],s.push(n),t||c()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!r}};return d},Ce.extend({Deferred:function(t){var n=[["notify","progress",Ce.Callbacks("memory"),Ce.Callbacks("memory"),2],["resolve","done",Ce.Callbacks("once memory"),Ce.Callbacks("once memory"),0,"resolved"],["reject","fail",Ce.Callbacks("once memory"),Ce.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return Ce.Deferred(function(t){Ce.each(n,function(n,r){var i=be(e[r[4]])&&e[r[4]];o[r[1]](function(){var e=i&&i.apply(this,arguments);e&&be(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(t,r,i){function o(t,n,r,i){return function(){var s=this,l=arguments,u=function(){var e,u;if(!(t<a)){if((e=r.apply(s,l))===n.promise())throw new TypeError("Thenable self-resolution");u=e&&("object"==typeof e||"function"==typeof e)&&e.then,be(u)?i?u.call(e,o(a,n,c,i),o(a,n,d,i)):(a++,u.call(e,o(a,n,c,i),o(a,n,d,i),o(a,n,c,n.notifyWith))):(r!==c&&(s=void 0,l=[e]),(i||n.resolveWith)(s,l))}},f=i?u:function(){try{u()}catch(e){Ce.Deferred.exceptionHook&&Ce.Deferred.exceptionHook(e,f.stackTrace),t+1>=a&&(r!==d&&(s=void 0,l=[e]),n.rejectWith(s,l))}};t?f():(Ce.Deferred.getStackHook&&(f.stackTrace=Ce.Deferred.getStackHook()),e.setTimeout(f))}}var a=0;return Ce.Deferred(function(e){n[0][3].add(o(0,e,be(i)?i:c,e.notifyWith)),n[1][3].add(o(0,e,be(t)?t:c)),n[2][3].add(o(0,e,be(r)?r:d))}).promise()},promise:function(e){return null!=e?Ce.extend(e,i):i}},o={};return Ce.each(n,function(e,t){var a=t[2],s=t[5];i[t[1]]=a.add,s&&a.add(function(){r=s},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),a.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=a.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=ue.call(arguments),o=Ce.Deferred(),a=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?ue.call(arguments):n,--t||o.resolveWith(r,i)}};if(t<=1&&(f(e,o.done(a(n)).resolve,o.reject,!t),"pending"===o.state()||be(i[n]&&i[n].then)))return o.then();for(;n--;)f(i[n],a(n),o.reject);return o.promise()}});var ze=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;Ce.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&ze.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},Ce.readyException=function(t){e.setTimeout(function(){throw t})};var Pe=Ce.Deferred();Ce.fn.ready=function(e){return Pe.then(e).catch(function(e){Ce.readyException(e)}),this},Ce.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--Ce.readyWait:Ce.isReady)||(Ce.isReady=!0,!0!==e&&--Ce.readyWait>0||Pe.resolveWith(se,[Ce]))}}),Ce.ready.then=Pe.then,"complete"===se.readyState||"loading"!==se.readyState&&!se.documentElement.doScroll?e.setTimeout(Ce.ready):(se.addEventListener("DOMContentLoaded",p),e.addEventListener("load",p));var Re=function(e,t,n,r,o,a,s){var l=0,u=e.length,c=null==n;if("object"===i(n)){o=!0;for(l in n)Re(e,t,l,n[l],!0,a,s)}else if(void 0!==r&&(o=!0,be(r)||(s=!0),c&&(s?(t.call(e,r),t=null):(c=t,t=function(e,t,n){return c.call(Ce(e),n)})),t))for(;l<u;l++)t(e[l],n,s?r:r.call(e[l],l,t(e[l],n)));return o?e:c?t.call(e):u?t(e[0],n):a},je=/^-ms-/,Ue=/-([a-z])/g,Be=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};v.uid=1,v.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Be(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[g(t)]=n;else for(r in t)i[g(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][g(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){Array.isArray(t)?t=t.map(g):(t=g(t),t=t in r?[t]:t.match(He)||[]),n=t.length;for(;n--;)delete r[t[n]]}(void 0===t||Ce.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!Ce.isEmptyObject(t)}};var Ne=new v,Oe=new v,Ge=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Fe=/[A-Z]/g;Ce.extend({hasData:function(e){return Oe.hasData(e)||Ne.hasData(e)},data:function(e,t,n){return Oe.access(e,t,n)},removeData:function(e,t){Oe.remove(e,t)},_data:function(e,t,n){return Ne.access(e,t,n)},_removeData:function(e,t){Ne.remove(e,t)}}),Ce.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=Oe.get(o),1===o.nodeType&&!Ne.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=g(r.slice(5)),y(o,r,i[r])));Ne.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){Oe.set(this,e)}):Re(this,function(t){var n;if(o&&void 0===t){if(void 0!==(n=Oe.get(o,e)))return n;if(void 0!==(n=y(o,e)))return n}else this.each(function(){Oe.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Oe.remove(this,e)})}}),Ce.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Ne.get(e,t),n&&(!r||Array.isArray(n)?r=Ne.access(e,t,Ce.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=Ce.queue(e,t),r=n.length,i=n.shift(),o=Ce._queueHooks(e,t),a=function(){Ce.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Ne.get(e,n)||Ne.access(e,n,{empty:Ce.Callbacks("once memory").add(function(){Ne.remove(e,[t+"queue",n])})})}}),Ce.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?Ce.queue(this[0],e):void 0===t?this:this.each(function(){var n=Ce.queue(this,e,t);Ce._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&Ce.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Ce.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=Ce.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=Ne.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var $e=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ve=new RegExp("^(?:([+-])=|)("+$e+")([a-z%]*)$","i"),qe=["Top","Right","Bottom","Left"],We=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&Ce.contains(e.ownerDocument,e)&&"none"===Ce.css(e,"display")},Ke=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i},Xe={};Ce.fn.extend({show:function(){return w(this,!0)},hide:function(){return w(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){We(this)?Ce(this).show():Ce(this).hide()})}});var Ye=/^(?:checkbox|radio)$/i,Qe=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Ze=/^$|^module$|\/(?:java|ecma)script/i,Je={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Je.optgroup=Je.option,Je.tbody=Je.tfoot=Je.colgroup=Je.caption=Je.thead,Je.th=Je.td;var et=/<|&#?\w+;/;!function(){var e=se.createDocumentFragment(),t=e.appendChild(se.createElement("div")),n=se.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),ye.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",ye.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var tt=se.documentElement,nt=/^key/,rt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,it=/^([^.]*)(?:\.(.+)|)/;Ce.event={global:{},add:function(e,t,n,r,i){var o,a,s,l,u,c,d,f,p,h,g,v=Ne.get(e);if(v)for(n.handler&&(o=n,n=o.handler,i=o.selector),i&&Ce.find.matchesSelector(tt,i),n.guid||(n.guid=Ce.guid++),(l=v.events)||(l=v.events={}),(a=v.handle)||(a=v.handle=function(t){return void 0!==Ce&&Ce.event.triggered!==t.type?Ce.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(He)||[""],u=t.length;u--;)s=it.exec(t[u])||[],p=g=s[1],h=(s[2]||"").split(".").sort(),p&&(d=Ce.event.special[p]||{},p=(i?d.delegateType:d.bindType)||p,d=Ce.event.special[p]||{},c=Ce.extend({type:p,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&Ce.expr.match.needsContext.test(i),namespace:h.join(".")},o),(f=l[p])||(f=l[p]=[],f.delegateCount=0,d.setup&&!1!==d.setup.call(e,r,h,a)||e.addEventListener&&e.addEventListener(p,a)),d.add&&(d.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,c):f.push(c),Ce.event.global[p]=!0)},remove:function(e,t,n,r,i){var o,a,s,l,u,c,d,f,p,h,g,v=Ne.hasData(e)&&Ne.get(e);if(v&&(l=v.events)){for(t=(t||"").match(He)||[""],u=t.length;u--;)if(s=it.exec(t[u])||[],p=g=s[1],h=(s[2]||"").split(".").sort(),p){for(d=Ce.event.special[p]||{},p=(r?d.delegateType:d.bindType)||p,f=l[p]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)c=f[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(f.splice(o,1),c.selector&&f.delegateCount--,d.remove&&d.remove.call(e,c));a&&!f.length&&(d.teardown&&!1!==d.teardown.call(e,h,v.handle)||Ce.removeEvent(e,p,v.handle),delete l[p])}else for(p in l)Ce.event.remove(e,p+t[u],n,r,!0)
;Ce.isEmptyObject(l)&&Ne.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=Ce.event.fix(e),l=new Array(arguments.length),u=(Ne.get(this,"events")||{})[s.type]||[],c=Ce.event.special[s.type]||{};for(l[0]=s,t=1;t<arguments.length;t++)l[t]=arguments[t];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){for(a=Ce.event.handlers.call(this,s,u),t=0;(i=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(r=((Ce.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,l))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,o,a,s=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(o=[],a={},n=0;n<l;n++)r=t[n],i=r.selector+" ",void 0===a[i]&&(a[i]=r.needsContext?Ce(i,this).index(u)>-1:Ce.find(i,this,null,[u]).length),a[i]&&o.push(r);o.length&&s.push({elem:u,handlers:o})}return u=this,l<t.length&&s.push({elem:u,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(Ce.Event.prototype,e,{enumerable:!0,configurable:!0,get:be(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[Ce.expando]?e:new Ce.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==I()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===I()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&a(this,"input"))return this.click(),!1},_default:function(e){return a(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},Ce.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},Ce.Event=function(e,t){if(!(this instanceof Ce.Event))return new Ce.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?L:_,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&Ce.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[Ce.expando]=!0},Ce.Event.prototype={constructor:Ce.Event,isDefaultPrevented:_,isPropagationStopped:_,isImmediatePropagationStopped:_,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=L,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=L,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=L,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},Ce.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&nt.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&rt.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},Ce.event.addProp),Ce.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){Ce.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||Ce.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),Ce.fn.extend({on:function(e,t,n,r){return k(this,e,t,n,r)},one:function(e,t,n,r){return k(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,Ce(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=_),this.each(function(){Ce.event.remove(this,e,n,t)})}});var ot=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,at=/<script|<style|<link/i,st=/checked\s*(?:[^=]|=\s*.checked.)/i,lt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;Ce.extend({htmlPrefilter:function(e){return e.replace(ot,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),l=Ce.contains(e.ownerDocument,e);if(!(ye.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Ce.isXMLDoc(e)))for(a=C(s),o=C(e),r=0,i=o.length;r<i;r++)H(o[r],a[r]);if(t)if(n)for(o=o||C(e),a=a||C(s),r=0,i=o.length;r<i;r++)D(o[r],a[r]);else D(e,s);return a=C(s,"script"),a.length>0&&S(a,!l&&C(e,"script")),s},cleanData:function(e){for(var t,n,r,i=Ce.event.special,o=0;void 0!==(n=e[o]);o++)if(Be(n)){if(t=n[Ne.expando]){if(t.events)for(r in t.events)i[r]?Ce.event.remove(n,r):Ce.removeEvent(n,r,t.handle);n[Ne.expando]=void 0}n[Oe.expando]&&(n[Oe.expando]=void 0)}}}),Ce.fn.extend({detach:function(e){return P(this,e,!0)},remove:function(e){return P(this,e)},text:function(e){return Re(this,function(e){return void 0===e?Ce.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return z(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){T(this,e).appendChild(e)}})},prepend:function(){return z(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=T(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return z(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return z(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Ce.cleanData(C(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return Ce.clone(this,e,t)})},html:function(e){return Re(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!at.test(e)&&!Je[(Qe.exec(e)||["",""])[1].toLowerCase()]){e=Ce.htmlPrefilter(e);try{for(;n<r;n++)t=this[n]||{},1===t.nodeType&&(Ce.cleanData(C(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return z(this,arguments,function(t){var n=this.parentNode;Ce.inArray(this,e)<0&&(Ce.cleanData(C(this)),n&&n.replaceChild(t,this))},e)}}),Ce.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Ce.fn[e]=function(e){for(var n,r=[],i=Ce(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),Ce(i[a])[t](n),de.apply(r,n.get());return this.pushStack(r)}});var ut=new RegExp("^("+$e+")(?!px)[a-z%]+$","i"),ct=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},dt=new RegExp(qe.join("|"),"i");!function(){function t(){if(u){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",tt.appendChild(l).appendChild(u);var t=e.getComputedStyle(u);r="1%"!==t.top,s=12===n(t.marginLeft),u.style.right="60%",a=36===n(t.right),i=36===n(t.width),u.style.position="absolute",o=36===u.offsetWidth||"absolute",tt.removeChild(l),u=null}}function n(e){return Math.round(parseFloat(e))}var r,i,o,a,s,l=se.createElement("div"),u=se.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",ye.clearCloneStyle="content-box"===u.style.backgroundClip,Ce.extend(ye,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),a},pixelPosition:function(){return t(),r},reliableMarginLeft:function(){return t(),s},scrollboxSize:function(){return t(),o}}))}();var ft=/^(none|table(?!-c[ea]).+)/,pt=/^--/,ht={position:"absolute",visibility:"hidden",display:"block"},gt={letterSpacing:"0",fontWeight:"400"},vt=["Webkit","Moz","ms"],mt=se.createElement("div").style;Ce.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=R(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=g(t),l=pt.test(t),u=e.style;if(l||(t=B(s)),a=Ce.cssHooks[t]||Ce.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:u[t];o=typeof n,"string"===o&&(i=Ve.exec(n))&&i[1]&&(n=b(e,t,i),o="number"),null!=n&&n===n&&("number"===o&&(n+=i&&i[3]||(Ce.cssNumber[s]?"":"px")),ye.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(l?u.setProperty(t,n):u[t]=n))}},css:function(e,t,n,r){var i,o,a,s=g(t);return pt.test(t)||(t=B(s)),a=Ce.cssHooks[t]||Ce.cssHooks[s],a&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=R(e,t,r)),"normal"===i&&t in gt&&(i=gt[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),Ce.each(["height","width"],function(e,t){Ce.cssHooks[t]={get:function(e,n,r){if(n)return!ft.test(Ce.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?G(e,t,r):Ke(e,ht,function(){return G(e,t,r)})},set:function(e,n,r){var i,o=ct(e),a="border-box"===Ce.css(e,"boxSizing",!1,o),s=r&&O(e,t,r,a,o);return a&&ye.scrollboxSize()===o.position&&(s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-O(e,t,"border",!1,o)-.5)),s&&(i=Ve.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=Ce.css(e,t)),N(e,n,s)}}}),Ce.cssHooks.marginLeft=j(ye.reliableMarginLeft,function(e,t){if(t)return(parseFloat(R(e,"marginLeft"))||e.getBoundingClientRect().left-Ke(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),Ce.each({margin:"",padding:"",border:"Width"},function(e,t){Ce.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+qe[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(Ce.cssHooks[e+t].set=N)}),Ce.fn.extend({css:function(e,t){return Re(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=ct(e),i=t.length;a<i;a++)o[t[a]]=Ce.css(e,t[a],!1,r);return o}return void 0!==n?Ce.style(e,t,n):Ce.css(e,t)},e,t,arguments.length>1)}}),Ce.Tween=F,F.prototype={constructor:F,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||Ce.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(Ce.cssNumber[n]?"":"px")},cur:function(){var e=F.propHooks[this.prop];return e&&e.get?e.get(this):F.propHooks._default.get(this)},run:function(e){var t,n=F.propHooks[this.prop];return this.options.duration?this.pos=t=Ce.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):F.propHooks._default.set(this),this}},F.prototype.init.prototype=F.prototype,F.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=Ce.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){Ce.fx.step[e.prop]?Ce.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[Ce.cssProps[e.prop]]&&!Ce.cssHooks[e.prop]?e.elem[e.prop]=e.now:Ce.style(e.elem,e.prop,e.now+e.unit)}}},F.propHooks.scrollTop=F.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Ce.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},Ce.fx=F.prototype.init,Ce.fx.step={};var yt,bt,xt=/^(?:toggle|show|hide)$/,wt=/queueHooks$/;Ce.Animation=Ce.extend(Y,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return b(n.elem,e,Ve.exec(t),n),n}]},tweener:function(e,t){be(e)?(t=e,e=["*"]):e=e.match(He);for(var n,r=0,i=e.length;r<i;r++)n=e[r],Y.tweeners[n]=Y.tweeners[n]||[],Y.tweeners[n].unshift(t)},prefilters:[K],prefilter:function(e,t){t?Y.prefilters.unshift(e):Y.prefilters.push(e)}}),Ce.speed=function(e,t,n){var r=e&&"object"==typeof e?Ce.extend({},e):{complete:n||!n&&t||be(e)&&e,duration:e,easing:n&&t||t&&!be(t)&&t};return Ce.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in Ce.fx.speeds?r.duration=Ce.fx.speeds[r.duration]:r.duration=Ce.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){be(r.old)&&r.old.call(this),r.queue&&Ce.dequeue(this,r.queue)},r},Ce.fn.extend({fadeTo:function(e,t,n,r){return this.filter(We).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=Ce.isEmptyObject(e),o=Ce.speed(t,n,r),a=function(){var t=Y(this,Ce.extend({},e),o);(i||Ne.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=Ce.timers,a=Ne.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&wt.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||Ce.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=Ne.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=Ce.timers,a=r?r.length:0;for(n.finish=!0,Ce.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),Ce.each(["toggle","show","hide"],function(e,t){var n=Ce.fn[t];Ce.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(q(t,!0),e,r,i)}}),Ce.each({slideDown:q("show"),slideUp:q("hide"),slideToggle:q("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Ce.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),Ce.timers=[],Ce.fx.tick=function(){var e,t=0,n=Ce.timers;for(yt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||Ce.fx.stop(),yt=void 0},Ce.fx.timer=function(e){Ce.timers.push(e),Ce.fx.start()},Ce.fx.interval=13,Ce.fx.start=function(){bt||(bt=!0,$())},Ce.fx.stop=function(){bt=null},Ce.fx.speeds={slow:600,fast:200,_default:400},Ce.fn.delay=function(t,n){return t=Ce.fx?Ce.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},function(){var e=se.createElement("input"),t=se.createElement("select"),n=t.appendChild(se.createElement("option"));e.type="checkbox",ye.checkOn=""!==e.value,ye.optSelected=n.selected,e=se.createElement("input"),e.value="t",e.type="radio",ye.radioValue="t"===e.value}();var Ct,St=Ce.expr.attrHandle;Ce.fn.extend({attr:function(e,t){return Re(this,Ce.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Ce.removeAttr(this,e)})}}),Ce.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?Ce.prop(e,t,n):(1===o&&Ce.isXMLDoc(e)||(i=Ce.attrHooks[t.toLowerCase()]||(Ce.expr.match.bool.test(t)?Ct:void 0)),void 0!==n?null===n?void Ce.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=Ce.find.attr(e,t),null==r?void 0:r))},attrHooks:{type:{set:function(e,t){if(!ye.radioValue&&"radio"===t&&a(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(He);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),Ct={set:function(e,t,n){return!1===t?Ce.removeAttr(e,n):e.setAttribute(n,n),n}},Ce.each(Ce.expr.match.bool.source.match(/\w+/g),function(e,t){var n=St[t]||Ce.find.attr;St[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=St[a],St[a]=i,i=null!=n(e,t,r)?a:null,St[a]=o),i}});var Et=/^(?:input|select|textarea|button)$/i,Lt=/^(?:a|area)$/i;Ce.fn.extend({prop:function(e,t){return Re(this,Ce.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[Ce.propFix[e]||e]})}}),Ce.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&Ce.isXMLDoc(e)||(t=Ce.propFix[t]||t,i=Ce.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=Ce.find.attr(e,"tabindex");return t?parseInt(t,10):Et.test(e.nodeName)||Lt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ye.optSelected||(Ce.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),Ce.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Ce.propFix[this.toLowerCase()]=this}),Ce.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,l=0;if(be(e))return this.each(function(t){Ce(this).addClass(e.call(this,t,Z(this)))});if(t=J(e),t.length)for(;n=this[l++];)if(i=Z(n),r=1===n.nodeType&&" "+Q(i)+" "){for(a=0;o=t[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");s=Q(r),i!==s&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,l=0;if(be(e))return this.each(function(t){Ce(this).removeClass(e.call(this,t,Z(this)))});if(!arguments.length)return this.attr("class","");if(t=J(e),t.length)for(;n=this[l++];)if(i=Z(n),r=1===n.nodeType&&" "+Q(i)+" "){for(a=0;o=t[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");s=Q(r),i!==s&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):be(e)?this.each(function(n){Ce(this).toggleClass(e.call(this,n,Z(this),t),t)}):this.each(function(){var t,i,o,a;if(r)for(i=0,o=Ce(this),a=J(e);t=a[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||(t=Z(this),t&&Ne.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Ne.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+Q(Z(n))+" ").indexOf(t)>-1)return!0;return!1}});var _t=/\r/g;Ce.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=be(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,Ce(this).val()):e,null==i?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=Ce.map(i,function(e){return null==e?"":e+""})),(t=Ce.valHooks[this.type]||Ce.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return(t=Ce.valHooks[i.type]||Ce.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(_t,""):null==n?"":n)}}}),Ce.extend({valHooks:{option:{get:function(e){var t=Ce.find.attr(e,"value");return null!=t?t:Q(Ce.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,s="select-one"===e.type,l=s?null:[],u=s?o+1:i.length;for(r=o<0?u:s?o:0;r<u;r++)if(n=i[r],(n.selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!a(n.parentNode,"optgroup"))){if(t=Ce(n).val(),s)return t;l.push(t)}return l},set:function(e,t){for(var n,r,i=e.options,o=Ce.makeArray(t),a=i.length;a--;)r=i[a],(r.selected=Ce.inArray(Ce.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),Ce.each(["radio","checkbox"],function(){Ce.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=Ce.inArray(Ce(e).val(),t)>-1}},ye.checkOn||(Ce.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),ye.focusin="onfocusin"in e;var It=/^(?:focusinfocus|focusoutblur)$/,kt=function(e){e.stopPropagation()};Ce.extend(Ce.event,{trigger:function(t,n,r,i){var o,a,s,l,u,c,d,f,p=[r||se],h=ge.call(t,"type")?t.type:t,g=ge.call(t,"namespace")?t.namespace.split("."):[];if(a=f=s=r=r||se,3!==r.nodeType&&8!==r.nodeType&&!It.test(h+Ce.event.triggered)&&(h.indexOf(".")>-1&&(g=h.split("."),h=g.shift(),g.sort()),u=h.indexOf(":")<0&&"on"+h,t=t[Ce.expando]?t:new Ce.Event(h,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=g.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:Ce.makeArray(n,[t]),d=Ce.event.special[h]||{},i||!d.trigger||!1!==d.trigger.apply(r,n))){if(!i&&!d.noBubble&&!xe(r)){for(l=d.delegateType||h,It.test(l+h)||(a=a.parentNode);a;a=a.parentNode)p.push(a),s=a;s===(r.ownerDocument||se)&&p.push(s.defaultView||s.parentWindow||e)}for(o=0;(a=p[o++])&&!t.isPropagationStopped();)f=a,t.type=o>1?l:d.bindType||h,c=(Ne.get(a,"events")||{})[t.type]&&Ne.get(a,"handle"),c&&c.apply(a,n),(c=u&&a[u])&&c.apply&&Be(a)&&(t.result=c.apply(a,n),!1===t.result&&t.preventDefault());return t.type=h,i||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(p.pop(),n)||!Be(r)||u&&be(r[h])&&!xe(r)&&(s=r[u],s&&(r[u]=null),Ce.event.triggered=h,t.isPropagationStopped()&&f.addEventListener(h,kt),r[h](),t.isPropagationStopped()&&f.removeEventListener(h,kt),Ce.event.triggered=void 0,s&&(r[u]=s)),t.result}},simulate:function(e,t,n){var r=Ce.extend(new Ce.Event,n,{type:e,isSimulated:!0});Ce.event.trigger(r,null,t)}}),Ce.fn.extend({trigger:function(e,t){return this.each(function(){Ce.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return Ce.event.trigger(e,t,n,!0)}}),ye.focusin||Ce.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){Ce.event.simulate(t,e.target,Ce.event.fix(e))};Ce.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=Ne.access(r,t);i||r.addEventListener(e,n,!0),Ne.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=Ne.access(r,t)-1;i?Ne.access(r,t,i):(r.removeEventListener(e,n,!0),Ne.remove(r,t))}}});var Tt=e.location,Mt=Date.now(),At=/\?/;Ce.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||Ce.error("Invalid XML: "+t),n};var Dt=/\[\]$/,Ht=/\r?\n/g,zt=/^(?:submit|button|image|reset|file)$/i,Pt=/^(?:input|select|textarea|keygen)/i;Ce.param=function(e,t){var n,r=[],i=function(e,t){var n=be(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!Ce.isPlainObject(e))Ce.each(e,function(){i(this.name,this.value)});else for(n in e)ee(n,e[n],t,i);return r.join("&")},Ce.fn.extend({serialize:function(){return Ce.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Ce.prop(this,"elements");return e?Ce.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Ce(this).is(":disabled")&&Pt.test(this.nodeName)&&!zt.test(e)&&(this.checked||!Ye.test(e))}).map(function(e,t){var n=Ce(this).val();return null==n?null:Array.isArray(n)?Ce.map(n,function(e){return{name:t.name,value:e.replace(Ht,"\r\n")}}):{name:t.name,value:n.replace(Ht,"\r\n")}}).get()}});var Rt=/%20/g,jt=/#.*$/,Ut=/([?&])_=[^&]*/,Bt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Nt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ot=/^(?:GET|HEAD)$/,Gt=/^\/\//,Ft={},$t={},Vt="*/".concat("*"),qt=se.createElement("a");qt.href=Tt.href,Ce.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Tt.href,type:"GET",isLocal:Nt.test(Tt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Vt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":Ce.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?re(re(e,Ce.ajaxSettings),t):re(Ce.ajaxSettings,e)},ajaxPrefilter:te(Ft),ajaxTransport:te($t),ajax:function(t,n){function r(t,n,r,s){var u,f,p,x,w,C=n;c||(c=!0,l&&e.clearTimeout(l),i=void 0,a=s||"",S.readyState=t>0?4:0,u=t>=200&&t<300||304===t,r&&(x=ie(h,S,r)),x=oe(h,x,S,u),u?(h.ifModified&&(w=S.getResponseHeader("Last-Modified"),w&&(Ce.lastModified[o]=w),(w=S.getResponseHeader("etag"))&&(Ce.etag[o]=w)),204===t||"HEAD"===h.type?C="nocontent":304===t?C="notmodified":(C=x.state,f=x.data,p=x.error,u=!p)):(p=C,!t&&C||(C="error",t<0&&(t=0))),S.status=t,S.statusText=(n||C)+"",u?m.resolveWith(g,[f,C,S]):m.rejectWith(g,[S,C,p]),S.statusCode(b),b=void 0,d&&v.trigger(u?"ajaxSuccess":"ajaxError",[S,h,u?f:p]),y.fireWith(g,[S,C]),d&&(v.trigger("ajaxComplete",[S,h]),--Ce.active||Ce.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var i,o,a,s,l,u,c,d,f,p,h=Ce.ajaxSetup({},n),g=h.context||h,v=h.context&&(g.nodeType||g.jquery)?Ce(g):Ce.event,m=Ce.Deferred(),y=Ce.Callbacks("once memory"),b=h.statusCode||{},x={},w={},C="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s)for(s={};t=Bt.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,x[e]=t),this},overrideMimeType:function(e){return null==c&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)S.always(e[S.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||C;return i&&i.abort(t),r(0,t),this}};if(m.promise(S),h.url=((t||h.url||Tt.href)+"").replace(Gt,Tt.protocol+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(He)||[""],null==h.crossDomain){u=se.createElement("a");try{u.href=h.url,u.href=u.href,h.crossDomain=qt.protocol+"//"+qt.host!=u.protocol+"//"+u.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=Ce.param(h.data,h.traditional)),ne(Ft,h,n,S),c)return S;d=Ce.event&&h.global,d&&0==Ce.active++&&Ce.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Ot.test(h.type),o=h.url.replace(jt,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(Rt,"+")):(p=h.url.slice(o.length),h.data&&(h.processData||"string"==typeof h.data)&&(o+=(At.test(o)?"&":"?")+h.data,delete h.data),!1===h.cache&&(o=o.replace(Ut,"$1"),p=(At.test(o)?"&":"?")+"_="+Mt+++p),h.url=o+p),h.ifModified&&(Ce.lastModified[o]&&S.setRequestHeader("If-Modified-Since",Ce.lastModified[o]),Ce.etag[o]&&S.setRequestHeader("If-None-Match",Ce.etag[o])),(h.data&&h.hasContent&&!1!==h.contentType||n.contentType)&&S.setRequestHeader("Content-Type",h.contentType),S.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Vt+"; q=0.01":""):h.accepts["*"]);for(f in h.headers)S.setRequestHeader(f,h.headers[f]);if(h.beforeSend&&(!1===h.beforeSend.call(g,S,h)||c))return S.abort();if(C="abort",y.add(h.complete),S.done(h.success),S.fail(h.error),i=ne($t,h,n,S)){if(S.readyState=1,d&&v.trigger("ajaxSend",[S,h]),c)return S;h.async&&h.timeout>0&&(l=e.setTimeout(function(){S.abort("timeout")},h.timeout));try{c=!1,i.send(x,r)}catch(e){if(c)throw e;r(-1,e)}}else r(-1,"No Transport");return S},getJSON:function(e,t,n){return Ce.get(e,t,n,"json")},getScript:function(e,t){return Ce.get(e,void 0,t,"script")}}),Ce.each(["get","post"],function(e,t){Ce[t]=function(e,n,r,i){return be(n)&&(i=i||r,r=n,n=void 0),Ce.ajax(Ce.extend({url:e,type:t,dataType:i,data:n,success:r},Ce.isPlainObject(e)&&e))}}),Ce._evalUrl=function(e){return Ce.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},Ce.fn.extend({wrapAll:function(e){var t;return this[0]&&(be(e)&&(e=e.call(this[0])),t=Ce(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return be(e)?this.each(function(t){Ce(this).wrapInner(e.call(this,t))}):this.each(function(){var t=Ce(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=be(e);return this.each(function(n){Ce(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){Ce(this).replaceWith(this.childNodes)}),this}}),Ce.expr.pseudos.hidden=function(e){return!Ce.expr.pseudos.visible(e)},Ce.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},Ce.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Wt={0:200,1223:204},Kt=Ce.ajaxSettings.xhr();ye.cors=!!Kt&&"withCredentials"in Kt,ye.ajax=Kt=!!Kt,Ce.ajaxTransport(function(t){var n,r;if(ye.cors||Kt&&!t.crossDomain)return{send:function(i,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(a in i)s.setRequestHeader(a,i[a]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Wt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),Ce.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),Ce.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return Ce.globalEval(e),e}}}),Ce.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),Ce.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=Ce("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),se.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Xt=[],Yt=/(=)\?(?=&|$)|\?\?/;Ce.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Xt.pop()||Ce.expando+"_"+Mt++;return this[e]=!0,e}}),Ce.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,a,s=!1!==t.jsonp&&(Yt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Yt.test(t.data)&&"data")
;if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=be(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Yt,"$1"+i):!1!==t.jsonp&&(t.url+=(At.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||Ce.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},r.always(function(){void 0===o?Ce(e).removeProp(i):e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Xt.push(i)),a&&be(o)&&o(a[0]),a=o=void 0}),"script"}),ye.createHTMLDocument=function(){var e=se.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),Ce.parseHTML=function(e,t,n){if("string"!=typeof e)return[];"boolean"==typeof t&&(n=t,t=!1);var r,i,o;return t||(ye.createHTMLDocument?(t=se.implementation.createHTMLDocument(""),r=t.createElement("base"),r.href=se.location.href,t.head.appendChild(r)):t=se),i=ke.exec(e),o=!n&&[],i?[t.createElement(i[1])]:(i=E([e],t,o),o&&o.length&&Ce(o).remove(),Ce.merge([],i.childNodes))},Ce.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=Q(e.slice(s)),e=e.slice(0,s)),be(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&Ce.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?Ce("<div>").append(Ce.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},Ce.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Ce.fn[t]=function(e){return this.on(t,e)}}),Ce.expr.pseudos.animated=function(e){return Ce.grep(Ce.timers,function(t){return e===t.elem}).length},Ce.offset={setOffset:function(e,t,n){var r,i,o,a,s,l,u,c=Ce.css(e,"position"),d=Ce(e),f={};"static"===c&&(e.style.position="relative"),s=d.offset(),o=Ce.css(e,"top"),l=Ce.css(e,"left"),u=("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1,u?(r=d.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),be(t)&&(t=t.call(e,n,Ce.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):d.css(f)}},Ce.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){Ce.offset.setOffset(this,e,t)});var t,n,r=this[0];if(r)return r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===Ce.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===Ce.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&(i=Ce(e).offset(),i.top+=Ce.css(e,"borderTopWidth",!0),i.left+=Ce.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-Ce.css(r,"marginTop",!0),left:t.left-i.left-Ce.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===Ce.css(e,"position");)e=e.offsetParent;return e||tt})}}),Ce.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;Ce.fn[e]=function(r){return Re(this,function(e,r,i){var o;if(xe(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i},e,r,arguments.length)}}),Ce.each(["top","left"],function(e,t){Ce.cssHooks[t]=j(ye.pixelPosition,function(e,n){if(n)return n=R(e,t),ut.test(n)?Ce(e).position()[t]+"px":n})}),Ce.each({Height:"height",Width:"width"},function(e,t){Ce.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){Ce.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return Re(this,function(t,n,i){var o;return xe(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?Ce.css(t,n,s):Ce.style(t,n,i,s)},t,a?i:void 0,a)}})}),Ce.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){Ce.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),Ce.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),Ce.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),Ce.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),be(e))return r=ue.call(arguments,2),i=function(){return e.apply(t||this,r.concat(ue.call(arguments)))},i.guid=e.guid=e.guid||Ce.guid++,i},Ce.holdReady=function(e){e?Ce.readyWait++:Ce.ready(!0)},Ce.isArray=Array.isArray,Ce.parseJSON=JSON.parse,Ce.nodeName=a,Ce.isFunction=be,Ce.isWindow=xe,Ce.camelCase=g,Ce.type=i,Ce.now=Date.now,Ce.isNumeric=function(e){var t=Ce.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},t=function(){return Ce}();var Qt=e.jQuery,Zt=e.$;return Ce.noConflict=function(t){return e.$===Ce&&(e.$=Zt),t&&e.jQuery===Ce&&(e.jQuery=Qt),Ce},n||(e.jQuery=e.$=Ce),Ce}),n=function(e){function t(e,t){var n=t||ServerSide.Lib.Utils.SsgSerialiser.deserialise("handbackurl"),r="";if(null!==n&&0!==e.HandbackWhiteList.length)for(var i=0;i<e.HandbackWhiteList.length;i++)if(n===e.HandbackWhiteList[i]){r=n;break}return""===r?e.Url:r}return function(e,n){function r(e){if(e){for(var t=e.toString().split("&"),n=0;n<t.length;++n){var r=t[n].split("=");2==r.length&&o.addParameter(r[0],r[1])}l=!0}}function i(){l||r(ServerSide.Lib.Utils.SsgSerialiser.deserialise("passthrough"))}var o=this,a=t(e,n),s={},l=!1,u="post"===e.Method?new ServerSide.Lib.Utils.POSTRedirect(a):new ServerSide.Lib.Utils.GETRedirect(a);ServerSide.Lib.Utils.Log("Handback url: "+a),this.getHandbackData=function(){return i(),s},this.addParameter=function(e,t){s[e]=t,u.addValue(e,t)},this.doHandback=function(){i(),u.submit()},function(e){for(var t in e)o.addParameter(t,e[t])}(arguments[2])}}(),r=function(e){function t(){return"string"==typeof ServerSide.Lib.Utils.SsgSerialiser.deserialise("handover_key")}function n(){return ServerSide.Lib.Utils.SsgSerialiser.contains("CardImageId")&&"string"==typeof ServerSide.Lib.Utils.SsgSerialiser.deserialise("CardImageId")}function r(){window.location.replace("#"),"function"==typeof window.history.replaceState&&history.replaceState({},"",window.location.href.slice(0,-1))}return{getHandoverKey:function(){return t()?ServerSide.Lib.Utils.SsgSerialiser.deserialise("handover_key"):null},getClientId:function(){return n()?ServerSide.Lib.Utils.SsgSerialiser.deserialise("CardImageId"):null},getOrientation:function(e){var t=e||{Type:"h",ShowButton:!1,isVertical:!1,isProxyVertical:!1},n=ServerSide.Lib.Utils.SsgSerialiser.deserialise("Orientation"),r=ServerSide.Lib.Utils.SsgSerialiser.deserialise("isVertical"),i=ServerSide.Lib.Utils.SsgSerialiser.deserialise("isProxyVertical"),o=ServerSide.Lib.Utils.SsgSerialiser.deserialise("ShowButton"),a=ServerSide.Lib.Utils.SsgSerialiser.deserialise("proxy_handover_key");return n?t.Type="v"===n.toLowerCase()||"vertical"===n.toLowerCase()?"v":"h":r&&(t.Type="true"===r.toLowerCase()?"v":"h"),a&&(t.ProxyHandoverKey=a,_usingOrientationQS=!0),o&&(t.ShowButton=null!==t.ProxyHandoverKey&&"true"===o.toLowerCase(),t.isVertical="v"===t.Type.toLowerCase(),t.isProxyVertical=i||"h"===t.Type.toLowerCase()),t},getFacebookToken:function(){var e=window.location.hash;if(-1!==e.indexOf("access_token"))try{var t=e.split("&")[0].split("=")[1],n={token:t,id:"me"};return ServerSide.Lib.Utils.SsgSerialiser.serialise("fbData",n),r(),n}catch(e){}}}}(),function(e,t){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?t(exports):o=function(e){return"function"==typeof t?t(e):t}({})}(0,function(e){function t(e){return"function"==typeof e}function n(e){return g(e)?"array":typeof e}function r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(e,t){return null!=e&&"object"==typeof e&&t in e}function o(e,t){return v.call(e,t)}function a(e){return!o(m,e)}function s(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return y[e]})}function l(t,n){function i(e){if("string"==typeof e&&(e=e.split(x,2)),!g(e)||2!==e.length)throw new Error("Invalid tags: "+e);o=new RegExp(r(e[0])+"\\s*"),s=new RegExp("\\s*"+r(e[1])),l=new RegExp("\\s*"+r("}"+e[1]))}if(!t)return[];var o,s,l,f=[],p=[],h=[],v=!1,m=!1;i(n||e.tags);for(var y,E,L,_,I,k,T=new d(t);!T.eos();){if(y=T.pos,L=T.scanUntil(o))for(var M=0,A=L.length;M<A;++M)_=L.charAt(M),a(_)?h.push(p.length):m=!0,p.push(["text",_,y,y+1]),y+=1,"\n"===_&&function(){if(v&&!m)for(;h.length;)delete p[h.pop()];else h=[];v=!1,m=!1}();if(!T.scan(o))break;if(v=!0,E=T.scan(S)||"name",T.scan(b),"="===E?(L=T.scanUntil(w),T.scan(w),T.scanUntil(s)):"{"===E?(L=T.scanUntil(l),T.scan(C),T.scanUntil(s),E="&"):L=T.scanUntil(s),!T.scan(s))throw new Error("Unclosed tag at "+T.pos);if(I=[E,L,y,T.pos],p.push(I),"#"===E||"^"===E)f.push(I);else if("/"===E){if(!(k=f.pop()))throw new Error('Unopened section "'+L+'" at '+y);if(k[1]!==L)throw new Error('Unclosed section "'+k[1]+'" at '+y)}else"name"===E||"{"===E||"&"===E?m=!0:"="===E&&i(L)}if(k=f.pop())throw new Error('Unclosed section "'+k[1]+'" at '+T.pos);return c(u(p))}function u(e){for(var t,n,r=[],i=0,o=e.length;i<o;++i)(t=e[i])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(r.push(t),n=t));return r}function c(e){for(var t,n,r=[],i=r,o=[],a=0,s=e.length;a<s;++a)switch(t=e[a],t[0]){case"#":case"^":i.push(t),o.push(t),i=t[4]=[];break;case"/":n=o.pop(),n[5]=t[2],i=o.length>0?o[o.length-1][4]:r;break;default:i.push(t)}return r}function d(e){this.string=e,this.tail=e,this.pos=0}function f(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function p(){this.cache={}}var h=Object.prototype.toString,g=Array.isArray||function(e){return"[object Array]"===h.call(e)},v=RegExp.prototype.test,m=/\S/,y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},b=/\s*/,x=/\s+/,w=/\s*=/,C=/\s*\}/,S=/#|\^|\/|>|\{|&|=|!/;d.prototype.eos=function(){return""===this.tail},d.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},d.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},f.prototype.push=function(e){return new f(e,this)},f.prototype.lookup=function(e){var n,r=this.cache;if(r.hasOwnProperty(e))n=r[e];else{for(var o,a,s=this,l=!1;s;){if(e.indexOf(".")>0)for(n=s.view,o=e.split("."),a=0;null!=n&&a<o.length;)a===o.length-1&&(l=i(n,o[a])),n=n[o[a++]];else n=s.view[e],l=i(s.view,e);if(l)break;s=s.parent}r[e]=n}return t(n)&&(n=n.call(this.view)),n},p.prototype.clearCache=function(){this.cache={}},p.prototype.parse=function(t,n){var r=this.cache,i=r[t];return null==i&&(i=r[t+":"+(n||e.tags).join(":")]=l(t,n)),i},p.prototype.render=function(e,t,n){var r=this.parse(e),i=t instanceof f?t:new f(t);return this.renderTokens(r,i,n,e)},p.prototype.renderTokens=function(e,t,n,r){for(var i,o,a,s="",l=0,u=e.length;l<u;++l)a=void 0,i=e[l],o=i[0],"#"===o?a=this.renderSection(i,t,n,r):"^"===o?a=this.renderInverted(i,t,n,r):">"===o?a=this.renderPartial(i,t,n,r):"&"===o?a=this.unescapedValue(i,t):"name"===o?a=this.escapedValue(i,t):"text"===o&&(a=this.rawValue(i)),void 0!==a&&(s+=a);return s},p.prototype.renderSection=function(e,n,r,i){function o(e){return a.render(e,n,r)}var a=this,s="",l=n.lookup(e[1]);if(l){if(g(l))for(var u=0,c=l.length;u<c;++u)s+=this.renderTokens(e[4],n.push(l[u]),r,i);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)s+=this.renderTokens(e[4],n.push(l),r,i);else if(t(l)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");l=l.call(n.view,i.slice(e[3],e[5]),o),null!=l&&(s+=l)}else s+=this.renderTokens(e[4],n,r,i);return s}},p.prototype.renderInverted=function(e,t,n,r){var i=t.lookup(e[1]);if(!i||g(i)&&0===i.length)return this.renderTokens(e[4],t,n,r)},p.prototype.renderPartial=function(e,n,r){if(r){var i=t(r)?r(e[1]):r[e[1]];return null!=i?this.renderTokens(this.parse(i),n,r,i):void 0}},p.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},p.prototype.escapedValue=function(t,n){var r=n.lookup(t[1]);if(null!=r)return e.escape(r)},p.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.3.0",e.tags=["{{","}}"];var E=new p;return e.clearCache=function(){return E.clearCache()},e.parse=function(e,t){return E.parse(e,t)},e.render=function(e,t,r){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+n(e)+'" was given as the first argument for mustache#render(template, view, partials)');return E.render(e,t,r)},e.to_html=function(n,r,i,o){var a=e.render(n,r,i);if(!t(o))return a;o(a)},e.escape=s,e.Scanner=d,e.Context=f,e.Writer=p,e}),a='<div class="main-container" id="main-container">\r\n\r\n</div>',l='<div class="toolbar">\r\n\r\n    <button id="btn-back" class="toolbar__button-back control user-selection" aria-label="" title="" data-ref="back">\r\n        <svg id="desktop-back" class="secondary-color" x="0px" y="0px" \t viewBox="0 0 23 23" enable-background="new 0 0 23 23" xml:space="preserve">\r\n            <g transform="translate(-14213.007 -2840.451)">\r\n                <path id="back-icon-circle" d="M14224.5,2863.5c-6.3,0-11.5-5.2-11.5-11.5c0-6.3,5.2-11.5,11.5-11.5\r\n                    c6.3,0,11.5,5.2,11.5,11.5C14236,2858.3,14230.8,2863.4,14224.5,2863.5z M14224.5,2842.4c-5.2,0-9.5,4.3-9.5,9.5\r\n                    c0,5.2,4.3,9.5,9.5,9.5c5.2,0,9.5-4.3,9.5-9.5C14234,2846.7,14229.8,2842.5,14224.5,2842.4z"/>\r\n                <path d="M14223.5,2856.8c-0.3,0-0.5-0.1-0.7-0.3l-4.6-4.6l4.5-4.6c0.4-0.4,1-0.4,1.4,0c0,0,0,0,0,0\r\n                    c0.4,0.4,0.4,1,0,1.4c0,0,0,0,0,0l-3.1,3.2l3.2,3.2c0.4,0.4,0.4,1,0,1.4c0,0,0,0,0,0C14224.1,2856.7,14223.8,2856.8,14223.5,2856.8\r\n                    z"/>\r\n                <path d="M14229.8,2852.9h-9.5c-0.6,0-1-0.4-1-1s0.4-1,1-1h9.4c0.6,0,1,0.4,1,1l0,0\r\n                    C14230.8,2852.5,14230.4,2852.9,14229.8,2852.9C14229.9,2852.9,14229.8,2852.9,14229.8,2852.9z"/>\r\n            </g>\r\n        </svg>\r\n\r\n    </button>\r\n    <h2 id="title" class="toolbar__title text-color"></h2>\r\n    <button id="btn-close" class="toolbar__button-close control user-selection" aria-label="" title="" data-ref="close">\r\n        <svg class="main-color" x="0px" y="0px"viewBox="0 0 25 25" enable-background="new 0 0 25 25" xml:space="preserve">\r\n            <path d="M13.6,12.5L24.8,1.3c0.3-0.3,0.3-0.8,0-1.1c-0.3-0.3-0.8-0.3-1.1,0L12.5,11.4L1.3,0.2\r\n            \tC1-0.1,0.5-0.1,0.2,0.2c-0.3,0.3-0.3,0.8,0,1.1l11.2,11.2L0.2,23.7c-0.3,0.3-0.3,0.8,0,1.1C0.4,24.9,0.6,25,0.8,25\r\n\t            c0.2,0,0.4-0.1,0.6-0.2l11.2-11.2l11.2,11.2c0.1,0.2,0.3,0.2,0.6,0.2c0.2,0,0.4-0.1,0.6-0.2c0.3-0.3,0.3-0.8,0-1.1L13.6,12.5z"/>\r\n        </svg>\r\n    </button>\r\n</div>',u='<div id="kbc" class="logo">\r\n\t<svg x="0px" y="0px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve" >\r\n\t<g>\r\n\t\t<g class="main-color">\r\n\t\t\t<ellipse  cx="258.8" cy="151.7" rx="82.9" ry="82.9"/>\r\n\t\t\t<path d="M320,218.7c-15.8,17.1-43.6,34.2-79.4,34.2c-27.7,0-51.6-10.8-66.8-22.7c-90.5,9.5-157.8,23-157.8,23v36.6\r\n\t\t\t\tl480-0.1v-75.5C496,214.2,413.8,213.7,320,218.7z"/>\r\n\t\t</g>\r\n\t\t<g class="tertiary-color">\r\n\t\t\t<path d="M73.1,396.9v44.6h-57V322.8h57v53.4h0.3l33.6-53.4h68.4l-50.1,61.4l47.2,57.4h-65.2L73.5,397L73.1,396.9\r\n\t\t\t\tL73.1,396.9z"/>\r\n\t\t\t<path d="M496,436.7c-13.5,4.1-31.1,6.5-47,6.5c-56.4,0-97.8-16-97.8-62.7c0-42.1,40.1-60.5,95-60.5\r\n\t\t\t\tc15.3,0,34.6,1.7,49.8,6.5v40.8c-11.2-6.8-22.5-11-38.5-11c-20.9,0-41.8,10.3-41.8,25.3s20.8,25.3,41.8,25.3\r\n\t\t\t\tc15.8,0,27.3-4.4,38.5-10.9V436.7z"/>\r\n\t\t\t<path d="M184.7,322.8H300c29.9,0,39.8,11.6,39.8,29.8c0,20.3-18.1,29.1-36.8,30.1v0.3c19.1,1.5,37.8,3.7,37.8,27.6\r\n\t\t\t\tc0,15.6-9.8,30.9-42.7,30.9H184.7V322.8z M241.7,417.4h29.7c11.1,0,14.9-4.6,14.9-11.4s-3.8-11.7-14.8-11.7h-29.9L241.7,417.4z\r\n\t\t\t\t M241.7,373.1H270c11,0,15.3-4.4,15.3-11.3c0-7.8-4.3-11.7-14.5-11.7h-29.2L241.7,373.1z"/>\r\n\t\t</g>\r\n\t</g>\r\n</svg>\r\n</div>\r\n<div id="kbc-brussels" class="logo">\r\n\t<svg x="0px" y="0px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve">\r\n\t\t<g>\r\n\t\t\t<g>\r\n\t\t\t\t<g>\r\n\t\t\t\t\t<g>\r\n\t\t\t\t\t\t<ellipse fill="#23A7E5" cx="258.8" cy="83.8" rx="83.8" ry="83.8"/>\r\n\t\t\t\t\t\t<path fill="#23A7E5" d="M320.6,151.6c-16,17.3-44.1,34.6-80.3,34.6c-28,0-52.2-10.9-67.5-23c-91.5,9.6-159.6,23.2-159.6,23.2\r\n\t\t\t\t\t\t\tv37.1l485.5-0.1v-76.4C498.8,147.1,415.6,146.6,320.6,151.6z"/>\r\n\t\t\t\t\t</g>\r\n\t\t\t\t\t<g>\r\n\t\t\t\t\t\t<path fill="#173865" d="M70.9,331.9v45.2H13.2V256.9h57.7V311h0.3l33.9-54.1h69.2L123.7,319l47.8,58h-66l-34.2-45.2H70.9z"/>\r\n\t\t\t\t\t\t<path fill="#173865" d="M498.8,372.1c-13.6,4.2-31.5,6.6-47.5,6.6c-57.1,0-99-16.2-99-63.4c0-42.6,40.6-61.2,96.1-61.2\r\n\t\t\t\t\t\t\tc15.4,0,35,1.7,50.4,6.6l0,41.3c-11.4-6.9-22.7-11.2-39-11.2c-21.2,0-42.3,10.4-42.3,25.6c0,15.2,21.1,25.6,42.3,25.6\r\n\t\t\t\t\t\t\tc16,0,27.6-4.4,39-11L498.8,372.1z"/>\r\n\t\t\t\t\t\t<path fill="#173865" d="M183.8,256.9h116.6c30.3,0,40.2,11.8,40.2,30.1c0,20.5-18.3,29.4-37.2,30.5v0.3\r\n\t\t\t\t\t\t\tc19.3,1.5,38.2,3.7,38.2,27.9c0,15.8-9.9,31.3-43.2,31.3H183.8V256.9z M241.5,352.6h30.1c11.3,0,15.1-4.7,15.1-11.6\r\n\t\t\t\t\t\t\tc0-6.9-3.9-11.9-15-11.9h-30.2L241.5,352.6z M241.5,307.8h28.7c11.1,0,15.5-4.5,15.5-11.4c0-7.9-4.4-11.9-14.6-11.9h-29.5\r\n\t\t\t\t\t\t\tL241.5,307.8z"/>\r\n\t\t\t\t\t</g>\r\n\t\t\t\t</g>\r\n\t\t\t\t<g>\r\n\t\t\t\t\t<path fill="#173865" d="M13.8,497h9v-56.9h-9v-13.4h37.1c6.2,0,12.3,0.6,17.3,4.3c5.4,4.1,7.8,10,7.8,16.6\r\n\t\t\t\t\t\tc0,7.6-3.9,14.5-10.9,17.8c9.3,3.7,14.5,11.6,14.5,21.6c0,6.7-2.8,13.4-7.8,17.7c-5.6,4.9-12.1,5.6-19.2,5.6H13.8V497z\r\n\t\t\t\t\t\t M38.7,496.4h8.8c3.8,0,8.3,0.1,11.6-2.1c3-2,4.7-5.6,4.7-9.1c0-3.7-1.4-7.1-4.6-9.5c-3.4-2.5-7.5-2.5-11.6-2.5h-8.9V496.4z\r\n\t\t\t\t\t\t M38.9,460.1h8.1c3.9,0,7.5,0.2,10.8-2.1c2.6-1.9,3.8-4.8,3.8-8c0-3.4-1.4-6.4-4.3-8.3c-2.9-1.9-6.7-1.6-10.1-1.6h-8.2V460.1z"/>\r\n\t\t\t\t\t<path fill="#173865" d="M109.7,458.5c3.6-7.4,10.7-11,18.7-11.4v14.6c-4.6,0.2-8.8,1.4-12.3,4.6c-4.7,4-5.4,9-5.4,14.9V497h8.1\r\n\t\t\t\t\t\tv13.4H88.4V497h8.1v-35.8h-8.1v-13.4h21.3V458.5z"/>\r\n\t\t\t\t\t<path fill="#173865" d="M200.3,497h8.1v13.4h-21.2v-7.7c-4.1,6.1-11.6,9.4-18.9,9.4c-6.7,0-13-2.8-17.3-8\r\n\t\t\t\t\t\tc-4.6-5.4-5.5-11.4-5.5-18.2v-24.7h-8.1v-13.4h22.4v33.9c0,4,0.1,8.3,2.5,11.7c2.3,3.6,6.3,5.4,10.5,5.4c4,0,8.1-2,10.5-5.2\r\n\t\t\t\t\t\tc2.7-3.8,2.7-8,2.7-12.3v-20.1h-8.1v-13.4h22.4V497z"/>\r\n\t\t\t\t\t<path fill="#173865" d="M233.4,492.2c0.5,5.6,4.2,9.4,10.1,9.4c4.3,0,8.6-3,8.6-7.7c0-6.2-5.9-7.3-10.7-8.6\r\n\t\t\t\t\t\tc-10.9-2.8-22.8-6.2-22.8-19.9c0-12,10.1-18.9,21.2-18.9c5.6,0,10.7,1.2,14.2,5.6v-4.3h10.5v17h-13.8c-0.2-4.5-3.6-7.4-8.1-7.4\r\n\t\t\t\t\t\tc-3.9,0-8,2.2-8,6.6c0,5.9,5.7,7.1,10.3,8.2c11.2,2.6,23.3,6.1,23.3,20.1c0,12.7-10.7,19.7-22.4,19.7c-6.3,0-12.1-2-16.2-6.8v5.2\r\n\t\t\t\t\t\th-10.9v-18.2H233.4z"/>\r\n\t\t\t\t\t<path fill="#173865" d="M292.2,492.2c0.5,5.6,4.2,9.4,10.1,9.4c4.3,0,8.6-3,8.6-7.7c0-6.2-5.9-7.3-10.7-8.6\r\n\t\t\t\t\t\tc-10.9-2.8-22.8-6.2-22.8-19.9c0-12,10.1-18.9,21.2-18.9c5.6,0,10.7,1.2,14.2,5.6v-4.3h10.5v17h-13.8c-0.2-4.5-3.6-7.4-8.1-7.4\r\n\t\t\t\t\t\tc-3.9,0-8,2.2-8,6.6c0,5.9,5.7,7.1,10.3,8.2c11.2,2.6,23.3,6.1,23.3,20.1c0,12.7-10.7,19.7-22.4,19.7c-6.3,0-12.1-2-16.2-6.8v5.2\r\n\t\t\t\t\t\th-10.9v-18.2H292.2z"/>\r\n\t\t\t\t\t<path fill="#173865" d="M397.4,492c-4.9,12-16.5,20-29.5,20c-18.3,0-32.9-14.3-32.9-32.7c0-18.5,13.9-33.4,32.6-33.4\r\n\t\t\t\t\t\tc8.7,0,17.3,3.9,23.4,10.1c6.2,6.6,8.8,14.5,8.8,23.4l-0.5,5h-50.6c1.9,8.7,9.8,15,18.7,15c6.2,0,11.6-2.3,15.1-7.5H397.4z\r\n\t\t\t\t\t\t M386.5,473.5c-2.5-9-10.4-14.8-19.7-14.8c-8.4,0-16.5,6.6-18.3,14.8H386.5z"/>\r\n\t\t\t\t\t<path fill="#173865" d="M431.2,497h8.1v13.4h-31V497h8.7v-56.9h-8.1v-13.4h22.4V497z"/>\r\n\t\t\t\t\t<path fill="#173865" d="M463.9,492.2c0.5,5.6,4.2,9.4,10.1,9.4c4.3,0,8.6-3,8.6-7.7c0-6.2-5.9-7.3-10.7-8.6\r\n\t\t\t\t\t\tc-10.9-2.8-22.8-6.2-22.8-19.9c0-12,10.1-18.9,21.2-18.9c5.6,0,10.7,1.2,14.2,5.6v-4.3H495v17h-13.8c-0.2-4.5-3.6-7.4-8.1-7.4\r\n\t\t\t\t\t\tc-3.9,0-8,2.2-8,6.6c0,5.9,5.7,7.1,10.3,8.2c11.2,2.6,23.3,6.1,23.3,20.1c0,12.7-10.7,19.7-22.4,19.7c-6.3,0-12.1-2-16.2-6.8v5.2\r\n\t\t\t\t\t\th-10.9v-18.2H463.9z"/>\r\n\t\t\t\t</g>\r\n\t\t\t</g>\r\n\t\t</g>\r\n\t</svg>\r\n</div>\r\n<div id="cbc" class="logo">\r\n\t<svg x="0px" y="0px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve">\r\n\t\t<g>\r\n\t\t\t<g class="main-color">\r\n\t\t\t\t<ellipse  cx="258.8" cy="151.7" rx="82.9" ry="82.9"/>\r\n\t\t\t\t<path d="M320,218.7c-15.8,17.1-43.6,34.2-79.4,34.2c-27.7,0-51.6-10.8-66.8-22.7c-90.5,9.5-157.8,23-157.8,23v36.6\r\n\t\t\t\t\tl480-0.1v-75.5C496,214.2,413.8,213.7,320,218.7z"/>\r\n\t\t\t</g>\r\n\t\t\t<g class="tertiary-color">\r\n\t\t\t\t<path  d="M496,436.7c-13.5,4.1-31.1,6.5-47,6.5c-56.4,0-97.8-16-97.8-62.7c0-42.1,40.1-60.5,95-60.5\r\n\t\t\t\t\tc15.3,0,34.6,1.7,49.8,6.5v40.8c-11.2-6.8-22.5-11-38.5-11c-20.9,0-41.8,10.3-41.8,25.3s20.8,25.3,41.8,25.3\r\n\t\t\t\t\tc15.8,0,27.3-4.4,38.5-10.9V436.7z"/>\r\n\t\t\t\t<path  d="M184.7,322.8H300c29.9,0,39.8,11.6,39.8,29.8c0,20.3-18.1,29.1-36.8,30.1v0.3c19.1,1.5,37.8,3.7,37.8,27.6\r\n\t\t\t\t\tc0,15.6-9.8,30.9-42.7,30.9H184.7V322.8z M241.7,417.4h29.7c11.1,0,14.9-4.6,14.9-11.4s-3.8-11.7-14.8-11.7h-29.9L241.7,417.4z\r\n\t\t\t\t\t M241.7,373.1H270c11,0,15.3-4.4,15.3-11.3c0-7.8-4.3-11.7-14.5-11.7h-29.2L241.7,373.1z"/>\r\n\t\t\t\t<path  d="M160.9,436.7c-13.5,4.1-31.1,6.5-47,6.5c-56.4,0-97.8-16-97.8-62.7c0-42.1,40.1-60.5,95-60.5\r\n\t\t\t\t\tc15.3,0,34.6,1.7,49.8,6.5v40.8c-11.2-6.8-22.5-11-38.5-11c-20.9,0-41.8,10.3-41.8,25.3s20.8,25.3,41.8,25.3\r\n\t\t\t\t\tc15.8,0,27.3-4.4,38.5-10.9V436.7z"/>\r\n\t\t\t</g>\r\n\t\t</g>\r\n\t</svg>\r\n</div>\r\n',c=function(e,t){return function(n,r){var i={resourceLocation:ServerSide.Configuration.Urls.Resources},o=$(e.render(t,i));switch(n.prepend(o),$(".logo",n).removeClass("visible"),r){case"kbc":$("#kbc",n).addClass("visible");break;case"kbc-brussels":$("#kbc-brussels",n).addClass("visible");break;case"cbc":$("#cbc",n).addClass("visible")}}}(o,u),d=function(e,t,n,r){return function(i,o,a){function s(){h?p():f()}var l={resourceLocation:ServerSide.Configuration.Urls.Resources},u=e(t.render(n,l)),c=this,d=a||{},f=d.onClose||function(){},p=d.onBack||function(){},h=!1;c.setTitle=function(t){e("#title",o).html(t)},c.setVisible=function(e){u.css("visibility",e?"inherit":"hidden")},c.enableBackButton=function(e){h=e},c.render=function(){new r(u,i.getLogoFileName()),o.append(u),new ServerSide.Framework.UI.Templating.RefLangTemplater(i.Designer).localize("button",u,["title","arial-label"],i.LanguageData),e("#btn-back",u).click(s),e("#btn-close",u).click(f)},c.getToolbarContainer=function(){return u}}}(t,o,l,c),f='<div class="initial container" id="init-container">\r\n    <input type="file" id="file-uploader" accept="image/*" >\r\n    <div class="initial__buttons">\r\n        <button class="initial__button initial__button-upload button-border-color user-selection" id="btn-upload" data-ref="upload" aria-label="" title="">\r\n            <svg x="0px" y="0px"viewBox="0 0 57 44" enable-background="new 0 0 57 44" xml:space="preserve">\r\n                <g transform="translate(-6870 -1305)">\r\n\t                <g transform="translate(6870 1305)">\r\n\t\t                <g>\r\n\t\t\t                <path class="secondary-color" d="M4,29.4h30.4V3.6H4V29.4z M17.4,21.2v-0.6l-0.2-0.2c-0.5-0.5-0.7-1.1-0.8-1.8v-0.4\r\n                                L15.8,18c-0.2-0.2-0.3-0.5-0.4-0.8c0-0.2,0-0.4,0.2-0.4l0.4-0.6l-0.2-0.4c-0.6-2-0.4-3.6,0.4-4.6c0.4-0.8,1.4-1,2.8-1.2\r\n                                c0.8,0,1.4,0.2,1.6,0.6l0.2,0.2h0.4c0.5,0,1,0.3,1.2,0.8c0.6,1,0.4,2.8,0,4.2l-0.2,0.4l0.4,0.4c0.1,0.1,0.2,0.2,0.2,0.4\r\n                                c0,0.6-0.2,0.8-0.4,0.8L22,18v0.4c-0.1,0.6-0.4,1.3-0.8,1.8L21,20.4V21l0,0v2c0.6,1,1.6,1.8,2.8,2l0,0c1.8,0.8,3.2,1.4,3.6,2.8\r\n                                H11c0.4-1.6,2-2.2,3.6-2.8l0,0c1.2-0.2,2.2-1,2.8-2C17.4,23,17.4,21.2,17.4,21.2z M5.6,5.2h27.2v22.4H29\r\n                                c-0.4-2.8-2.8-3.6-4.6-4.2l0,0c-0.7-0.3-1.4-0.6-2-1v-1.2l0,0c0.4-0.6,0.7-1.3,1-2c0.4-0.2,0.8-0.8,1-2c0-0.5,0-1-0.2-1.4\r\n                                c0.4-1.2,0.8-3.4-0.2-5c-0.4-0.7-1.2-1.3-2-1.4c-0.8-0.7-1.8-1.1-2.8-1l0,0c-2,0-3.4,0.6-4.2,1.8c-1.1,1.6-1.4,3.7-0.8,5.6\r\n                                C14,16.2,14,16.7,14,17.2c0.1,0.8,0.5,1.5,1,2c0.2,0.7,0.5,1.4,1,2l0,0v1.2c-0.2,0.4-1.2,0.8-2,1l0,0c-1.6,0.6-4,1.6-4.6,4.2H5.6\r\n                                V5.2z"/>\r\n                            <path class="secondary-color" d="M50,8l-3.6-0.8L47,4l-8.8-2V0H0v35.8h12.6l29,7L50,8z M45.2,5.2L38.4,37l-5.6-1.2h5.6v-9\r\n                                l4.2-20.2l-4.2-0.8v-2L45.2,5.2z M38.2,18.8V7.4L40.6,8L38.2,18.8z M1.6,1.6h35v32.6h-35V1.6z M19.8,35.8h5l15,3.2L46,8.6L48,9\r\n                                l-7.6,31.6L19.8,35.8z"/>\r\n                \t\t</g>\r\n\t                </g>\r\n            \t<g transform="translate(6772 782)">\r\n                    <g transform="translate(130 542)">\r\n                        <circle class="main-color" cx="11.5" cy="11.5" r="11.5"/>\r\n                        <circle fill="none" stroke="#FFFFFF" stroke-width="2" cx="11.5" cy="11.5" r="12.5"/>\r\n                    </g>\r\n\r\n                    <image overflow="visible" enable-background="new" width="96" height="96" id="icons8-plus" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGcAAABnCAYAAAAdQVz5AAAACXBIWXMAAFHQAABR0AGRv2kQAAAA\r\n        GXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAARtJREFUeNrs28ENgjAYgFFqGIRR\r\n        2ERGk010E5ykloSrFHsgLb6XEA8Y0/Ah+h/adQAAANcSWltwjHFKL/edt8whhMcV4vQNrnlIx7hz\r\n        /nWVb87Nw0McxBEHcRBHHMQRB3EQRxzEEQdxEEccxBEHcRBHHMQRB3EQRxzEEQdxEEccxBGHU2X3\r\n        hB7Yg3m2YTu+WbajFsV7VPuDF2Ns6IbLxTtb8R5VjzW/OYgjDuIgTutzTm1/TdeZa9o5v84Uc0Xr\r\n        XdKcUzR3Zeec7YOrGerSzZKbud5pzU+PNcQRB3EQRxzEEQdxEEccxBEHcRBHHMQRB3EQRxzEEQdx\r\n        EEccxBEHcRBHHMQRB3H4VWhtwQf2qBbvwQQAAAAAgP/1EWAALZUhy+U9LvUAAAAASUVORK5CYII=" transform="matrix(0.1354 0 0 0.1354 135 547)">\r\n                </image>\r\n            \t</g>\r\n            </g>\r\n        </svg>\r\n\r\n            <span class="initial__button-text text-color" ref="upload"></span>\r\n\r\n        </button>\r\n        <button class="initial__button  button-border-color user-selection" id="btn-gallery" aria-label="" title="">\r\n            \x3c!--<img class="initial__button-image" src="" alt="">--\x3e\r\n            <span class="initial__button-text text-color" id="btn-gallery--text"></span>\r\n        </button>\r\n    </div>\r\n\r\n    <span class="terms-link text-color"  id="terms-link"></span>\r\n\r\n</div>',p=function(e,t,n,r){return function(i,o,a){function s(e){if(e)switch(e){case"sizeError":case"UploadSizeException":return i.LanguageData.errorMaxSize;case"typeError":case"UploadBadContentException":return i.LanguageData.errorNotSupported;case"minSizeError":case"UploadMinSizeException":return i.LanguageData.errorMinSize}return""}var l={resourceLocation:ServerSide.Configuration.Urls.Resources},u=e(t.render(n,l)),c=o.getContainer(),d=null;new r(e("#btn-gallery",u),i.getLogoFileName()),this.render=function(n){var r=n||{};r.animated&&u.addClass("page-loading"),r.prepend?c.prepend(u):c.append(u);var a=new ServerSide.Framework.UI.Templating.RefLangTemplater(i.Designer);a.localize("button",u,["title","arial-label"],i.LanguageData),a.Apply();var l=i.LanguageData.gallery;e("#btn-gallery").attr("arial-label",l).attr("title",l),e("#btn-gallery--text").text(l);var f=i.Designer.Subscriber.Name||"KBC",p="";switch(f){case"KBC":p=i.LanguageData.termsHrefKBC;break;case"CBC":p=i.LanguageData.termsHrefCBC;break;case"KBC Brussels":p=i.LanguageData.termsHrefKBCBurssels}var h=t.render(i.LanguageData.termsLink,{subscriberName:p});e("#terms-link",u).html(h),o.getToolbar().setTitle(i.LanguageData.imageSelection),u.on("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){u.hasClass("page-loading")?u.removeClass("page-loading"):u.hasClass("page-closing")&&(u.removeClass("page-closing"),e("#init-container",c).remove(),d&&d())}),e("#btn-gallery img",u).attr("src",ServerSide.Configuration.Urls.Resources+"logo/"+i.getLogoFileName()),e("#btn-gallery",u).click(function(){o.showView("gallery")});var g=e("#btn-upload",u),v=e("#file-uploader",u),m=new ServerSide.Framework.Utils.Upload({autoUpload:!0,button:g[0],input:v[0],request:{endpoint:i.Designer.GetImageUploadUrl(i.Client,"Card")},callbacks:{onSubmit:function(e,t){o.showLoader(i.LanguageData.uploading)},onUpload:function(e,t){},onComplete:function(e,t,n){o.closeLoader(),null!==n.Type&&void 0!==n.Type?o.showView(o.PAGES.ERROR_UPLOAD_PAGE,{errorDescription:s(reason)}):(i.setCustomImage(n.Id,n.Url,null,null,!0),o.showView(o.PAGES.DESIGNER)),m.reset(!0)},onError:function(e,t,n){o.closeLoader(),m.reset(!0),o.showView(o.PAGES.ERROR_UPLOAD_PAGE,{errorDescription:s(n)})},onProgress:function(e,t,n,r,i){}},validation:{allowedExtensions:["jpeg","jpg","png","gif","bmp"],acceptFiles:"image/*",sizeLimit:i.Designer.UploadImage.MaxSize.Size,minSize:i.Designer.UploadImage.MinSize.Image,minSizeLimit:1},messages:{sizeError:"sizeError",typeError:"typeError",minSizeError:"minSizeError"}});g.click(function(){v.click()})},this.closing=function(e){d=e,u.addClass("page-closing")}}}(t,o,f,c),
h='<div class="gallery-page container" id="gallery-page">\r\n    <input type="file" id="file-uploader" accept="image/*">\r\n\r\n    <div class="gallery-container">\r\n\r\n    </div>\r\n    <div class="gallery-footer" role="button">\r\n        <div class="gallery-footer-container">\r\n            <div class="gallery-footer-container-left">\r\n                <svg x="0px" y="0px" viewBox="0 0 18 18" enable-background="new 0 0 18 18" xml:space="preserve">\r\n                    <g transform="translate(-330 -19)">\r\n                        <path class="secondary-color" d="M339,37c-5,0-9-4-9-9s4-9,9-9s9,4,9,9C348,33,344,37,339,37C339,37,339,37,339,37z\r\n                             M339,20.1c-4.4,0-7.9,3.5-7.9,7.9c0,4.4,3.5,7.9,7.9,7.9c4.4,0,7.9-3.5,7.9-7.9C346.9,23.6,343.4,20.1,339,20.1z"/>\r\n                        <path class="main-color" d="M341,31.6c0,0.2-0.2,0.4-0.4,0.4h-3.1c-0.2,0-0.4-0.2-0.4-0.4c0,0,0,0,0,0v-0.8\r\n                            c0-0.2,0.2-0.4,0.4-0.4h0.4v-2.3h-0.4c-0.2,0-0.4-0.2-0.4-0.4c0,0,0,0,0,0v-0.8c0-0.2,0.2-0.4,0.4-0.4h2.3c0.2,0,0.4,0.2,0.4,0.4\r\n                            c0,0,0,0,0,0v3.5h0.4c0.2,0,0.4,0.2,0.4,0.4c0,0,0,0,0,0V31.6z"/>\r\n                        <path class="main-color" d="M340.2,25c0,0.2-0.2,0.4-0.4,0.4h-1.6c-0.2,0-0.4-0.2-0.4-0.4c0,0,0,0,0,0v-1.1\r\n                            c0-0.2,0.2-0.4,0.4-0.4h1.6c0.2,0,0.4,0.2,0.4,0.4c0,0,0,0,0,0V25z"/>\r\n                    </g>\r\n                </svg>\r\n\r\n                <span class="gallery-footer-text text-color" ref="chooseOtherImage"></span>\r\n            </div>\r\n            <div class="gallery-footer-link user-selection" href="#" data-ref="anotherImage">\r\n                <svg x="0px" y="0px" viewBox="0 0 13 13" enable-background="new 0 0 13 13" xml:space="preserve">\r\n                    <g transform="translate(19739 -33) rotate(-90)">\r\n\r\n\t\t                <rect x="-46" y="-19739" transform="matrix(-2.535182e-06 -1 1 -2.535182e-06 19693 -19772.0508)" fill="none" width="13" height="13"/>\r\n\t                    <g transform="translate(-46 -19736)">\r\n\t\t                    <g>\r\n\t\t\t                    <path class="main-color" d="M13,1.4L11.6,0L6.5,5.1L1.4,0L0,1.4l5.1,5.1l0,0l1.4,1.4l0,0l1.4-1.4l0,0L13,1.4z"/>\r\n\t\t                    </g>\r\n\t                    </g>\r\n                    </g>\r\n                </svg>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n',g=function(e,t,n){return function(r,i){function o(e){if(e)switch(e){case"sizeError":case"UploadSizeException":return r.LanguageData.errorMaxSize;case"typeError":case"UploadBadContentException":return r.LanguageData.errorNotSupported;case"minSizeError":case"UploadMinSizeException":return r.LanguageData.errorMinSize}return""}var a={resourceLocation:ServerSide.Configuration.Urls.Resources},s=e(t.render(n,a)),l=null,u=i.getContainer();this.render=function(n){function a(e){var t,n=r.GalleryManager.getSelectedCategory();e&&(t=_.find(n.images,{Id:+e}),-1!==n.Id?r.setStockImage(t.Id,t.LargeImage,n.Locked||t.Locked,t,!0):r.setCustomImage(t.Id,t.Url,!1,null,!0),i.showView(i.PAGES.DESIGNER))}var c=n||{};c.animated&&s.addClass("page-loading"),c.prepend?u.prepend(s):u.append(s);var d=new ServerSide.Framework.UI.Templating.RefLangTemplater(r.Designer);d.Apply(),d.localize("a",s,["alt"],r.LanguageData);var f=r.GalleryManager.getSelectedCategory();new ServerSide.Components.MiniImageGallery(e(".gallery-container",u)[0],{onImageSelected:a,images:f.images,imageClassName:"gallery-image user-selection"});s.on("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){s.hasClass("page-loading")?s.removeClass("page-loading"):s.hasClass("page-closing")&&(s.removeClass("page-closing"),e("#gallery-page",u).remove(),l&&l())});var p=t.render(r.LanguageData.gallery,{subscriberName:r.Designer.Subscriber.Name||"KBC"});i.getToolbar().setTitle(p);var h=e(".gallery-footer",s),g=e("#file-uploader",s),v=new ServerSide.Framework.Utils.Upload({autoUpload:!0,button:h[0],input:g[0],request:{endpoint:r.Designer.GetImageUploadUrl(r.Client,"Card")},callbacks:{onSubmit:function(e,t){i.showLoader(r.LanguageData.uploading)},onUpload:function(e,t){},onComplete:function(e,t,n){i.closeLoader(),null!==n.Type&&void 0!==n.Type?i.showView(i.PAGES.ERROR_UPLOAD_PAGE,{errorDescription:o(reason)}):(r.setCustomImage(n.Id,n.Url,null,null,!0),i.showView(i.PAGES.DESIGNER)),v.reset(!0)},onError:function(e,t,n){i.closeLoader(),v.reset(!0),i.showView(i.PAGES.ERROR_UPLOAD_PAGE,{errorDescription:o(n)})},onProgress:function(e,t,n,r,i){}},validation:{allowedExtensions:["jpeg","jpg","png","gif","bmp"],acceptFiles:"image/*",sizeLimit:r.Designer.UploadImage.MaxSize.Size,minSize:r.Designer.UploadImage.MinSize.Image,minSizeLimit:1},messages:{sizeError:"sizeError",typeError:"typeError",minSizeError:"minSizeError"}});h.click(function(){g.click()})},this.closing=function(e){l=e,s.addClass("page-closing")}}}(t,o,h),v='<div class="designer-page container" id="designer-page">\r\n    <div class="designer-header">\r\n        <button class="designer-header-button secondary-text-color user-selection" id="btn-choose-image" aria-label="" title="" data-ref="anotherImage">\r\n            <svg x="0px" y="0px" viewBox="0 0 25 21.4" enable-background="new 0 0 25 21.4" xml:space="preserve" class="secondary-color">\r\n                <path d="M2,14.7h15.2V1.8H2V14.7z M8.7,10.6v-0.3l-0.1-0.1C8.4,10,8.2,9.6,8.2,9.3V9.1L7.9,9\r\n                    C7.8,8.9,7.7,8.7,7.7,8.6c0-0.1,0-0.2,0.1-0.2L8,8.1L7.9,7.9C7.6,7.1,7.7,6.3,8.1,5.6C8.3,5.2,8.8,5.1,9.5,5c0.4,0,0.7,0.1,0.8,0.3\r\n                    l0.1,0.1h0.2c0.3,0,0.5,0.2,0.6,0.4c0.3,0.7,0.3,1.4,0,2.1l-0.1,0.2l0.2,0.2c0.1,0.1,0.1,0.1,0.1,0.2c0,0.3-0.1,0.4-0.2,0.4L11,9\r\n                    v0.2c-0.1,0.3-0.2,0.6-0.4,0.9l-0.1,0.1v0.3l0,0v1c0.3,0.5,0.8,0.9,1.4,1l0,0c0.9,0.4,1.6,0.7,1.8,1.4H5.5c0.2-0.8,1-1.1,1.8-1.4\r\n                    l0,0c0.6-0.1,1.1-0.5,1.4-1V10.6z M2.8,2.6h13.6v11.2h-1.9c-0.2-1.4-1.4-1.8-2.3-2.1l0,0c-0.4-0.1-0.7-0.3-1-0.5v-0.6l0,0\r\n                    c0.2-0.3,0.4-0.6,0.5-1c0.2-0.1,0.4-0.4,0.5-1c0-0.2,0-0.5-0.1-0.7c0.3-0.8,0.3-1.7-0.1-2.5c-0.2-0.4-0.6-0.6-1-0.7\r\n                    c-0.4-0.4-0.9-0.5-1.4-0.5l0,0C8.8,4.1,8,4.5,7.5,5.1C6.9,5.9,6.8,7,7.1,7.9C7,8.1,7,8.4,7,8.6c0.1,0.4,0.2,0.7,0.5,1\r\n                    c0.1,0.4,0.3,0.7,0.5,1l0,0v0.6c-0.1,0.2-0.6,0.4-1,0.5l0,0c-1.1,0.3-1.9,1-2.3,2.1H2.8L2.8,2.6z"/>\r\n                <path d="M25,4l-1.8-0.4L23.5,2l-4.4-1V0H0v17.9h6.3l14.5,3.5L25,4z M22.6,2.6l-3.4,15.9l-2.8-0.6h2.8\r\n                    v-4.5l2.1-10.1l-2.1-0.4v-1L22.6,2.6z M19.1,9.4V3.7L20.3,4L19.1,9.4z M0.8,0.8h17.5v16.3H0.8V0.8z M9.9,17.9h2.5l7.5,1.6L23,4.3\r\n                    l1,0.2l-3.8,15.8L9.9,17.9z"/>\r\n            </svg>\r\n            <span ref="anotherImage"></span>\r\n        </button>\r\n        <button class="designer-header-button secondary-text-color  user-selection" id="btn-reset" aria-label="" title="" data-ref="reset">\r\n            <svg x="0px" y="0px" viewBox="0 0 22 22" enable-background="new 0 0 22 22" xml:space="preserve" class="secondary-color">\r\n                <path d="M11,0C7.3,0,3.9,1.9,1.8,4.9V1.4H0.9v5h5V5.5H2.5C4.4,2.6,7.6,0.9,11,0.9c5.6,0,10.1,4.5,10.1,10.1c0,5.6-4.5,10.1-10.1,10.1c0,0,0,0,0,0h-0.5V22H11c6.1,0,11-4.9,11-11S17.1,0,11,0z"/>\r\n                <path d="M2.1,15.7l-0.8,0.4c0.1,0.3,0.3,0.6,0.5,0.8l0.8-0.5C2.4,16.2,2.2,16,2.1,15.7z"/>\r\n                <path d="M3.6,19.1c0.2,0.2,0.5,0.4,0.7,0.6L4.9,19c-0.2-0.2-0.5-0.4-0.7-0.6L3.6,19.1z"/>\r\n                <path d="M1.4,14l-0.9,0.3l0.3,0.9l0.8-0.4C1.6,14.5,1.5,14.3,1.4,14z"/>\r\n                <path d="M1,12.3l-0.9,0.1c0,0.3,0.1,0.6,0.2,0.9l0.9-0.2C1.1,12.9,1,12.6,1,12.3z"/>\r\n                <path d="M2.3,17.7c0.2,0.3,0.4,0.5,0.6,0.7l0.7-0.6c-0.2-0.2-0.4-0.4-0.6-0.7L2.3,17.7z"/>\r\n                <path d="M5.1,20.3c0.3,0.2,0.5,0.3,0.8,0.5L6.3,20c-0.3-0.1-0.5-0.3-0.8-0.4L5.1,20.3z"/>\r\n                <path d="M6.8,21.2l0.9,0.3L8,20.6c-0.3-0.1-0.5-0.2-0.8-0.3L6.8,21.2z"/>\r\n                <path d="M8.6,21.7c0.3,0.1,0.6,0.1,0.9,0.2L9.7,21c-0.3,0-0.6-0.1-0.9-0.2L8.6,21.7z"/>\r\n                <rect y="11" width="0.9" height="0.5"/>\r\n            </svg>\r\n            <span ref="reset"></span>\r\n        </button>\r\n    </div>\r\n    <div class="designer-canvas">\r\n        <div id="ssg-canvas" class="ssg-canvas"></div>\r\n\r\n        <div class="error-coverage error-text-color" id="card-coverage-message">\r\n            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="error-icon-color">\r\n                <path d="M12 1l-12 22h24l-12-22zm-1 8h2v7h-2v-7zm1 11.25c-.69 0-1.25-.56-1.25-1.25s.56-1.25 1.25-1.25 1.25.56 1.25 1.25-.56 1.25-1.25 1.25z"/>\r\n            </svg>\r\n            <span ref="errorCardCoverage"></span>\r\n        </div>\r\n        <div class="locked-image error-text-color" id="image-locked-message" >\r\n            <span ref="lockedImage"></span>\r\n        </div>\r\n\r\n    </div>\r\n    <div class="designer-footer">\r\n        <div class="designer-tools">\r\n            <button class="btn-control user-selection" id="btn-scale" aria-label="" title="" data-ref="scale">\r\n                <svg x="0px" y="0px" viewBox="0 0 29 29" enable-background="new 0 0 29 29" xml:space="preserve" class="tertiary-color">\r\n                    <path d="M28.3,0h-4.1c-0.4,0-0.8,0.3-0.8,0.8c0,0,0,0,0,0c0,0.4,0.3,0.8,0.7,0.8c0,0,0.1,0,0.1,0h2.3\r\n                        l-25,25v-2.3c0-0.4-0.3-0.8-0.8-0.8c0,0,0,0,0,0c-0.3,0-0.7,0.2-0.7,0.6c0,0,0,0.1,0,0.1v4.1C0,28.7,0.3,29,0.7,29c0,0,0.1,0,0.1,0\r\n                        h4.1c0.4,0,0.8-0.3,0.8-0.8c0,0,0,0,0,0c0-0.4-0.3-0.8-0.7-0.8c0,0-0.1,0-0.1,0H2.6l25-25v2.3c0,0.4,0.3,0.8,0.8,0.8c0,0,0,0,0,0\r\n                        c0.5,0,0.6-0.2,0.6-0.6V0.8C29,0.4,28.8,0.1,28.3,0C28.4,0,28.3,0,28.3,0z"/>\r\n                </svg>\r\n                <span ref="scale"></span>\r\n            </button>\r\n            <button class="btn-control user-selection" id="btn-move"  aria-label="" title="" data-ref="move">\r\n                <svg x="0px" y="0px" viewBox="0 0 30.6 30.6" enable-background="new 0 0 30.6 30.6" xml:space="preserve" class="tertiary-color">\r\n                    <g transform="translate(0.125 0.025)">\r\n                        <path d="M12.3,15.3c0-0.4-0.3-0.8-0.8-0.8c0,0,0,0,0,0h-9l1.6-1.6c0.3-0.3,0.3-0.8,0-1.1\r\n                            c-0.3-0.3-0.8-0.3-1.1,0c0,0,0,0,0,0l-2.9,2.9c-0.3,0.3-0.3,0.8,0,1.1L3,18.7c0.3,0.3,0.7,0.3,1,0c0.3-0.3,0.3-0.8,0-1.1L2.6,16h9\r\n                            C12,16,12.3,15.7,12.3,15.3z"/>\r\n                        <path d="M30.3,14.7l-2.9-2.9c-0.3-0.3-0.8-0.3-1.1,0c-0.3,0.3-0.3,0.8,0,1.1l1.6,1.6h-9\r\n                            c-0.4,0-0.8,0.3-0.8,0.8c0,0,0,0,0,0c0,0.5,0.5,0.7,0.9,0.7h9l-1.6,1.6c-0.3,0.3-0.3,0.8,0,1.1c0.3,0.3,0.7,0.3,1,0l2.9-2.9\r\n                            C30.6,15.5,30.6,15,30.3,14.7z"/>\r\n                        <path d="M17.6,26.3L16,28v-9c0-0.4-0.3-0.8-0.8-0.8c0,0,0,0,0,0c-0.4,0-0.8,0.3-0.8,0.7\r\n                            c0,0,0,0.1,0,0.1v9l-1.6-1.6c-0.3-0.3-0.8-0.3-1.1,0c-0.3,0.3-0.3,0.8,0,1.1l2.9,2.9c0.3,0.3,0.7,0.3,1,0l2.9-2.9\r\n                            c0.3-0.3,0.3-0.8,0-1.1C18.3,26.1,17.9,26.1,17.6,26.3z"/>\r\n                        <path d="M12.9,4.2l1.6-1.6v9c0,0.4,0.3,0.8,0.8,0.8c0,0,0,0,0,0c0.4,0,0.8-0.3,0.8-0.7\r\n                            c0,0,0-0.1,0-0.1v-9l1.6,1.6c0.3,0.3,0.7,0.3,1,0c0.3-0.3,0.3-0.8,0-1.1l-2.9-2.9c-0.3-0.3-0.8-0.3-1.1,0l-2.9,2.9\r\n                            c-0.3,0.3-0.3,0.8,0,1.1C12.1,4.5,12.6,4.5,12.9,4.2C12.9,4.2,12.9,4.2,12.9,4.2z"/>\r\n                    </g>\r\n                </svg>\r\n                <span ref="move"></span>\r\n            </button>\r\n            <button class="btn-control user-selection" id="btn-rotate" aria-label="" title="" data-ref="rotate">\r\n                <svg x="0px" y="0px" viewBox="0 0 30 30" enable-background="new 0 0 30 30" xml:space="preserve" class="tertiary-color">\r\n                    <path d="M25.6,4.4h2.2c0.4,0,0.7-0.3,0.7-0.7c0-0.4-0.3-0.7-0.7-0.7h-4.1C23.3,3,23,3.3,23,3.7v4.1\r\n                        c0,0.4,0.3,0.8,0.7,0.8c0.4,0,0.8-0.3,0.8-0.7c0,0,0,0,0-0.1V5.6c2.5,2.4,4,5.8,4.1,9.3c0,7.1-5.5,12.9-12.6,13.3\r\n                        c-0.7,0.4-1.1,0.7-1.1,1.1c0,0.4,0.3,0.7,0.7,0.7l0,0c8.1-0.4,14.5-7.1,14.4-15.2C29.9,10.9,28.3,7.2,25.6,4.4z"/>\r\n                    <path d="M6.3,21.5c-0.4,0-0.7,0.3-0.7,0.7v2.2c-2.6-2.5-4.1-6-4.1-9.6c0-7.3,5.9-13.3,13.2-13.3\r\n                        c0,0,0.1,0,0.1,0c0.4,0,0.7-0.3,0.7-0.7c0-0.4,0-0.7-0.7-0.7C6.6,0,0,6.6,0,14.8c-0.1,3.9,1.5,7.7,4.4,10.4H2.2\r\n                        c-0.4,0.4-0.7,0.7-0.7,1.1c0,0.4,0.3,0.7,0.7,0.7h4.1C6.7,27,7,26.7,7,26.3v-4.1C7,21.8,6.7,21.5,6.3,21.5z"/>\r\n                </svg>\r\n                <span ref="rotate"></span>\r\n            </button>\r\n            <button class="btn-control user-selection" id="btn-flip" aria-label="" title="" data-ref="flip">\r\n                <svg x="0px" y="0px" viewBox="0 0 30 25" enable-background="new 0 0 30 25" xml:space="preserve" class="tertiary-color">\r\n                    <g>\r\n                        <path d="M30,24.9H15.8L15.7,0L30,24.9z"/>\r\n                    </g>\r\n                    <g>\r\n                        <path d="M12.8,5.7v17.8H2.6L12.8,5.7 M14.3,0.1L0,25h14.2L14.3,0.1z"/>\r\n                    </g>\r\n                </svg>\r\n                <span ref="flip"></span>\r\n            </button>\r\n        </div>\r\n        <div class="controls-container" id="scale-container">\r\n            <div class="input-container">\r\n                <button id="btn-scale-decrease user-selection" class="button-decrease" title="" aria-label="" data-ref="increase">\r\n                    <i class="minus"></i>\r\n                </button>\r\n                <input type="range" id="scale-control" min="10" max="200" name="scale-range" class="range-control">\r\n                <button id="btn-scale-increase user-selection" class="button-increase" title="" aria-label="" data-ref="increase">\r\n                    <i class="plus"></i>\r\n                </button>\r\n            </div>\r\n            <div class="controls-footer">\r\n                <div class="controls-footer-container">\r\n                    <button class="controls-footer-button controls-footer-button-close control user-selection" title="" aria-label="" data-ref="close">\r\n                        <svg class="tertiary-color" x="0px" y="0px"viewBox="0 0 25 25" enable-background="new 0 0 25 25" xml:space="preserve">\r\n                            <path d="M13.6,12.5L24.8,1.3c0.3-0.3,0.3-0.8,0-1.1c-0.3-0.3-0.8-0.3-1.1,0L12.5,11.4L1.3,0.2\r\n                                C1-0.1,0.5-0.1,0.2,0.2c-0.3,0.3-0.3,0.8,0,1.1l11.2,11.2L0.2,23.7c-0.3,0.3-0.3,0.8,0,1.1C0.4,24.9,0.6,25,0.8,25\r\n                                c0.2,0,0.4-0.1,0.6-0.2l11.2-11.2l11.2,11.2c0.1,0.2,0.3,0.2,0.6,0.2c0.2,0,0.4-0.1,0.6-0.2c0.3-0.3,0.3-0.8,0-1.1L13.6,12.5z"/>\r\n                        </svg>\r\n                    </button>\r\n                    <label ref="scale" for="scale-control"></label>\r\n                    <button  class="controls-footer-button controls-footer-button-confirm control user-selection" title="" aria-label="" data-ref="confirm">\r\n                        <svg x="0px" y="0px" viewBox="0 0 18 18" enable-background="new 0 0 18 18" xml:space="preserve" class="main-color">\r\n                            <path  d="M17,0c-0.3,0-0.6,0.2-0.8,0.5L7.4,15.4L1.6,9.9C1.4,9.7,1,9.6,0.7,9.7\r\n                                C0.3,9.8,0.1,10.1,0,10.5c-0.1,0.4,0.1,0.8,0.4,1L7,17.8C7.2,17.9,7.4,18,7.7,18c0.3,0,0.5-0.2,0.7-0.5l9.5-15.9\r\n                                c0.2-0.3,0.2-0.7,0-1.1C17.7,0.2,17.4,0,17,0z"/>\r\n                        </svg>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="controls-container" id="move-container">\r\n            <div class="input-container">\r\n                <button id="btn-move-up" class="button-move control user-selection" title="" aria-label="" data-ref="up">\r\n                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" class="arrow tertiary-color">\r\n                        <path d="M27.414 12.586l-10-10c-0.781-0.781-2.047-0.781-2.828 0l-10 10c-0.781 0.781-0.781 2.047 0 2.828s2.047 0.781 2.828 0l6.586-6.586v19.172c0 1.105 0.895 2 2 2s2-0.895 2-2v-19.172l6.586 6.586c0.39 0.39 0.902 0.586 1.414 0.586s1.024-0.195 1.414-0.586c0.781-0.781 0.781-2.047 0-2.828z"></path>\r\n                    </svg>\r\n                </button>\r\n                <button id="btn-move-down" class="button-move control user-selection" title="" aria-label="" data-ref="down">\r\n                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" class="arrow tertiary-color">\r\n                        <path d="M27.414 19.414l-10 10c-0.781 0.781-2.047 0.781-2.828 0l-10-10c-0.781-0.781-0.781-2.047 0-2.828s2.047-0.781 2.828 0l6.586 6.586v-19.172c0-1.105 0.895-2 2-2s2 0.895 2 2v19.172l6.586-6.586c0.39-0.39 0.902-0.586 1.414-0.586s1.024 0.195 1.414 0.586c0.781 0.781 0.781 2.047 0 2.828z"></path>\r\n                    </svg>\r\n                </button>\r\n                <button id="btn-move-left" class="button-move control user-selection" title="" aria-label="" data-ref="left" >\r\n                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" class="arrow tertiary-color">\r\n                        <path d="M12.586 27.414l-10-10c-0.781-0.781-0.781-2.047 0-2.828l10-10c0.781-0.781 2.047-0.781 2.828 0s0.781 2.047 0 2.828l-6.586 6.586h19.172c1.105 0 2 0.895 2 2s-0.895 2-2 2h-19.172l6.586 6.586c0.39 0.39 0.586 0.902 0.586 1.414s-0.195 1.024-0.586 1.414c-0.781 0.781-2.047 0.781-2.828 0z"></path>\r\n                    </svg>\r\n                </button>\r\n                <button id="btn-move-right" class="button-move control user-selection" title="" aria-label="" data-ref="right" >\r\n                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" class="arrow tertiary-color">\r\n                        <path d="M19.414 27.414l10-10c0.781-0.781 0.781-2.047 0-2.828l-10-10c-0.781-0.781-2.047-0.781-2.828 0s-0.781 2.047 0 2.828l6.586 6.586h-19.172c-1.105 0-2 0.895-2 2s0.895 2 2 2h19.172l-6.586 6.586c-0.39 0.39-0.586 0.902-0.586 1.414s0.195 1.024 0.586 1.414c0.781 0.781 2.047 0.781 2.828 0z"></path>\r\n                    </svg>\r\n                </button>\r\n            </div>\r\n            <div class="controls-footer">\r\n                <div class="controls-footer-container">\r\n                    <button class="controls-footer-button controls-footer-button-close control user-selection" title="" aria-label="" data-ref="close">\r\n                        <svg class="tertiary-color" x="0px" y="0px"viewBox="0 0 25 25" enable-background="new 0 0 25 25" xml:space="preserve">\r\n                            <path d="M13.6,12.5L24.8,1.3c0.3-0.3,0.3-0.8,0-1.1c-0.3-0.3-0.8-0.3-1.1,0L12.5,11.4L1.3,0.2\r\n                                C1-0.1,0.5-0.1,0.2,0.2c-0.3,0.3-0.3,0.8,0,1.1l11.2,11.2L0.2,23.7c-0.3,0.3-0.3,0.8,0,1.1C0.4,24.9,0.6,25,0.8,25\r\n                                c0.2,0,0.4-0.1,0.6-0.2l11.2-11.2l11.2,11.2c0.1,0.2,0.3,0.2,0.6,0.2c0.2,0,0.4-0.1,0.6-0.2c0.3-0.3,0.3-0.8,0-1.1L13.6,12.5z"/>\r\n                        </svg>\r\n                    </button>\r\n                    <label ref="move"></label>\r\n                    <button  class="controls-footer-button controls-footer-button-confirm control user-selection" title="" aria-label="" data-ref="confirm">\r\n                        <svg x="0px" y="0px" viewBox="0 0 18 18" enable-background="new 0 0 18 18" xml:space="preserve" class="main-color">\r\n                            <path  d="M17,0c-0.3,0-0.6,0.2-0.8,0.5L7.4,15.4L1.6,9.9C1.4,9.7,1,9.6,0.7,9.7\r\n                                C0.3,9.8,0.1,10.1,0,10.5c-0.1,0.4,0.1,0.8,0.4,1L7,17.8C7.2,17.9,7.4,18,7.7,18c0.3,0,0.5-0.2,0.7-0.5l9.5-15.9\r\n                                c0.2-0.3,0.2-0.7,0-1.1C17.7,0.2,17.4,0,17,0z"/>\r\n                        </svg>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="controls-container" id="rotate-container">\r\n            <div class="input-container rotation">\r\n                <input type="range" id="rotate-control" min="-180" max="180" name="rotate-range" class="range-control">\r\n                <div class="rotation-labels">\r\n                    <button class="rotation-button user-selection" id="rotate-minus-180" aria-label="-180&deg;" title="-180&deg;">-180&deg;</button>\r\n                    <button class="rotation-button user-selection" id="rotate-0" aria-label="0&deg;" title="0&deg;">0</button>\r\n                    <button class="rotation-button user-selection" id="rotate-plus-180" aria-label="180&deg;" title="180&deg;">180&deg;</button>\r\n                </div>\r\n            </div>\r\n            <div class="controls-footer">\r\n                <div class="controls-footer-container">\r\n                    <button class="controls-footer-button controls-footer-button-close control user-selection" title="" aria-label="" data-ref="close">\r\n                        <svg class="tertiary-color" x="0px" y="0px"viewBox="0 0 25 25" enable-background="new 0 0 25 25" xml:space="preserve">\r\n                            <path d="M13.6,12.5L24.8,1.3c0.3-0.3,0.3-0.8,0-1.1c-0.3-0.3-0.8-0.3-1.1,0L12.5,11.4L1.3,0.2\r\n                                C1-0.1,0.5-0.1,0.2,0.2c-0.3,0.3-0.3,0.8,0,1.1l11.2,11.2L0.2,23.7c-0.3,0.3-0.3,0.8,0,1.1C0.4,24.9,0.6,25,0.8,25\r\n                                c0.2,0,0.4-0.1,0.6-0.2l11.2-11.2l11.2,11.2c0.1,0.2,0.3,0.2,0.6,0.2c0.2,0,0.4-0.1,0.6-0.2c0.3-0.3,0.3-0.8,0-1.1L13.6,12.5z"/>\r\n                        </svg>\r\n                    </button>\r\n                    <label ref="rotate" for="rotate-control"></label>\r\n                    <button  class="controls-footer-button controls-footer-button-confirm control user-selection" title="" aria-label="" data-ref="confirm">\r\n                        <svg x="0px" y="0px" viewBox="0 0 18 18" enable-background="new 0 0 18 18" xml:space="preserve" class="main-color">\r\n                            <path  d="M17,0c-0.3,0-0.6,0.2-0.8,0.5L7.4,15.4L1.6,9.9C1.4,9.7,1,9.6,0.7,9.7\r\n                                C0.3,9.8,0.1,10.1,0,10.5c-0.1,0.4,0.1,0.8,0.4,1L7,17.8C7.2,17.9,7.4,18,7.7,18c0.3,0,0.5-0.2,0.7-0.5l9.5-15.9\r\n                                c0.2-0.3,0.2-0.7,0-1.1C17.7,0.2,17.4,0,17,0z"/>\r\n                        </svg>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="controls-container" id="flip-container">\r\n            <div class="input-container">\r\n                <button class="button-flip user-selection" id="btn-flip-horizontal" aria-label="" title="" data-ref="flipHorizontal">\r\n                    <svg x="0px" y="0px" viewBox="0 0 30 25" enable-background="new 0 0 30 25" xml:space="preserve" class="tertiary-color">\r\n                        <g>\r\n                            <path d="M30,24.9H15.8L15.7,0L30,24.9z"/>\r\n                        </g>\r\n                        <g>\r\n                            <path d="M12.8,5.7v17.8H2.6L12.8,5.7 M14.3,0.1L0,25h14.2L14.3,0.1z"/>\r\n                        </g>\r\n                    </svg>\r\n                    <span ref="flipHorizontal"></span>\r\n                </button>\r\n                <button class="button-flip user-selection" id="btn-flip-vertical"  aria-label="" title="" data-ref="flipVertical">\r\n                    <svg x="0px" y="0px" viewBox="0 0 30 25" enable-background="new 0 0 30 25" xml:space="preserve" class="tertiary-color">\r\n                        <g>\r\n                            <path d="M30,24.9H15.8L15.7,0L30,24.9z"/>\r\n                        </g>\r\n                        <g>\r\n                            <path d="M12.8,5.7v17.8H2.6L12.8,5.7 M14.3,0.1L0,25h14.2L14.3,0.1z"/>\r\n                        </g>\r\n                    </svg>\r\n                    <span ref="flipVertical"></span>\r\n                </button>\r\n            </div>\r\n            <div class="controls-footer">\r\n                <div class="controls-footer-container">\r\n                    <button class="controls-footer-button controls-footer-button-close control user-selection" title="" aria-label="" data-ref="close">\r\n                        <svg class="tertiary-color" x="0px" y="0px"viewBox="0 0 25 25" enable-background="new 0 0 25 25" xml:space="preserve">\r\n                            <path d="M13.6,12.5L24.8,1.3c0.3-0.3,0.3-0.8,0-1.1c-0.3-0.3-0.8-0.3-1.1,0L12.5,11.4L1.3,0.2\r\n                                C1-0.1,0.5-0.1,0.2,0.2c-0.3,0.3-0.3,0.8,0,1.1l11.2,11.2L0.2,23.7c-0.3,0.3-0.3,0.8,0,1.1C0.4,24.9,0.6,25,0.8,25\r\n                                c0.2,0,0.4-0.1,0.6-0.2l11.2-11.2l11.2,11.2c0.1,0.2,0.3,0.2,0.6,0.2c0.2,0,0.4-0.1,0.6-0.2c0.3-0.3,0.3-0.8,0-1.1L13.6,12.5z"/>\r\n                        </svg>\r\n                    </button>\r\n                    <label ref="flip"></label>\r\n                    <button  class="controls-footer-button controls-footer-button-confirm control user-selection" title="" aria-label="" data-ref="confirm">\r\n                        <svg x="0px" y="0px" viewBox="0 0 18 18" enable-background="new 0 0 18 18" xml:space="preserve" class="main-color">\r\n                            <path  d="M17,0c-0.3,0-0.6,0.2-0.8,0.5L7.4,15.4L1.6,9.9C1.4,9.7,1,9.6,0.7,9.7\r\n                                C0.3,9.8,0.1,10.1,0,10.5c-0.1,0.4,0.1,0.8,0.4,1L7,17.8C7.2,17.9,7.4,18,7.7,18c0.3,0,0.5-0.2,0.7-0.5l9.5-15.9\r\n                                c0.2-0.3,0.2-0.7,0-1.1C17.7,0.2,17.4,0,17,0z"/>\r\n                        </svg>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="preview-button-container">\r\n            <button class="button-adjust user-selection" id="btn-adjust" aria-label="" title="" data-ref="adjust">\r\n                <svg x="0px" y="0px" viewBox="0 0 25 17.6" enable-background="new 0 0 25 17.6" xml:space="preserve" class="main-color">\r\n                    <g transform="translate(-20 -29.137)">\r\n                        <g transform="translate(20 29.137)">\r\n                            <path d="M9.3,2C9.1,0.7,7.9-0.2,6.7,0c-1,0.1-1.8,0.9-2,2H0v0.7h4.7c0.2,1.1,1.2,2,2.3,2\r\n                                c1.2,0,2.1-0.9,2.3-2H25V2H9.3z M7,4C6.1,4,5.4,3.3,5.4,2.4c0,0,0,0,0,0c0-0.9,0.7-1.7,1.6-1.7c0.9,0,1.6,0.7,1.6,1.6c0,0,0,0,0,0\r\n                                C8.6,3.2,7.9,4,7,4z"/>\r\n                            <path d="M17.7,6.4c-1.2,0-2.2,0.8-2.3,2H0v0.7h15.4c0.2,1.1,1.2,2,2.3,2c1.2,0,2.2-0.8,2.3-2h5V8.4\r\n                                h-4.9C19.9,7.2,18.9,6.4,17.7,6.4z M17.7,10.4c-0.9,0-1.6-0.7-1.6-1.6s0.7-1.6,1.6-1.6c0.9,0,1.6,0.7,1.6,1.6\r\n                                c0,0.8-0.6,1.6-1.4,1.6C17.8,10.4,17.8,10.4,17.7,10.4z"/>\r\n                            <path d="M9.1,12.8c-1.2,0-2.2,0.9-2.3,2.1H0v0.7h6.7c0.2,1.1,1.2,2,2.3,2c1.2,0,2.1-0.9,2.3-2H25\r\n                                v-0.7H11.4C11.3,13.7,10.3,12.8,9.1,12.8z M9.1,16.8c-0.9,0-1.6-0.7-1.6-1.6c0-0.9,0.7-1.6,1.6-1.6c0.9,0,1.6,0.7,1.6,1.6\r\n                                C10.7,16.1,10,16.8,9.1,16.8C9.1,16.8,9.1,16.8,9.1,16.8z"/>\r\n                        </g>\r\n                    </g>\r\n                </svg>\r\n            </button>\r\n            <button class="button-preview  control confirm-button  user-selection" id="btn-preview" aria-label="" title="" data-ref="preview" ref="preview"></button>\r\n        </div>\r\n\r\n\r\n    </div>\r\n</div>\r\n\r\n',
m='<div class="help-page desktop">\r\n    <div class="help-page-header">\r\n        <button  class="user-selection" id="btn-close" data-ref="close" aria-label="" title="">\r\n            <svg version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 18 18" enable-background="new 0 0 18 18" xml:space="preserve" class="help-page-close">\r\n                <path id="icons8-multiply" d="M1.1,0L0,1.1L7.9,9L0,16.9L1.1,18l8-7.9l7.9,7.9l1.1-1.1L10.1,9L18,1.1L16.9,0L9,7.9L1.1,0z"/>\r\n            </svg>\r\n        </button>\r\n    </div>\r\n    <div class="help-page-body">\r\n        <span class="help-content" ref="helpDesktopContent"></span>\r\n\r\n        <svg  x="0px" y="0px" viewBox="0 0 30 30" enable-background="new 0 0 30 30" xml:space="preserve" class="help-icon corner-icon">\r\n            <g transform="translate(-537 -642)">\r\n                <g>\r\n                    <rect x="537" y="649" width="16" height="1"/>\r\n                </g>\r\n                <g>\r\n                    <g transform="translate(553 642)">\r\n                        <circle fill="none" cx="7" cy="7" r="7"/>\r\n                        <circle fill="none" stroke-width="2" cx="7" cy="7" r="6" class="help-icon_stroke"/>\r\n                    </g>\r\n                    <rect x="559.5" y="654.5" width="1" height="17.5"/>\r\n                </g>\r\n            </g>\r\n        </svg>\r\n\r\n\r\n        <hr class="help-content-splitter">\r\n\r\n\r\n        <span class="help-content" ref="helpDesktopTools"></span>\r\n\r\n        <div class="help-icons">\r\n            <div class="help-icon">\r\n                <svg x="0px" y="0px" viewBox="0 0 29 29" enable-background="new 0 0 29 29" xml:space="preserve" class="help-icon">\r\n                    <path d="M28.3,0h-4.1c-0.4,0-0.8,0.3-0.8,0.8c0,0,0,0,0,0c0,0.4,0.3,0.8,0.7,0.8c0,0,0.1,0,0.1,0h2.3\r\n                        l-25,25v-2.3c0-0.4-0.3-0.8-0.8-0.8c0,0,0,0,0,0c-0.3,0-0.7,0.2-0.7,0.6c0,0,0,0.1,0,0.1v4.1C0,28.7,0.3,29,0.7,29c0,0,0.1,0,0.1,0\r\n                        h4.1c0.4,0,0.8-0.3,0.8-0.8c0,0,0,0,0,0c0-0.4-0.3-0.8-0.7-0.8c0,0-0.1,0-0.1,0H2.6l25-25v2.3c0,0.4,0.3,0.8,0.8,0.8c0,0,0,0,0,0\r\n                        c0.5,0,0.6-0.2,0.6-0.6V0.8C29,0.4,28.8,0.1,28.3,0C28.4,0,28.3,0,28.3,0z"/>\r\n                </svg>\r\n                <span ref="scale"></span>\r\n            </div>\r\n            <div class="help-icon">\r\n                <svg x="0px" y="0px" viewBox="0 0 30.6 30.6" enable-background="new 0 0 30.6 30.6" xml:space="preserve" class="help-icon">\r\n                    <g transform="translate(0.125 0.025)">\r\n                        <path d="M12.3,15.3c0-0.4-0.3-0.8-0.8-0.8c0,0,0,0,0,0h-9l1.6-1.6c0.3-0.3,0.3-0.8,0-1.1\r\n                            c-0.3-0.3-0.8-0.3-1.1,0c0,0,0,0,0,0l-2.9,2.9c-0.3,0.3-0.3,0.8,0,1.1L3,18.7c0.3,0.3,0.7,0.3,1,0c0.3-0.3,0.3-0.8,0-1.1L2.6,16h9\r\n                            C12,16,12.3,15.7,12.3,15.3z"/>\r\n                        <path d="M30.3,14.7l-2.9-2.9c-0.3-0.3-0.8-0.3-1.1,0c-0.3,0.3-0.3,0.8,0,1.1l1.6,1.6h-9\r\n                            c-0.4,0-0.8,0.3-0.8,0.8c0,0,0,0,0,0c0,0.5,0.5,0.7,0.9,0.7h9l-1.6,1.6c-0.3,0.3-0.3,0.8,0,1.1c0.3,0.3,0.7,0.3,1,0l2.9-2.9\r\n                            C30.6,15.5,30.6,15,30.3,14.7z"/>\r\n                        <path d="M17.6,26.3L16,28v-9c0-0.4-0.3-0.8-0.8-0.8c0,0,0,0,0,0c-0.4,0-0.8,0.3-0.8,0.7\r\n                            c0,0,0,0.1,0,0.1v9l-1.6-1.6c-0.3-0.3-0.8-0.3-1.1,0c-0.3,0.3-0.3,0.8,0,1.1l2.9,2.9c0.3,0.3,0.7,0.3,1,0l2.9-2.9\r\n                            c0.3-0.3,0.3-0.8,0-1.1C18.3,26.1,17.9,26.1,17.6,26.3z"/>\r\n                        <path d="M12.9,4.2l1.6-1.6v9c0,0.4,0.3,0.8,0.8,0.8c0,0,0,0,0,0c0.4,0,0.8-0.3,0.8-0.7\r\n                            c0,0,0-0.1,0-0.1v-9l1.6,1.6c0.3,0.3,0.7,0.3,1,0c0.3-0.3,0.3-0.8,0-1.1l-2.9-2.9c-0.3-0.3-0.8-0.3-1.1,0l-2.9,2.9\r\n                            c-0.3,0.3-0.3,0.8,0,1.1C12.1,4.5,12.6,4.5,12.9,4.2C12.9,4.2,12.9,4.2,12.9,4.2z"/>\r\n                    </g>\r\n                </svg>\r\n                <span ref="move"></span>\r\n            </div>\r\n            <div  class="help-icon">\r\n                <svg x="0px" y="0px" viewBox="0 0 30 30" enable-background="new 0 0 30 30" xml:space="preserve" class="help-icon">\r\n                    <path d="M25.6,4.4h2.2c0.4,0,0.7-0.3,0.7-0.7c0-0.4-0.3-0.7-0.7-0.7h-4.1C23.3,3,23,3.3,23,3.7v4.1\r\n                        c0,0.4,0.3,0.8,0.7,0.8c0.4,0,0.8-0.3,0.8-0.7c0,0,0,0,0-0.1V5.6c2.5,2.4,4,5.8,4.1,9.3c0,7.1-5.5,12.9-12.6,13.3\r\n                        c-0.7,0.4-1.1,0.7-1.1,1.1c0,0.4,0.3,0.7,0.7,0.7l0,0c8.1-0.4,14.5-7.1,14.4-15.2C29.9,10.9,28.3,7.2,25.6,4.4z"/>\r\n                    <path d="M6.3,21.5c-0.4,0-0.7,0.3-0.7,0.7v2.2c-2.6-2.5-4.1-6-4.1-9.6c0-7.3,5.9-13.3,13.2-13.3\r\n                        c0,0,0.1,0,0.1,0c0.4,0,0.7-0.3,0.7-0.7c0-0.4,0-0.7-0.7-0.7C6.6,0,0,6.6,0,14.8c-0.1,3.9,1.5,7.7,4.4,10.4H2.2\r\n                        c-0.4,0.4-0.7,0.7-0.7,1.1c0,0.4,0.3,0.7,0.7,0.7h4.1C6.7,27,7,26.7,7,26.3v-4.1C7,21.8,6.7,21.5,6.3,21.5z"/>\r\n                </svg>\r\n                <span ref="rotate"></span>\r\n            </div>\r\n            <div  class="help-icon">\r\n                <svg x="0px" y="0px" viewBox="0 0 30 25" enable-background="new 0 0 30 25" xml:space="preserve" class="help-icon">\r\n                    <g>\r\n                        <path d="M30,24.9H15.8L15.7,0L30,24.9z"/>\r\n                    </g>\r\n                    <g>\r\n                        <path d="M12.8,5.7v17.8H2.6L12.8,5.7 M14.3,0.1L0,25h14.2L14.3,0.1z"/>\r\n                    </g>\r\n                </svg>\r\n                <span ref="flip"></span>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n',y='<div class="help-page">\r\n    <div class="help-page-header">\r\n        <button  class="user-selection" id="btn-close" data-ref="close" aria-label="" title="">\r\n            <svg version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 18 18" enable-background="new 0 0 18 18" xml:space="preserve" class="help-page-close">\r\n                <path id="icons8-multiply" d="M1.1,0L0,1.1L7.9,9L0,16.9L1.1,18l8-7.9l7.9,7.9l1.1-1.1L10.1,9L18,1.1L16.9,0L9,7.9L1.1,0z"/>\r\n            </svg>\r\n        </button>\r\n    </div>\r\n    <div class="help-page-body">\r\n        <span ref="helpContent"></span>\r\n        <div class="help-icons">\r\n            <div class="help-icon">\r\n                <svg  x="0px" y="0px"viewBox="0 0 37.5 29.1" enable-background="new 0 0 37.5 29.1" xml:space="preserve" class="help-icon">\r\n                    <g transform="translate(0 0)">\r\n                        <path d="M3.8,0.2c-0.3-0.3-0.7-0.3-0.9,0c0,0,0,0,0,0L0.2,2.9C0,3,0,3.3,0.1,3.5\r\n                            c0.1,0.2,0.4,0.4,0.6,0.3h1.8v4.6c0,0.5,0.4,0.9,0.9,0.9c0.5,0,0.9-0.4,0.9-0.9V3.8H6c0.3,0,0.6-0.2,0.7-0.5c0-0.2,0-0.4-0.2-0.5\r\n                            L3.8,0.2z"/>\r\n                        <path d="M6,17.2H4.2v-4.3c0-0.5-0.4-0.9-0.9-0.9c-0.5,0-0.9,0.4-0.9,0.9l0,0v4.3H0.7\r\n                            c-0.3,0-0.5,0.2-0.6,0.5c-0.1,0.3,0,0.6,0.1,0.8l2.7,2.7c0.3,0.3,0.7,0.3,0.9,0c0,0,0,0,0,0l2.7-2.7c0.2-0.2,0.2-0.5,0.1-0.8\r\n                            C6.5,17.4,6.3,17.2,6,17.2z"/>\r\n                        <path d="M34.1,6.4c-0.4-1.1-1.4-1.7-2.6-1.7c-0.3,0-0.6,0.1-1,0.2c-0.3,0.1-0.6,0.3-0.9,0.5\r\n                            c-0.7-1.5-2.4-2.2-3.9-1.6c-0.7,0.2-1.2,0.7-1.6,1.3c-0.8-1-2.2-1.4-3.4-0.9c-0.8,0.3-1.5,0.8-1.9,1.6c-0.1,0.2-0.2,0.5-0.3,0.7\r\n                            c-0.6-1-1.4-2-2.2-2.9c-1.3-1.3-3.3-2.9-5-2.9c-0.3,0-0.6,0-0.9,0.1c-0.8,0.3-1.5,1-1.8,1.8C8.3,3.5,8.5,4.5,9,5.3\r\n                            c0.4,0.6,0.9,1,1.5,1.4c1.2,0.7,2.2,1.8,2.9,3c1.3,2.6,2.5,5.3,3.4,8l-3.4-1.7c-1.8-0.9-4-0.1-4.9,1.7s-0.1,4,1.7,4.9\r\n                            c0,0,3.1,1.7,7.3,3.6l0.7,0.3c2.7,1.3,5.3,2.5,8.3,2.5l0,0c1.5,0,3-0.3,4.3-0.8c5.3-1.9,6.1-5.2,6.5-8.4\r\n                            C37.9,16.8,34.2,6.8,34.1,6.4z M36.2,19.7c-0.3,3-1,5.7-5.6,7.3c-1.2,0.5-2.6,0.7-3.9,0.7l0,0c-2.7,0-5-1.1-7.7-2.4l-0.7-0.3\r\n                            c-4.2-2-7.2-3.6-7.3-3.6c-1.2-0.5-1.7-1.9-1.1-3.1c0.5-1.1,1.9-1.7,3-1.1c0,0,0,0,0,0l4.8,2.4c0.3,0.2,0.7,0,0.9-0.3\r\n                            c0.1-0.2,0.1-0.3,0-0.5c-1.1-3.4-2.5-6.6-4.1-9.8c-0.8-1.4-1.9-2.6-3.3-3.5c-0.5-0.3-0.9-0.6-1.2-1C9.8,4.1,9.7,3.5,9.9,3\r\n                            c0.1-0.5,0.5-0.8,1-1c0.9-0.3,2.6,0.6,4.5,2.5c1.5,1.8,2.8,3.7,3.8,5.8c0.2,0.3,0.6,0.5,0.9,0.3c0.3-0.2,0.4-0.5,0.3-0.8L19.8,8\r\n                            c-0.2-0.5-0.2-1.1,0.1-1.6c0.3-0.5,0.7-0.8,1.3-1c0.9-0.3,1.9,0.1,2.3,1.1c0,0,0,0,0,0l0.8,2.3c0.1,0.3,0.5,0.5,0.9,0.4\r\n                            c0.3-0.1,0.5-0.5,0.4-0.9l0,0l-0.4-1c-0.4-0.9,0.1-1.9,1-2.3c0.9-0.4,1.9,0.1,2.3,1c0,0,0,0,0,0.1l1,2.7c0.1,0.3,0.5,0.5,0.9,0.4\r\n                            c0.3-0.1,0.5-0.5,0.4-0.9l-0.6-1.6c0.2-0.3,0.5-0.5,0.8-0.6C31.2,6,31.4,6,31.5,6c0.6,0,1.1,0.3,1.3,0.8\r\n                            C33.9,9.6,36.4,17.4,36.2,19.7L36.2,19.7z"/>\r\n                    </g>\r\n                </svg>\r\n                <span ref="gestureStretch"></span>\r\n            </div>\r\n            <div class="help-icon">\r\n                <svg x="0px" y="0px" viewBox="0 0 24 40" enable-background="new 0 0 24 40" xml:space="preserve" class="help-icon">\r\n                    <g transform="translate(0)">\r\n                        <path d="M15.7,7.7c0.2,0.2,0.5,0.1,0.6-0.1c0.1-0.1,0.1-0.2,0.1-0.3V6.7h1.8v1.8h-0.4\r\n                            c-0.2,0-0.3,0.2-0.4,0.3c-0.1,0.2,0,0.4,0.1,0.5l1.1,1.4c0.1,0.1,0.2,0.2,0.3,0.2c0.1,0,0.3-0.1,0.3-0.2l1.1-1.3\r\n                            c0.1-0.2,0.1-0.4,0.1-0.6c-0.1-0.2-0.2-0.3-0.4-0.3h-0.4V6.7h1.8v0.6c0,0.2,0.2,0.4,0.4,0.4c0.1,0,0.2,0,0.3-0.1l1.3-1.1\r\n                            c0.2-0.2,0.2-0.4,0.1-0.6c0,0,0,0-0.1-0.1L22,4.8c-0.2-0.2-0.5-0.1-0.6,0.1c-0.1,0.1-0.1,0.2-0.1,0.3v0.3h-1.8V3.6H20\r\n                            c0.2,0,0.3,0,0.4-0.2c0.1-0.1,0-0.3-0.1-0.4l-1.1-1.3c-0.2-0.2-0.5-0.2-0.7,0c0,0,0,0,0,0L17.4,3c-0.1,0.1-0.1,0.3-0.1,0.4\r\n                            c0.1,0.2,0.2,0.2,0.4,0.2h0.4v1.8h-1.8V5.1c0-0.2-0.2-0.4-0.4-0.4c-0.1,0-0.2,0-0.3,0.1l-1.3,1.1c-0.2,0.2-0.2,0.4-0.1,0.6\r\n                            c0,0,0,0,0.1,0.1L15.7,7.7z"/>\r\n                        <path d="M21.1,17.8c-0.4,0-0.8,0.1-1.1,0.2c-0.1-1.7-1.6-3-3.3-2.9c-0.6,0-1.2,0.3-1.7,0.7\r\n                            c-0.4-1.2-1.5-2-2.7-2c-0.8,0-1.6,0.3-2.2,0.9l-0.1-3.8c2.7-1.9,3.3-5.7,1.4-8.4C9.4-0.2,5.6-0.8,2.9,1.1s-3.3,5.7-1.4,8.4\r\n                            c0.5,0.8,1.3,1.4,2.1,1.8l0.2,9.4c-0.6,0.3-1.1,0.7-1.6,1.2c-2.4,2.2-3.2,7.5-0.5,11.6c3,4.6,6.6,6.5,11.9,6.5\r\n                            c5.6,0,7.5-2.8,8.9-5.7C24,31.6,24,20.9,24,20.5C23.9,18.9,22.6,17.8,21.1,17.8z M21.4,33.7c-1.4,2.7-2.9,5-7.7,5s-8-1.7-10.8-5.9\r\n                            c-1.6-2.5-2.3-7.5,0.3-9.9c0.2-0.2,0.5-0.4,0.7-0.6l0.1,4.7c0,0.4,0.3,0.7,0.7,0.7c0,0,0,0,0,0c0.4,0,0.7-0.3,0.7-0.7L4.8,6.5\r\n                            c-0.1-1,0.6-1.9,1.5-2c1-0.1,1.9,0.6,2,1.5c0,0.2,0,0.3,0,0.5l0.4,12.5c0,0.4,0.3,0.7,0.7,0.6c0.3,0,0.6-0.2,0.6-0.6l0.3-2\r\n                            c0,0,0-0.1,0-0.1c-0.1-0.9,0.7-1.7,1.6-1.8c0,0,0,0,0.1,0c0.9,0,1.6,0.8,1.6,1.7c0,0,0,0.1,0,0.1v1.3c0,0.4,0.3,0.7,0.7,0.7\r\n                            s0.7-0.3,0.7-0.7c0-1,0.8-1.8,1.7-1.8c1,0,1.8,0.8,1.8,1.7c0,0,0,0.1,0,0.1v2.9c0,0.4,0.3,0.7,0.7,0.7s0.7-0.3,0.7-0.7v-1.7\r\n                            c0.3-0.2,0.7-0.3,1.1-0.3c0.8,0,1.4,0.6,1.5,1.3C22.6,23.5,22.4,31.7,21.4,33.7z"/>\r\n                    </g>\r\n                </svg>\r\n                <span ref="gestureMove"></span>\r\n            </div>\r\n            <div  class="help-icon">\r\n                <svg x="0px" y="0px"viewBox="0 0 47 33.3" enable-background="new 0 0 47 33.3" xml:space="preserve" class="help-icon">\r\n                    <g transform="translate(0 0)">\r\n                        <g>\r\n                            <path d="M43.6,10.5C43,9.2,41.5,8.5,40.1,9c-0.3,0.1-0.6,0.3-0.9,0.5c-0.5-1.1-1.6-1.8-2.8-1.8\r\n                                c-1.1,0-2.1,0.6-2.6,1.5c-0.6-0.7-1.4-1.1-2.3-1.1c-0.4,0-0.7,0.1-1.1,0.2c-0.8,0.3-1.5,0.8-1.9,1.6c-0.1,0.2-0.2,0.5-0.3,0.7\r\n                                c-0.6-1-1.3-2-2.2-2.9c-1.3-1.3-3.2-2.9-5-2.9c-0.3,0-0.6,0-0.9,0.1c-0.1,0-0.2,0-0.3,0c-2.1-1.8-4.8-2.7-7.6-2.8h-0.4V0.7\r\n                                c0-0.3-0.2-0.5-0.4-0.6c-0.3-0.1-0.6,0-0.8,0.1L8.1,2.9c-0.3,0.3-0.2,0.7,0,0.9l2.6,2.7c0.2,0.2,0.5,0.2,0.7,0.1\r\n                                c0.2-0.1,0.4-0.3,0.4-0.6V4h0.4c2.3,0,4.5,0.8,6.3,2.2c-0.1,0.2-0.1,0.3-0.2,0.5c-0.3,0.9-0.1,1.9,0.4,2.7c0.4,0.6,0.9,1,1.5,1.4\r\n                                c0.8,0.5,1.6,1.2,2.2,2c0.1,0.6,0.1,1.2,0.1,1.7c0,1.9-0.5,3.8-1.5,5.4c-1.2,0.2-2.2,1-2.6,2c-0.2,0.4-0.3,0.7-0.3,1.1\r\n                                c-0.5,0.3-1,0.6-1.5,0.9l0.8,1.5c0.3-0.2,0.7-0.3,1-0.5c0.3,0.8,1,1.5,1.7,1.8c0,0,3.1,1.7,7.3,3.6l0.7,0.3\r\n                                c2.7,1.3,5.2,2.5,8.2,2.5l0,0c1.5,0,2.9-0.3,4.3-0.8c5.2-1.9,6-5.2,6.4-8.4C47.3,21,43.7,11,43.6,10.5z M45.7,23.9\r\n                                c-0.3,3-1,5.7-5.5,7.3c-1.2,0.5-2.5,0.7-3.8,0.7l0,0c-2.6,0-4.9-1.1-7.6-2.4L28,29.3c-4.2-2-7.2-3.6-7.2-3.6\r\n                                c-1.1-0.6-1.6-1.9-1.1-3.1c0.5-1.1,1.8-1.6,3-1.1c0,0,0,0,0,0l4.8,2.4c0.2,0.1,0.5,0.1,0.7-0.1c0.2-0.2,0.3-0.5,0.2-0.7\r\n                                c-1.1-3.4-2.5-6.6-4.1-9.8c-0.8-1.4-1.9-2.6-3.3-3.5c-0.5-0.3-0.8-0.6-1.2-1c-0.3-0.4-0.4-1-0.2-1.5c0.1-0.5,0.5-0.8,0.9-1\r\n                                c0.9-0.3,2.6,0.6,4.4,2.5c1.5,1.8,2.7,3.7,3.8,5.8c0.2,0.3,0.5,0.4,0.9,0.3c0.3-0.1,0.5-0.5,0.4-0.8l-0.6-1.7\r\n                                c-0.2-0.5-0.2-1.1,0.1-1.6c0.3-0.5,0.7-0.8,1.2-1c0.2-0.1,0.4-0.1,0.6-0.1c0.7,0,1.4,0.5,1.7,1.2l0.8,2.3c0.1,0.3,0.5,0.5,0.8,0.4\r\n                                c0,0,0,0,0,0c0.3-0.1,0.5-0.5,0.4-0.9l-0.4-1.1c-0.2-0.4-0.1-0.9,0.1-1.4c0.2-0.4,0.6-0.8,1-0.9C36,9,36.2,9,36.4,9\r\n                                c0.7,0,1.4,0.5,1.7,1.2l1,2.7c0.1,0.3,0.5,0.5,0.8,0.4c0,0,0,0,0,0c0.3-0.1,0.5-0.5,0.4-0.9l-0.6-1.6c0.2-0.3,0.5-0.5,0.8-0.6\r\n                                c0.2-0.1,0.3-0.1,0.5-0.1c0.6,0,1.1,0.3,1.3,0.8C43.4,13.8,45.9,21.6,45.7,23.9L45.7,23.9z M23,20.1c0.7-1.3,1.1-2.6,1.3-4\r\n                                c0.9,2,1.8,4.3,2.3,5.8l-3.3-1.7C23.2,20.2,23.1,20.2,23,20.1z"/>\r\n                            <path d="M13.7,22.6c-0.2-0.2-0.5-0.2-0.8-0.1c-0.3,0.1-0.5,0.3-0.5,0.6v1.8h-0.2\r\n                                c-5.7,0-10.4-4.7-10.3-10.5c0-4,2.4-7.7,6-9.3L6.9,3.5C0.9,6.4-1.7,13.7,1.2,19.8c2,4.2,6.2,6.9,10.9,6.9h0.2v1.7\r\n                                c0,0.3,0.2,0.5,0.5,0.6c0.3,0.1,0.6,0,0.8-0.1l2.6-2.7c0.3-0.3,0.3-0.7,0-0.9L13.7,22.6z"/>\r\n                        </g>\r\n                    </g>\r\n                </svg>\r\n\r\n                <span ref="gestureRotate"></span>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n    <div class="help-page-footer">\r\n        <span ref="toolsHelp"></span>\r\n        <svg x="0px" y="0px" viewBox="0 0 27.8 41.8" enable-background="new 0 0 27.8 41.8" xml:space="preserve" class="arrow-pointer help-icon">\r\n        <path d="M26.1,0l-2.5,1c0,0.1,3.9,10.3-0.9,19.3c-3.1,5.9-9.3,10-18.2,12.3l4.3-8.8l-2.4-1.2L0,35.6l12.7,6.2\r\n            l1.2-2.4l-8.6-4.2c9.6-2.5,16.3-7.1,19.7-13.6C30.4,11.4,26.2,0.5,26.1,0z"/>\r\n        </svg>\r\n        <svg x="0px" y="0px" viewBox="0 0 25 17.6" enable-background="new 0 0 25 17.6" xml:space="preserve" class="tool-icon help-icon">\r\n            <g transform="translate(-20 -29.137)">\r\n                <g transform="translate(20 29.137)">\r\n                    <path d="M9.3,2C9.1,0.7,7.9-0.2,6.7,0c-1,0.1-1.8,0.9-2,2H0v0.7h4.7c0.2,1.1,1.2,2,2.3,2\r\n                        c1.2,0,2.1-0.9,2.3-2H25V2H9.3z M7,4C6.1,4,5.4,3.3,5.4,2.4c0,0,0,0,0,0c0-0.9,0.7-1.7,1.6-1.7c0.9,0,1.6,0.7,1.6,1.6c0,0,0,0,0,0\r\n                        C8.6,3.2,7.9,4,7,4z"/>\r\n                    <path d="M17.7,6.4c-1.2,0-2.2,0.8-2.3,2H0v0.7h15.4c0.2,1.1,1.2,2,2.3,2c1.2,0,2.2-0.8,2.3-2h5V8.4\r\n                        h-4.9C19.9,7.2,18.9,6.4,17.7,6.4z M17.7,10.4c-0.9,0-1.6-0.7-1.6-1.6s0.7-1.6,1.6-1.6c0.9,0,1.6,0.7,1.6,1.6\r\n                        c0,0.8-0.6,1.6-1.4,1.6C17.8,10.4,17.8,10.4,17.7,10.4z"/>\r\n                    <path d="M9.1,12.8c-1.2,0-2.2,0.9-2.3,2.1H0v0.7h6.7c0.2,1.1,1.2,2,2.3,2c1.2,0,2.1-0.9,2.3-2H25\r\n                        v-0.7H11.4C11.3,13.7,10.3,12.8,9.1,12.8z M9.1,16.8c-0.9,0-1.6-0.7-1.6-1.6c0-0.9,0.7-1.6,1.6-1.6c0.9,0,1.6,0.7,1.6,1.6\r\n                        C10.7,16.1,10,16.8,9.1,16.8C9.1,16.8,9.1,16.8,9.1,16.8z"/>\r\n                </g>\r\n            </g>\r\n        </svg>\r\n    </div>\r\n</div>\r\n\r\n',b=function(e,t,n){return function(r,i,o){var a=this,s={resourceLocation:ServerSide.Configuration.Urls.Resources},l=$(e.render(t,s)),u=$(e.render(n,s)),c=null;a.render=function(){c=$(i).hasClass("mobile")?u:l,i.append(c);var e=new ServerSide.Framework.UI.Templating.RefLangTemplater(r.Designer);e.Apply(),e.localize("button",c,["title","arial-label"],r.LanguageData),e.localize("img",c,["alt"],r.LanguageData),$("#btn-close",c).click(function(){a.toggleHelp()})},a.toggleHelp=function(){$(".help-page",i).toggleClass("help-page-open"),$(".toolbar",i).toggleClass("blur-page"),$(".main-container",i).toggleClass("blur-page")},a.render()}}(o,m,y),x=function(e,t,n){return function(r,i){function o(){f.toggleHelp()}function a(){function e(e){$(e,l).css("height","100%").css("opacity","1"),a()}function t(e){e&&f(),$(".controls-container",l).css("height","0").css("opacity","0")}function n(e){E=setInterval(function(){L=!0,o(e)},50)}function o(e,t){var n=t||C;switch(e){case S.UP:c.imageLayer.moveUp(n);break;case S.DOWN:c.imageLayer.moveDown(n);break;case S.LEFT:c.imageLayer.moveLeft(n);break;case S.RIGHT:c.imageLayer.moveRight(n)}}function a(){h.push({model:c.imageLayer.TakeSnapshot()})}function s(){clearInterval(E)}function u(e){c.imageLayer.SetAngle(-1*e*Math.PI/180),c.imageLayer.update()}function f(){if(0!==h.length){var e=h.splice(-1,1)[0];$("#scale-control",l).val(Math.floor(100*e.model.scale)),$("#rotate-control",l).val(p(e.model.rotation)),c.imageLayer.RevertGesture({snapshot:e.model})}}function p(e){var t=e/Math.PI*180;return t>=180?t=360-t:t*=-1,t}var h=[],g=l.width()||i.getRootContainer().width(),v=(.4*g+600)/724,m={maskOpacity:.6,aamd:d,scale:v,preview:!1,glowColor:"high-contrast"==r.getThemeName()?"#000000":"#a2a2a2"},y=$("#card-coverage-message",l),b=$("#btn-preview",l),x=r.Designer.Coverage.Image||r.Designer.Coverage,w=r.Layers.Card.Locked;c=$("#ssg-canvas",d)[0],ServerSide.Components.Canvas.Controller(c,m),function(){c.SetOverlay(r.Designer.DesignTemplate.UrlLarge),c.imageLayer.setCardCoverage(Math.round(x.Top),Math.round(x.Left),Math.round(x.Bottom),Math.round(x.Right)),c.imageLayer.setBleed(1,1),c.imageLayer.SetImage(r.Layers.Card.Url,r.Layers.Card.Reset),r.Layers.Card.Reset&&(c.imageLayer.reset(),r.Layers.Card.Reset=!1),c.imageLayer.addOnScaleListener(function(e){$("#scale-control",d).val(e)}),c.imageLayer.onRotateListener=function(e){var t=p(e);$("#rotate-control",d).val(t)},c.imageLayer.addOnImageLoadListener(function(){c.imageLayer.testCardCoverage()}),c.imageLayer.onCardCoverageChange=function(e){"Ignore"!==r.Designer.Coverage.Image.Type&&(e?y.hide():y.show(),"Error"===r.Designer.Coverage.Image.Type&&(e?b.removeAttr("disabled"):b.attr("disabled",!0)))},w?(l.addClass("locked"),$("#image-locked-message",l).show(),c.imageLayer.disable()):(l.removeClass("locked"),$("#image-locked-message",l).hide(),c.imageLayer.enable())}(),b.click(function(){i.showView(i.PAGES.PREVIEW)}),$("#btn-scale",l).click(function(){e("#scale-container")}),$("#btn-move",l).click(function(){e("#move-container")}),$("#btn-rotate",l).click(function(){e("#rotate-container")}),$("#btn-flip",l).click(function(){e("#flip-container")}),$(".controls-footer-button-close",l).click(function(){t(!0)}),$(".controls-footer-button-confirm",l).click(function(){t()}),$("#scale-control",l).on("input change",function(){c.imageLayer.scale(+this.value)}),$("#btn-scale-decrease",l).on("click",function(){var e=+$("#scale-control",l).val()-C;e<10||(c.imageLayer.scale(e),$("#scale-control",l).val(e))}),$("#btn-scale-increase",l).on("click",function(){var e=+$("#scale-control",l).val()+C;e>200||(c.imageLayer.scale(e),$("#scale-control",l).val(e))});var C=10,S={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right"},E=null,L=!1,_=new ServerSide.Lib.Utils.BrowserCheck;_.isTouchDevice(),_.isTouchDevice();$("#btn-move-up",l).on("touchstart mousedown",function(){n(S.UP)}).on("touchend mouseup",s).on("click",function(){L?L=!1:o(S.UP)}),$("#btn-move-down",l).on("touchstart mousedown",function(){n(S.DOWN)}).on("touchend mouseup",s).on("click",function(){L?L=!1:o(S.DOWN)}),$("#btn-move-right",l).on("touchstart mousedown",function(){n(S.RIGHT)}).on("touchend mouseup",s).on("click",function(){L?L=!1:o(S.RIGHT)}),$("#btn-move-left",l).on("touchstart mousedown",function(){n(S.LEFT)}).on("touchend mouseup",s).on("click",function(){L?L=!1:o(S.LEFT)}),$("#rotate-control",l).on("input change",function(){u(+this.value)}),$("#rotate-minus-180",l).click(function(){u(-180),$("#rotate-control",l).val(-180)}),$("#rotate-plus-180",l).click(function(){u(180),$("#rotate-control",l).val(180)}),$("#rotate-0",l).click(function(){u(0),$("#rotate-control",l).val(0)}),$("#btn-flip-horizontal",l).click(function(){c.imageLayer.flip()}),$("#btn-flip-vertical",l).click(function(){c.imageLayer.rotate(Math.PI.roundTo(2))}),$("#btn-reset",l).click(f),$("#btn-choose-image",l).click(function(){i.backToInitial()}),c.imageLayer.onGestureStart=function(){a()},$("#btn-adjust",l).click(function(){$(".designer-tools").toggleClass("mobile-open")}),$(".handle-circle",l).addClass("canvas-border-color")}var s={resourceLocation:ServerSide.Configuration.Urls.Resources},l=$(e.render(t,s)),u=null,c=null,d=i.getContainer(),f=new n(r,i.getRootContainer());this.render=function(e){var t=this,n=e||{};n.animated&&l.addClass("page-loading"),n.prepend?d.prepend(l):d.append(l);var a=new ServerSide.Framework.UI.Templating.RefLangTemplater(r.Designer);a.Apply(),a.localize("button",l,["title","arial-label"],r.LanguageData),a.localize("img",l,["alt"],r.LanguageData);var s='<span class="designer-title"> '+r.LanguageData.fotoPosition+' </span><button class="designer-info" id="btn-info" aria-label="'+r.LanguageData.info+'" title="'+r.LanguageData.info+'">                 <svg x="0px" y="0px" viewBox="0 0 18 18" enable-background="new 0 0 18 18" xml:space="preserve">\n                    <g transform="translate(-330 -19)">                        <path class="secondary-color" d="M339,37c-5,0-9-4-9-9s4-9,9-9s9,4,9,9C348,33,344,37,339,37C339,37,339,37,339,37z                             M339,20.1c-4.4,0-7.9,3.5-7.9,7.9c0,4.4,3.5,7.9,7.9,7.9c4.4,0,7.9-3.5,7.9-7.9C346.9,23.6,343.4,20.1,339,20.1z"/>                        <path class="main-color" d="M341,31.6c0,0.2-0.2,0.4-0.4,0.4h-3.1c-0.2,0-0.4-0.2-0.4-0.4c0,0,0,0,0,0v-0.8                            c0-0.2,0.2-0.4,0.4-0.4h0.4v-2.3h-0.4c-0.2,0-0.4-0.2-0.4-0.4c0,0,0,0,0,0v-0.8c0-0.2,0.2-0.4,0.4-0.4h2.3c0.2,0,0.4,0.2,0.4,0.4                            c0,0,0,0,0,0v3.5h0.4c0.2,0,0.4,0.2,0.4,0.4c0,0,0,0,0,0V31.6z"/>                        <path class="main-color" d="M340.2,25c0,0.2-0.2,0.4-0.4,0.4h-1.6c-0.2,0-0.4-0.2-0.4-0.4c0,0,0,0,0,0v-1.1                            c0-0.2,0.2-0.4,0.4-0.4h1.6c0.2,0,0.4,0.2,0.4,0.4c0,0,0,0,0,0V25z"/>                    </g>                </svg></button>';i.getToolbar().setTitle(s),l.on("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){l.hasClass("page-loading")?(l.removeClass("page-loading"),t.refresh()):l.hasClass("page-closing")&&(l.removeClass("page-closing"),$("#designer-page",d).remove(),u&&u())}),$("#btn-info",i.getToolbar().getToolbarContainer()).click(o)},this.refresh=function(){a()},this.closing=function(e){u=e,l.addClass("page-closing"),$("#ssg-canvas",l).empty()}}}(o,v,b),w='<div class="preview-page container" id="preview-page">\r\n\r\n    <div class="preview-container">\r\n        <div id="ssg-preview" class="ssg-preview"></div>\r\n    </div>\r\n\r\n    <div class="preview-text text-color" id="preview-text"></div>\r\n    <div class="preview-buttons">\r\n        <button class="preview-button-back secondary-text-color secondary-border-color user-selection" id="btn-preview-back" data-ref="redoDesign" aria-label="" title="" ref="redoDesign"></button>\r\n        <button class="preview-button-submit confirm-button user-selection" id="btn-preview-submit" data-ref="submitImage" aria-label="" title="" ref="submitImage"></button>\r\n    </div>\r\n\r\n\r\n</div>\r\n\r\n',C=function(e,t,n){return function(r,i){function o(){if(null!==r.Designer&&null!==r.Client){var e=c.getConfiguration();if(ServerSide.Lib.Utils.SsgSerialiser.serialise("conf",e),r.Designer.DataCapture.CustomDataCaptureEnabled){for(var t=0;t<r.Client.CustomDataCapture.length;t++)for(var n in d.values)r.Client.CustomDataCapture[t].Key.toLowerCase()===n&&(r.Client.CustomDataCapture[t].Value=d.values[n]);d.storeValues(r.Client.CustomDataCapture.toKeyValCollection(),!0)}i.showLoader(),r.submit(e,r.Client.CustomDataCapture,d.getValue("emailaddress"),null,null,function(){i.closeLoader()})}}var a={resourceLocation:ServerSide.Configuration.Urls.Resources},s=e(t.render(n,a)),l=null,u=i.getContainer(),c=null,d=new ServerSide.Framework.Utils.Passthrough;this.render=function(n){var a=n||{},c=this;a.animated&&s.addClass("page-loading"),a.prepend?u.prepend(s):u.append(s);var d=t.render(r.LanguageData.previewText,{subscriberName:r.Designer.Subscriber.Name||"KBC"});e("#preview-text",s).html(d);var f=new ServerSide.Framework.UI.Templating.RefLangTemplater(r.Designer);f.localize("button",s,["title","arial-label"],r.LanguageData),f.Apply(),s.on("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){s.hasClass("page-loading")?(s.removeClass("page-loading"),c.renderPreview()):s.hasClass("page-closing")&&(s.removeClass("page-closing").remove(),l&&l())}),e("#btn-preview-back",s).click(function(){i.showPrevious()}),e("#btn-preview-submit",s).click(o),i.getToolbar().setTitle(r.LanguageData.previewTitle)},this.renderPreview=function(){var t=s.width(),n=(.4*t+600)/724,i={aamd:u,scale:n,preview:!0};c=e("#preview-page  #ssg-preview",u)[0],ServerSide.Components.Canvas.Controller(c,i),c.SetOverlay(r.Designer.DesignTemplate.UrlLarge)},this.closing=function(t){l=t,s.addClass("page-closing"),e("#ssg-preview",s).empty()}}}(t,o,w),S='<div class="error-upload-page container" id="error-upload-page">\r\n    <div class="error-upload-container">\r\n        <svg x="0px" y="0px" width="512px" height="512px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve" class="error-upload-image">\r\n            <ellipse transform="matrix(1.640483e-02 -0.9999 0.9999 1.640483e-02 -5.1475 508.7497)" fill="#F5F5F5" cx="256" cy="257" rx="256" ry="256"/>\r\n            <path fill="#FFFFFF" d="M332.4,374.4H179.6c-21.9,0-38.4-7.6-46.5-21.6s-6.5-32.2,4.5-51.2l34.9-60.5l41.6-71.7\r\n                c11-19,25.9-29.6,42-29.6l0,0c16.1,0,30.7,10.2,42,29.5l38.2,66.4l38.2,66.4c11,19,12.6,37.2,4.5,51.2\r\n                C370.9,367.2,354.3,374.4,332.4,374.4z"/>\r\n            <path class="error-icon" d="M332.4,374.4H179.6c-21.9,0-38.4-7.6-46.5-21.6s-6.5-32.2,4.5-51.2l34.9-60.5l41.6-71.7\r\n                c11-19,25.9-29.6,42-29.6l0,0c16.1,0,30.7,10.2,42,29.5l38.2,66.4l38.2,66.4c11,19,12.6,37.2,4.5,51.2\r\n                C370.9,367.2,354.3,374.4,332.4,374.4z M256,148.3c-12.9,0-25.1,8.9-34.5,25.2L180,245.2l-35,60.5c-9.4,16.3-11,31.4-4.5,42.6\r\n                s20.5,17.3,38.9,17.3h153c18.6,0,32.5-6.1,38.9-17.3c6.5-11.2,4.9-26.3-4.5-42.6l-38.1-65.9l-38.2-66.4\r\n                C281.1,157.2,268.9,148.3,256,148.3z"/>\r\n            <path class="main-color" d="M256,287c-4.6-0.1-9-1.8-12.5-4.9c-0.8-0.7-1.3-1.6-1.4-2.6l-11.4-75.8c-0.1-0.4-0.1-0.9,0-1.3\r\n                c1.6-12.4,12-21.8,24.5-22.3c12.5,0.4,22.7,10,23.9,22.4c0.1,0.4,0.1,0.8,0,1.2l-10.2,75.8c-0.1,0.9-0.5,1.7-1.1,2.4\r\n                C264.8,285.2,260.5,287.1,256,287z M250.5,276.7c1,0.7,2.2,1.2,3.4,1.5c2.2,0.8,4.5,0.3,6.2-1.2l10.2-73.6\r\n                c-0.9-7.8-7.3-13.8-15.2-14.3c-8,0.5-14.5,6.5-15.8,14.4L250.5,276.7z"/>\r\n            <path class="main-color" d="M255.3,341.1c-12.7,0-23-10.3-23-23s10.3-23,23-23s23,10.3,23,23c0,0.1,0,0.2,0,0.3\r\n                C278.2,331,267.9,341.1,255.3,341.1z M255.3,303.8c-7.9,0-14.3,6.4-14.3,14.3s6.4,14.3,14.3,14.3s14.3-6.4,14.3-14.3l0,0\r\n                C269.7,310.2,263.2,303.8,255.3,303.8L255.3,303.8z"/>\r\n        </svg>\r\n        <div>\r\n            <h3 class="error-upload-title secondary-text-color" ref="uploadErrorTitle"></h3>\r\n            <p id="error-description" class="error-upload-description secondary-text-color"></p>\r\n        </div>\r\n        <button class="error-upload-button control confirm-button user-selection" id="btn-back" data-ref="back" aria-label="" title="" ref="back"></button>\r\n    </div>\r\n</div>\r\n\r\n',E=function(e,t){return function(n,r){var i={resourceLocation:ServerSide.Configuration.Urls.Resources},o=$(e.render(t,i)),a=null,s=r.getContainer();this.render=function(e){var t=e||{};t.animated&&o.addClass("page-loading"),t.prepend?s.prepend(o):s.append(o);var i=new ServerSide.Framework.UI.Templating.RefLangTemplater(n.Designer);i.Apply(),i.localize("button",o,["arial-label","title"],n.LanguageData),o.on("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){o.hasClass("page-loading")?o.removeClass("page-loading"):o.hasClass("page-closing")&&(o.removeClass("page-closing"),$("#error-upload-page",s).remove(),a&&a())}),r.getToolbar().setVisible(!1),$("#btn-back",o).click(function(){r.backToInitial()}),$("#error-description",o).text(t.errorDescription||"")},this.closing=function(e){r.getToolbar().setVisible(!0),a=e,o.addClass("page-closing")}}}(o,S),
L='<div class="error-upload-page container" id="error-upload-page">\r\n    <div class="error-upload-container">\r\n        <svg x="0px" y="0px" width="512px" height="512px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve" class="error-upload-image">\r\n            <ellipse transform="matrix(1.640483e-02 -0.9999 0.9999 1.640483e-02 -5.1475 508.7497)" fill="#F5F5F5" cx="256" cy="257" rx="256" ry="256"/>\r\n            <path fill="#FFFFFF" d="M332.4,374.4H179.6c-21.9,0-38.4-7.6-46.5-21.6s-6.5-32.2,4.5-51.2l34.9-60.5l41.6-71.7\r\n                c11-19,25.9-29.6,42-29.6l0,0c16.1,0,30.7,10.2,42,29.5l38.2,66.4l38.2,66.4c11,19,12.6,37.2,4.5,51.2\r\n                C370.9,367.2,354.3,374.4,332.4,374.4z"/>\r\n            <path class="error-icon" d="M332.4,374.4H179.6c-21.9,0-38.4-7.6-46.5-21.6s-6.5-32.2,4.5-51.2l34.9-60.5l41.6-71.7\r\n                c11-19,25.9-29.6,42-29.6l0,0c16.1,0,30.7,10.2,42,29.5l38.2,66.4l38.2,66.4c11,19,12.6,37.2,4.5,51.2\r\n                C370.9,367.2,354.3,374.4,332.4,374.4z M256,148.3c-12.9,0-25.1,8.9-34.5,25.2L180,245.2l-35,60.5c-9.4,16.3-11,31.4-4.5,42.6\r\n                s20.5,17.3,38.9,17.3h153c18.6,0,32.5-6.1,38.9-17.3c6.5-11.2,4.9-26.3-4.5-42.6l-38.1-65.9l-38.2-66.4\r\n                C281.1,157.2,268.9,148.3,256,148.3z"/>\r\n            <path class="main-color" d="M256,287c-4.6-0.1-9-1.8-12.5-4.9c-0.8-0.7-1.3-1.6-1.4-2.6l-11.4-75.8c-0.1-0.4-0.1-0.9,0-1.3\r\n                c1.6-12.4,12-21.8,24.5-22.3c12.5,0.4,22.7,10,23.9,22.4c0.1,0.4,0.1,0.8,0,1.2l-10.2,75.8c-0.1,0.9-0.5,1.7-1.1,2.4\r\n                C264.8,285.2,260.5,287.1,256,287z M250.5,276.7c1,0.7,2.2,1.2,3.4,1.5c2.2,0.8,4.5,0.3,6.2-1.2l10.2-73.6\r\n                c-0.9-7.8-7.3-13.8-15.2-14.3c-8,0.5-14.5,6.5-15.8,14.4L250.5,276.7z"/>\r\n            <path class="main-color" d="M255.3,341.1c-12.7,0-23-10.3-23-23s10.3-23,23-23s23,10.3,23,23c0,0.1,0,0.2,0,0.3\r\n                C278.2,331,267.9,341.1,255.3,341.1z M255.3,303.8c-7.9,0-14.3,6.4-14.3,14.3s6.4,14.3,14.3,14.3s14.3-6.4,14.3-14.3l0,0\r\n                C269.7,310.2,263.2,303.8,255.3,303.8L255.3,303.8z"/>\r\n        </svg>\r\n        <div>\r\n            <h3 class="error-upload-title secondary-text-color" ref="uploadErrorTitle"></h3>\r\n            <p id="error-description" class="error-upload-description secondary-text-color"></p>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n',I=function(e,t){return function(n,r){var i={resourceLocation:ServerSide.Configuration.Urls.Resources},o=$(e.render(t,i)),a=null,s=r.getContainer();this.render=function(e){var t=e||{};t.animated&&o.addClass("page-loading"),t.prepend?s.prepend(o):s.append(o);var i=new ServerSide.Framework.UI.Templating.RefLangTemplater(n.Designer);i.Apply(),i.localize("button",o,["arial-label","title"],n.LanguageData),o.on("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){o.hasClass("page-loading")?o.removeClass("page-loading"):o.hasClass("page-closing")&&(o.removeClass("page-closing"),$("#error-upload-page",s).remove(),a&&a())}),r.getToolbar().setVisible(!1),$("#error-description",o).text(t.errorDescription||"")},this.closing=function(e){r.getToolbar().setVisible(!0),a=e,o.addClass("page-closing")}}}(o,L),k='<div class="outer-container">\r\n\r\n\r\n\r\n    <svg class="spinner" viewBox="-100 -100 200 200">\r\n        <circle class="outer" cx="0" cy="0" r="90"></circle>\r\n        <circle class="inner" cx="0" cy="0" r="60"></circle>\r\n    </svg>\r\n\r\n    <div class="loading-text"></div>\r\n\r\n</div>\r\n',T=function(e,t,n){return function(r){function i(){var e=a[0].querySelector("svg.spinner"),t=e.querySelector(".outer"),n=e.querySelector(".inner");if("msAnimation"in getComputedStyle(n)){var r=2*Math.PI,i=+new Date;requestAnimationFrame(function e(){var o=+new Date,a=(o-i)%1e3/1e3;a<.25?n.setAttribute("transform","scale(-1 1) rotate("+(270-4*a*20)+")"):a<.75?n.setAttribute("transform","scale(-1 1) rotate("+(250-2*(a-.25)*320)+")"):n.setAttribute("transform","scale(-1 1) rotate("+(-70-4*(a-.75)*20)+")"),n.style.strokeDashoffset=a<.25?(.25+.55*a*4)*r*60:a<.75?(.8-.55*(a-.25)*2)*r*60:.25*r*60,t.setAttribute("transform","rotate("+(720*a-100)+")"),t.style.strokeDashoffset=a<.25?(.45+.45*a*4)*r*90:a<.5?(.9+.05*(a-.25)*4)*r*90:a<.6?(.95-.05*(a-.5)*10)*r*90:a<.9?(.9-.4*(a-.6)*10/3)*r*90:(.5-.05*(a-.9)*10)*r*90,requestAnimationFrame(e)})}}var o={resourceLocation:ServerSide.Configuration.Urls.Resources},a=e(t.render(n,o)),s=this;s.show=function(t){r.append(a),e(".loading-text",a).text(t||""),i()},s.close=function(){a.remove()}}}(t,o,k),M=function(e,t,n,r,i,o,a,s,l,u,c){return function(d,f,p){function h(){if(!(L.length<2)){var e=L[L.length-1],t=L[L.length-2];E[e].closing(function(){E[t].render({prepend:!0,animated:!0}),x=t,L.splice(-1,1),g()})}}function g(){C.enableBackButton(L.length>1)}function v(){d.close()}var m=this,y={resourceLocation:ServerSide.Configuration.Urls.Resources},b=e(t.render(n,y)),x=null,w=null,C=null,S=new c(f);m.PAGES={INITIAL:"initial",GALLERY:"gallery",DESIGNER:"designer",PREVIEW:"preview",ERROR_UPLOAD_PAGE:"error-upload",ERROR_PAGE:"error"},m.getToolbar=function(){return C};var E={},L=[];if(!d)throw"App should be defined";if(!f)throw"Root scope should be defined";this.showView=function(e,t){if(e){if(e===x)return;if(!E[e])throw new Error("Page:"+e+" doesn't exist");E[x].closing(function(){var n=t||{};n.animated=!0,E[e].render(n),x=e,L.push(x),g()})}else x=m.PAGES.INITIAL,E[x].render(),L=[],L.push(x),g()},this.backToInitial=function(){var e=L[L.length-1];E[m.PAGES.INITIAL].render({prepend:!0,animated:!0}),E[e].closing(),x=m.PAGES.INITIAL,L=[],L.push(x),g()},this.showPrevious=h,this.getContainer=function(){return w};var C;this.render=function(){f.empty(),C=new r(d,f,{onBack:h,onClose:v}),C.render(),f.append(b),w=e("#main-container",f),E[m.PAGES.INITIAL]=new i(d,m),E[m.PAGES.GALLERY]=new o(d,m),E[m.PAGES.DESIGNER]=new a(d,m),E[m.PAGES.PREVIEW]=new s(d,m),E[m.PAGES.ERROR_UPLOAD_PAGE]=new l(d,m),E[m.PAGES.ERROR_PAGE]=new u(d,m),S=new c(f),m.showView()},this.closing=function(e){},m.showLoader=function(e){S.show(e)},m.closeLoader=function(){S.close()},m.getRootContainer=function(){return f},m.showError=function(e){m.closeLoader(),m.showView(m.PAGES.ERROR_PAGE,{errorDescription:e.errorMessage})}}}(t,o,a,d,p,g,x,C,E,I,T),A=function(e){return function(e,t){function n(t){return e.DesignerType===e.Modes.UploadOnly?t(a):a.length>0?t(a):void e.Designer.GetCategories(function(n){if(a=n,n){var l=0;n.forEach(function(a){a.GetCategory(function(u){if(l++,a.images=u.Images,a.ImageType===i&&(e.Designer.ClipArtEnabled=!0),l===n.length){if(!s){var c=_.filter(n,{ImageType:o,Knockout:!1});c.length>0&&r.setSelectedCategory(c[0].Id)}t(n)}})})}})}var r=this,i="Clip Art",o="Standard",a=[],s=null;r.setSelectedCategory=function(e){s=e},r.getSelectedCategory=function(){return _.find(a,{Id:s})},r.getAllStandardCategories=function(){return _.chain(a).filter({ImageType:o,Knockout:!1}).sortBy(function(e){return e.Order}).value()},r.getClipArtCategories=function(){return _.chain(a).filter({ImageType:i,Knockout:!1}).sortBy(function(e){return e.Order}).value()},r.addCustomImage=function(t,n,i){var s=_.find(a,{Id:-1});s||(s={Id:-1,Locked:!1,Name:e.LanguageData.myImages,ImageType:o,Knockout:!1,Order:100,images:[]},a.push(s)),s.images.push({Id:t,Name:n,LargeImage:i,Locked:!1}),r.setSelectedCategory(-1)},function(e){n(function(){e&&e()})}(t)}}(),D=function(e,t,n,r,i){return function(o){function a(e){x.HandoverKey=e||n.getHandoverKey(),x.ClientId=n.getClientId(),D=new r(x,C),x.HandoverKey||_.fireEvent("onerror","InvalidHandoverKey"),u(),l()}function s(){var e={Info:function(){},Action:function(){}};"function"==typeof APITracker&&(e=new APITracker,e.SetKeys(x.HandoverKey,x.ClientId,x.Designer.Tracking)),"object"!=typeof APITrackerConfig&&(APITrackerConfig={Keys:{},Messages:{}}),window.Tracker=e}function l(){E.GetDesigner(x.HandoverKey,function(e){function r(e){x.Client=e,x.ClientId=e.CardImageId,d("onload"),s(),h(),a();var t=x.getThemeName();C.addClass(t).addClass("border-top-color"),o(function(){x.GalleryManager=new i(x,function(){x.renderApp()})}),_.fireEvent("onload")}function o(e){if(x.LanguageData)return e(x.LanguageData);x.LanguageId=x.Designer.Language,new ServerSide.Framework.UI.Templating.RefLangTemplater(x.Designer).getLanguageSet(function(t){x.LanguageData=t,e(t)})}function a(){x.Designer.DesignerType===x.Modes.GalleryOnly?x.DesignerType=x.Modes.GalleryOnly:x.Designer.Galleries.Enabled?x.DesignerType=x.Modes.Standard:x.DesignerType=x.Modes.UploadOnly}function l(t){0!==t.State?e.CreateClient(function(e){r(e)}):r(t)}function u(){ServerSide.Lib.Utils.Log("Creating new client"),e.CreateClient(function(e){r(e)})}if(!e)return x.redirectTerminate("Error","The api returned a null designer.");x.Designer=e,T.orientation&&(x.Designer.Orientation.Type=T.orientation),x.Designer.Orientation=n.getOrientation(x.Designer.Orientation),x.Designer.Language=T.languageId||ServerSide.Lib.Utils.SsgSerialiser.deserialise("languageid")||x.Designer.Language,x.Designer.DataCapture.showDCPage=b,_handback=new t(e.Handback,T.handback.url,{Handover_Key:x.HandoverKey}),x.getThemeName=function(){var e=T.theme&&-1!=x.Themes.indexOf(T.theme)?T.theme:"default";return e},x.ClientId?function(t){ServerSide.Lib.Utils.Log("Getting client : "+t),e.GetClient(t,function(e){null!==e?l(e):u()})}(x.ClientId):u()})}function u(){if(o&&(c(),x.ClientId=o.ClientId||null,T=o.options)){!0===T.startHidden&&(w.style.display="none"),T.handback=T.handback||{},T.emailAddress&&I.setValue("emailaddress",T.emailAddress,!0),"object"==typeof T.passthrough&&I.storeValues(T.passthrough,!0);var e=window.location.href,t=e.toLocaleLowerCase().indexOf("theme");t>-1&&(T.theme=decodeURIComponent(e.substr(t+"theme".length+1).split("&")[0])),x.options=T}}function c(){for(var e in o.callbacks)"function"==typeof o.callbacks[e]&&_.registerEventHandler(e,o.callbacks[e])}function d(e){for(var t=0;t<k[e].length;t++)k[e][t]()}function f(e,t,n,r,i,o,a,s){var l="v"===x.Designer.Orientation.Type;n&&(ServerSide.Lib.Utils.Log("Submitting design "+x.Client.CardImageId+" layer "+A+" :- top : "+n.top+", left : "+n.left+", bottom : "+n.bottom+", right : "+n.right+", rotation : "+n.rotation+", flip : "+n.flip+", isVertical : "+l),e.Configuration.Top=n.top,e.Configuration.Left=n.left,e.Configuration.Bottom=n.bottom,e.Configuration.Right=n.right,e.Configuration.Rotation=n.rotation,e.Configuration.Flip=n.flip?1:0,e.Order=n.order),x.Layers[t].Data&&""!==x.Layers[t].Data.PriceCode&&_handback.addParameter("StockImageCode",x.Layers[t].Data.PriceCode),"Stock"!==x.Layers[t].Type&&(M=x.Layers[t].Type),++A===x.Layers.Length&&(x.Client.CustomDataCapture=null===r||void 0===r?[]:r,i=i||T.emailAddress,i&&(x.Client.EmailAddress=i,_handback.addParameter("emailaddress",i)),o&&(x.Client.IsPublicImage=o),a&&(x.Client.SaveForLater=a),_handback.addParameter("ImageType","Stock"===M?"Gallery":M),_handback.addParameter("LanguageId",x.Designer.Language),x.Client.LanguageId=x.Designer.Language,x.Client.Submit(function(e){if(null===e)ServerSide.Lib.Utils.Log('Submitted image "'+x.Client.CardImageId+'" : API response was null'),Tracker.Info(APITrackerConfig.Keys.Submit,APITrackerConfig.Messages.SubmitError),x.redirectTerminate("error","API response was null.");else{var t=e.CardImageId||x.ClientId;_handback.addParameter("CardImageId",t),I.storeValues(y(e.CustomDataCapture),!0),ServerSide.Lib.Utils.SsgSerialiser.clear("CardImageId"),ServerSide.Lib.Utils.SsgSerialiser.clear("handover_key"),ServerSide.Lib.Utils.SsgSerialiser.clear("ViewData"),Tracker.Info(APITrackerConfig.Keys.Submit,APITrackerConfig.Messages.SubmitSuccess),"function"==typeof s&&s(t),_.contains("onsubmit")&&_.fireEvent("onsubmit",_handback.getHandbackData()),!1!==s&&!1!==T.handback.enabled&&_handback.doHandback()}}))}function p(e,t,n,r,i,o,a){"Stock"===x.Layers[e].Type?function(e,t){x.Client.AddStockImageLayer(x.Layers[e].Id,function(s){f(s,e,t,n,r,i,o,a)})}(e,t):"Custom"===x.Layers[e].Type||"Facebook"===x.Layers[e].Type?function(e,t){x.Client.AddCustomImageLayer(x.Layers[e].Id,function(s){f(s,e,t,n,r,i,o,a)})}(e,t):"Text"===x.Layers[e].Type?function(e,t){x.Client.AddTextLayer(x.Layers[e].Lines,x.Layers[e].Style,t.Text,function(s){f(s,e,t,n,r,i,o,a)})}(e,t):(ServerSide.Lib.Utils.Log("Image type "+_imageType+" was not recognised"),x.redirectTerminate("Error","Image type "+_imageType+" was not recognised"))}function h(){ServerSide.Lib.Utils.SsgSerialiser.serialise("CardImageId",x.ClientId),ServerSide.Lib.Utils.SsgSerialiser.serialise("handover_key",x.HandoverKey),ServerSide.Lib.Utils.SsgSerialiser.serialise("Layers",x.Layers)}function g(e,t,n,r,i,o,a){ServerSide.Lib.Utils.Log("set"+n+"Image"),t=t||"Card";var s=x.Layers[t];s||x.Layers.Length++;var l=s||{};l.Type=n,l.Url=r,l.Id=e,l.Locked=i||!1,l.Data=o||null,l.Reset=a||!1,"Custom"===n&&(l.Uploads=l.Uploads||[],l.Uploads.push(l.Id)),x.Layers[t]=l,h()}function v(t,n){var r=x.Layers.Text||{};e.isEmptyObject(r)&&x.Layers.Length++,r.Lines=t,r.Style=n,r.Type="Text",x.Layers.Text=r,h()}function m(e,t,n,r){r()}function y(e){simpleDc={};for(var t=0;t<e.length;t++)!0===e[t].HandbackValue&&(simpleDc[e[t].Key]=e[t].Value);return simpleDc}function b(){var e=x.Designer.DataCapture,t=!e.HideEmailCapture&&("Enabled"===e.EmailCapture||"CustomOnly"===e.EmailCapture&&"Custom"===x.Layers.Card.Type),n=e.HasCompetition&&"Custom"===x.Layers.Card.Type,r=!1;if(x.Designer.DataCapture.CustomDataCaptureEnabled)for(var i=0;i<x.Client.CustomDataCapture.length;i++)if(x.Client.CustomDataCapture[i].Display){r=!0;break}return t||r||n}var x=this,w=null,C=null,S=null,E=ServerSide.Network.Connectors.PCS.Designer,L=ServerSide.Network.RestClient,_=new ServerSide.Framework.Eventing.EventCollection,I=ServerSide.Framework.Utils.Passthrough(),k=[],T={},M="Stock",A=0;k.onload=[];var D=null;this.Designer=null,this.Client=null,this.ClientId=null,this.HandoverKey=null,this.Layers={},this.Layers.Length=0,x.GalleryManager=null,x.Modes={GalleryOnly:"GalleryOnly",UploadOnly:"UploadOnly",Standard:"Standard"};var H={KBC:"kbc","KBC Brussels":"kbc-brussels",CBC:"cbc"};x.Themes=["default","high-contrast","private-banking"],this.init=function(t,n){w=n,C=e(w),a(t)},this.hide=function(){w.style.display="none"},this.show=function(){w.style.display="block"},this.close=function(){ServerSide.Lib.Utils.SsgSerialiser.clearAll(),w.innerHTML="",_.contains("onclose")&&_.fireEvent("onclose",{})},this.setActiveTab=function(t){e(".aam-designer-init #modeTabs").find(".tabs").removeClass("activeTab"),t.addClass("activeTab")},this.redirect=function(e,t,n){return m(e,t,n,h)},this.showPage=function(e){S?S.closing(function(){S=null[e||"initial"],S.render()}):(S=null[e||"initial"],S.render())},this.renderApp=function(){D.render()},this.redirectTerminate=function(e,t){D.showError({errorMessage:t}),_.fireEvent("onerror",t)},this.redirectToProxyProduct=function(){if(null!==x.Designer.Orientation.ProxyHandoverKey){var e=ServerSide.Lib.Utils.SsgSerialiser.deserialise("passthrough");ServerSide.Lib.Utils.SsgSerialiser.clearAll(),window.location=window.location.href+"/../../Start.aspx?handover_key="+x.Designer.Orientation.ProxyHandoverKey+(e?"&"+e:"")}},this.addLoadSubscriber=function(e){null!==x.Designer&&e(),k.onload.push(e)},this.uploadCustomImageUrl=function(e,t){x.Client.UploadImageByUrl(e,t)},this.setText=function(e,t){v(e,t)},this.setFacebookImage=function(e,t){g(e,"Facebook",t)},this.setCustomImage=function(e,t,n,r,i,o){Tracker.Info(APITrackerConfig.Keys.ImageSelection,String.format(APITrackerConfig.Messages.UploadCustom,e)),g(e,o,"Custom",t||L.MakeRestPath("designers",x.HandoverKey,"clientdesigns",x.ClientId,"uploads",e+".png"),n,r,i)},this.setStockImage=function(e,t,n,r,i,o){Tracker.Info(APITrackerConfig.Keys.ImageSelection,String.format(APITrackerConfig.Messages.UploadGallery,e)),g(e,o,"Stock",t||L.MakeRestPath("designers",x.HandoverKey,"images",e+".png"),n,r,i)},this.submit=function(e,t,n,r,i,o){e=e||[];var a=0;for(var s in x.Layers)if("object"==typeof x.Layers[s]){var l=e[a];p(s,l,t,n,r,i,o),a++}},x.getLogoFileName=function(){return H[x.Designer.Subscriber.Name]||H.KBC}}}(t,n,r,M,A),window.ServerSide=function(e){var t=function(e,t){return e===t.length-1},n=function(e){for(var t in e)if("object"==typeof e[t]&&null!==e[t])n(e[t]);else try{Object.defineProperty(e,t,{value:e[t],writable:!1})}catch(e){}};return e.exports=function(r,i,o,a){a&&n(i);for(var s=r.split("."),l=e,u="",c=0;c<s.length;c++)u=s[c],t(c,s)?l[u]=i:(l[u]=l[u]||{},l=l[u]);return o&&(window[o]=i),e},e.requires=function(t){for(var n=t.split("."),r=e,i="",o=function(){throw"The module 'ServerSide."+t+"' is not loaded"},a=0;a<n.length;a++)i=n[a],function(e,t){t in e||o()}(r,i),r=r[i];return r},e}(window.ServerSide||{});var R="undefined"!=typeof HTMLElement?HTMLElement.prototype:Element.prototype;R.surrounds=function(e,t){var n=this.getBoundingClientRect();return n.left+window.pageXOffset<=e&&n.right+window.pageXOffset>=e&&n.top+window.pageYOffset<=t&&n.bottom+window.pageYOffset>=t},R.getTopLeft=function(){var e=0,t=0,n=this;do{isNaN(n.offsetLeft)||(e+=n.offsetLeft,t+=n.offsetTop)}while(n=n.offsetParent);return{left:e,top:t}},R.fadeOut=function(e,t){var n=this,r=1,i=function(){r-=.1,n.style.opacity=r,r>0?setTimeout(i,50):"function"==typeof t&&t()};setTimeout(i,50)},R.fadeIn=function(e,t){var n=this,r=0,i=function(){r+=.1,n.style.opacity=r,r<1?setTimeout(i,50):"function"==typeof t&&t()};setTimeout(i,50)},R.off=function(){this.style.pointerEvents="none"},R.on=function(){this.style.pointerEvents="auto"},R.getVertices=function(e,t,n){var r=void 0===n?this.getBoundingClientRect():n;if(0==e&&1==t)return[{x:r.left,y:r.bottom},{x:r.right,y:r.top},{x:r.left,y:r.top},{x:r.right,y:r.bottom}];var i=this.clientWidth*t/2,o=this.clientHeight*t/2,a={x:r.width/2+r.left,y:r.height/2+r.top},s=Math.cos(e*Math.PI/180),l=Math.sin(e*Math.PI/180),u={x:Math.round(i*s-o*l+a.x)+1,y:Math.round(i*l+o*s+a.y)+1},c={x:Math.round(-(i*s-o*l)+a.x)-1,y:Math.round(-(i*l+o*s)+a.y)-1};return[u,{x:Math.round(-(i*s+o*l)+a.x)-1,y:Math.round(-(i*l-o*s)+a.y)+1},c,{x:Math.round(i*s+o*l+a.x)+1,y:Math.round(i*l-o*s+a.y)-1}]},R.getLines=function(e,t){return Math.verticesToLines(this.getVertices(e,t))},R.appendHtml=function(e){var t=document.createElement("div");t.innerHTML=e;for(var n=0;n<t.childNodes.length;n++)this.appendChild(t.removeChild(t.childNodes[n]))},R.prependHtml=function(e){var t=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=e;n.firstChild;)t.appendChild(n.firstChild);this.insertBefore(t,this.firstChild)},"function"!=typeof document.getElementsByClassName&&(document.getElementsByClassName=function(e){for(var t,n=new RegExp("(?:^|\\s)"+e+"(?:$|\\s)"),r=document.getElementsByTagName("*"),i=[],o=0;null!=(t=r[o]);o++){var a=t.className;a&&-1!=a.indexOf(e)&&n.test(a)&&i.push(t)}return i}),window.addOnloadAction=function(e){if("function"==typeof window.onload){var t=window.onload,n=function(){t(),e()};window.onload=n}else window.onload=e},window.location.pagename=function(){return location.pathname.substring(location.pathname.lastIndexOf("/")+1)}(),window.location.pageurl=function(){return[location.protocol,"//",location.host,location.pathname].join("")}(),function(){var e,t=null,n=[],r=[];window.onresize=function(){if(t=window.innerWidth,e!==t)for(var r=0;r<n.length;r++)"function"==typeof n[r]&&n[r]();e=t},window.addOnResizeHandler=function(e,t){-1===r.indexOf(e)&&(r.push(e),n.push(t))}}(),Array.prototype.move=function(e,t){Array.isArray(this)&&this.splice(t,0,this.splice(e,1)[0])},String.format=function(){var e=arguments[0];if(null!=e&&void 0!==e)for(var t=0;t<arguments.length-1;t++){var n=new RegExp("\\{"+t+"\\}","gm");e=e.replace(n,arguments[t+1])}return e},window.hexToRgb=function(e){var t=function(e){return"#"==e.charAt(0)?e.substring(1,7):e};return{r:parseInt(t(e).substring(0,2),16),g:parseInt(t(e).substring(2,4),16),b:parseInt(t(e).substring(4,6),16)}},window.rgbToHex=function(e){var t=e.split("(")[1].split(")")[0];return t=t.split(","),"#"+t.map(function(e){return e=parseInt(e).toString(16),1==e.length?"0"+e:e}).join("")},window.secondsToTime=function(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),r=Math.floor(e-3600*t-60*n);return t<10&&(t="0"+t),n<10&&(n="0"+n),r<10&&(r="0"+r),t&&(t="00"),t+":"+n+":"+r},window.bytesToSize=function(e){var t=["Bytes","KB","MB"];if(0==e)return"n/a";var n=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return(e/Math.pow(1024,n)).toFixed(1)+" "+t[n]},window.ServerSide=function(e){var t={Urls:{FacebookApi:"https://graph.facebook.com"},Images:{DefaultGallerySize:220},DataCapture:{MaxRows:6},Canvas:{zIndex:{layer:0,template:2e3,bleed:4e3,overlay:6e3},StandardCardSize:{width:241,height:153}}};return e.exports("Configuration",t,null,!0)}(window.ServerSide||{}),window.ServerSide=function(e){var t={that:this,extend:function(e,t){e=e||{};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},options:function(e){var t=function(t){return function(n){return"object"==typeof e&&n in e&&typeof e[n]===t}};return{isNullOrEmpty:function(t){return null===e||"object"!=typeof e||!(t in e)||""===e[t]},isNotNullString:t("string"),isNotNullObject:t("object"),isNotNullNumber:t("number"),isNotNullBoolean:t("boolean"),insertAll:function(t,n){var r=!1;for(var i in t){for(var o in e)if(i==o){r=!0;break}(r&&n||!r)&&(e[i]=t[i])}}}},SsgUrl:{parseQuery:function(e,t,n){if(null==e||""==e)return{};e=e.replace("?","");for(var r=e.split("&"),i={},o=0;o<r.length;++o){var a=r[o].split("=");if(2==a.length){var s=a[1].replace(/\+/g," ");i[n?a[0].toLowerCase():a[0]]=!1===t?s:decodeURIComponent(s)}}return i},createQuery:function(e){var t=[];for(var n in e)t.push(n+"="+e[n]);return t.join("&")},getPageName:function(){var e=window.location.pathname;return e.substring(e.lastIndexOf("/")+1).replace(".aspx","")},getParameterByName:function(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n;""!==location.hash&&(n=location.hash.match(new RegExp(e+"=([^&]*)"))),""!==location.search&&(n=location.search.match(new RegExp("[\\?&]"+e+"=([^&#]*)")));var r=null==n?"":n[1].replace(/\+/g," ");return!1===t?r:decodeURIComponent(r)}},POSTRedirect:function(e){var n=document.createElement("form");n.method="post",n.action=e;var r=[];this.addValue=function(e,t){e in r?r[e].value=t:n.appendChild(function(){var n=document.createElement("input");return n.type="hidden",n.name=e,n.value=t,r[e]=n,n}())},this.submit=function(){document.body.appendChild(n);var e=t.SsgSerialiser.deserialise("breakframe");"true"!==e&&"True"!==e&&!0!==e||(n.target="_top"),n.submit()}},GETRedirect:function(e){var n={};this.addValue=function(e,t){n[e]=t},this.submit=function(){var r=t.SsgSerialiser.deserialise("breakframe");"true"===r||"True"===r||!0===r?window.top.location=e+(-1===e.indexOf("?")?"?":"&")+t.SsgUrl.createQuery(n):window.location=e+(-1===e.indexOf("?")?"?":"&")+t.SsgUrl.createQuery(n)}},SsgSerialiser:{id:"",prefix:"SSG",viewData:{},init:function(e){this.clearAll(),this.id=e||"",this.prefix=this.prefix+"."+this.id.toLowerCase()+"."},prefixed:function(e){return this.prefix+e.toLowerCase()},serialise:function(e,t){this.viewData[this.prefixed(e)]=t},deserialise:function(e){return this.viewData[this.prefixed(e)]||null},contains:function(e){return this.prefixed(e)in this.viewData},clearAll:function(){this.viewData={}},clear:function(e){delete this.viewData[this.prefixed(e)]}},defer:function(e,t){var n=t.until;if(n())e();else var r=t.pause||100,i=setInterval(function(){n()&&(window.clearInterval(i),e())},r)},BreakFrame:function(){var e=null;try{e=window.parent.location.href}catch(e){}null!==e&&void 0!==e&&e===document.location.href||(window.parent.location=document.URL)},BreakFrameIfParameterTrue:function(e){var n=e||"breakframe",r=t.SsgSerialiser.deserialise(n);"true"!==r&&"True"!==r&&!0!==r||t.BreakFrame()},Log:function(e){if(/debug/.test(window.location.search)){var n="http://devserver.serversidegraphics.com/tom/remotelogger/logging/debug?message=%1 : %2 : %3".replace("%1",(new Date).getTime());n=n.replace("%2",t.SsgSerialiser.deserialise("CardImageId")||"no-id"),n=n.replace("%3",encodeURIComponent(e)),$.get(n,function(){})}},BrowserCheck:function(){function e(e){e=(e||navigator.userAgent).toLowerCase();var t=e.match(/android\s([0-9\.]*)/);return!!t&&parseFloat(t[1])}function t(){if(/iP(hone|od|ad)/.test(navigator.platform)){var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return!!e&&parseInt(e[1],10)}}function n(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var r=e.indexOf("Edge/");return r>0&&parseInt(e.substring(r+5,e.indexOf(".",r)),10)}return this.isVersionSupported=function(r){var i=!0,o=r||{};if(o.android){var a=e();a&&(i=a>=o.android)}if(o.ios){var s=t();s&&(i=s>=o.ios)}if(o.ie){var l=n();l&&(i=l>=o.ie)}return i},this.isIOS=function(){var e=t();return void 0!==e&&!1!==e},this.isAndroid=function(){return!1!==e()},this.isTouchDevice=function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch},this}};return e.exports("Lib.Utils",t)}(window.ServerSide||{}),Math.verticesToLines=function(e){for(var t=[],n=0;n<e.length;n++){var r=n+1;r===e.length&&(r=0),t.push({p1:e[n],p2:e[r]})}return t},Math.bytesToSize=function(e){if(0==e)return"n/a";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return 0==t?e:(e/Math.pow(1024,t)).toFixed()},Math.getIntersection=function(e,t){function n(e,t,n){if(null==n.x||null==n.y)return!1;var r=t.x>e.x?t.x:e.x,i=t.x<=e.x?t.x:e.x,o=t.y>e.y?t.y:e.y,a=t.y<=e.y?t.y:e.y;return i<=n.x&&r>=n.x&&a<=n.y&&o>=n.y}var r=((e.p1.x*e.p2.y-e.p1.y*e.p2.x)*(t.p1.x-t.p2.x)-(e.p1.x-e.p2.x)*(t.p1.x*t.p2.y-t.p1.y*t.p2.x))/((e.p1.x-e.p2.x)*(t.p1.y-t.p2.y)-(e.p1.y-e.p2.y)*(t.p1.x-t.p2.x)),i=((e.p1.x*e.p2.y-e.p1.y*e.p2.x)*(t.p1.y-t.p2.y)-(e.p1.y-e.p2.y)*(t.p1.x*t.p2.y-t.p1.y*t.p2.x))/((e.p1.x-e.p2.x)*(t.p1.y-t.p2.y)-(e.p1.y-e.p2.y)*(t.p1.x-t.p2.x)),o={x:Math.round(r),y:Math.round(i)};return n(e.p1,e.p2,o)&&n(t.p1,t.p2,o)?o:null},Number.prototype.roundTo=function(e){var t=Math.pow(100,e);return Math.round(this.valueOf()*t)/t},window.ServerSide=function(e){var t={addHandler:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},removeHandler:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}};return e.exports("Lib.Dom.EventHandler",t)}(window.ServerSide||{}),window.ServerSide=function(e){var t={Spinner:function(e){return"<div id='canvas-spinner' class="+e+"> \t\t\t\t\t\t<div class='blockG' id='rotateG_01'></div> \t\t\t\t\t\t<div class='blockG' id='rotateG_02'></div> \t\t\t\t\t\t<div class='blockG' id='rotateG_03'></div> \t\t\t\t\t\t<div class='blockG' id='rotateG_04'></div> \t\t\t\t\t\t<div class='blockG' id='rotateG_05'></div> \t\t\t\t\t\t<div class='blockG' id='rotateG_06'></div> \t\t\t\t\t\t<div class='blockG' id='rotateG_07'></div> \t\t\t\t\t\t<div class='blockG' id='rotateG_08'></div> \t\t\t\t\t</div> "},Transitions:function(){return""}};return e.exports("Lib.UI",t)}(window.ServerSide||{}),window.ServerSide=function(e){var t=function(){var e=[],t=this;this.registerEventHandler=function(t,n,r){t=t.toLowerCase(),"object"!=typeof e[t]&&(e[t]=[]),r?e[t][r]=n:e[t].push(n)},this.removeEventHandler=function(t,n){var r=e[t.toLowerCase()];n<r.length&&r.splice(n,1)},this.fireEvent=function(t,n){if(t=t.toLowerCase(),"object"==typeof e[t])for(var r=0;r<e[t].length;r++)"function"==typeof e[t][r]&&e[t][r](n)},this.exposeEvent=function(e,n,r){void 0===r&&(r=n),e.registerEventHandler(n,function(e){t.fireEvent(r,e)})},this.contains=function(t){return!!e[t.toLowerCase()]}};return e.exports("Framework.Eventing.EventCollection",t)}(window.ServerSide||{}),window.ServerSide=function(e){e.requires("Configuration"),e.requires("Lib.Utils");var t={MakeRestPath:function(){for(var t=e.Configuration.Urls.Api,n=0;n<arguments.length;n++)t+="/"+arguments[n];return t},QueryApi:function(e,t,n,r,i,o){$.ajax({url:e,type:t,data:o?n:JSON.stringify(n),success:function(e){return function(t){e._Success(t,r)}}(this),error:function(e){return function(t){e._Error(t,r,i)}}(this),complete:function(e){return function(t){e._Complete(t,r)}}(this),dataType:"json",contentType:o||"application/json",async:!0,cache:!1})},FacebookQueryApi:function(e,t,n,r){$.ajax({url:e,type:t,data:JSON.stringify(n),success:function(e){return function(t){e._Success(t,r)}}(this),error:function(e){return function(t){e._Error(t,r)}}(this),complete:function(e){return function(t){e._Complete(t,r)}}(this),dataType:"json",async:!0,cache:!1})},_Complete:function(e,t){},_Success:function(e,t){t(e)},_Error:function(e,t,n){n?n(e):t(null)}};return e.exports("Network.RestClient",t)}(window.ServerSide||{}),window.ServerSide=function(e,t){e.requires("Lib.Utils");var n={that:this,CustomImageType:{Image:"Image",Facebook:"Facebook"},LayerCategory:{Card:1,Text:2,Logo:3},encodeRequest:function(e){var t=[];if(e)for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},GetDesigner:function(r,i){t.QueryApi(t.MakeRestPath("designers",r),"get","",function(t){null!==t&&(t.CreateClient=function(e){n.CreateClient(t,null,e)},t.CreateClientWithParams=function(e,r){n.CreateClient(t,e,r)},t.GetClient=function(e,r){n.GetClientById(t,e,r)},t.GetCategories=function(e){n.GetCategories(t,e)},t.GetUploadedImages=function(e,r){n.GetUploadedImages(t,e,r)},t.GetSearchResults=function(e,r){n.GetSearchResults(t,e,r)},t.GetDataCapture=function(e){n.GetDataCaptureObject(t,e)},t.GetStockImage=function(e,r){n.GetStockImage(t,e,r)},t.GetFonts=function(e){n.GetFonts(t,e)},t.GetDefaultLanguage=function(e){n.GetDefaultLanguage(t,e)},t.GetLanguage=function(e,r){n.GetLanguage(t.HandoverKey,e,r)},t.UploadImageByUrl=function(e,r,i){n.UploadImageByUrl(t,e,r,n.CustomImageType.Image,i)},t.UploadFacebookImageByUrl=function(e,r,i){n.UploadImageByUrl(t,e,r,n.CustomImageType.Facebook,i)},t.GetTemplate=function(e,r){n.GetTemplate(t,e,r)},t.GetImageUploadUrl=function(r,i,o){var a=/Android 2/i.test(navigator.userAgent)?"&wrap=true":"",s=i?n.LayerCategory[i]:n.LayerCategory.Card,l=o?"&cardImageType="+o:"";return e.Network.RestClient.MakeRestPath("designers",t.HandoverKey,"ClientDesigns",r.CardImageId,"Uploads?layerid="+s+a+l)},t.PerformRealTimeImageCheck=function(e,t,r){n.PerformRealTimeImageCheck(e,t,r)}),i(t||null)})},CreateClient:function(e,r,i){var o=r||{};o.LanguageId=e.Language;var a=this.encodeRequest(o);t.QueryApi(t.MakeRestPath("designers",e.HandoverKey,"clientdesigns"),"post",a,function(t){t&&n.PopulateClientMethods(e,t),i(t)},function(e){i(JSON.parse(e.responseText))},"application/x-www-form-urlencoded")},GetCategories:function(r,i){var o=e.Lib.Utils.SsgSerialiser.deserialise("languageid");t.QueryApi(r.Galleries.URL+"?langid="+o,"get","",function(e){if(null!=e)for(var t=0;t<e.length;t++)e[t].Knockout="Monograms"===e[t].Name,e[t].GetCategory=function(e){return function(t){n.GetCategory(e,t)}}(e[t]);i(e||null)})},GetCategory:function(n,r){var i=e.Lib.Utils.SsgSerialiser.deserialise("languageid");t.QueryApi(n.Url+"?langid="+i,"get","",r)},GetUploadedImages:function(e,n,r){t.QueryApi(t.MakeRestPath("designers",e.HandoverKey,"ClientDesigns",n.CardImageId,"Uploads"),"get","",r)},GetSearchResults:function(e,n,r){t.QueryApi(t.MakeRestPath("designers",e.HandoverKey,"Images","?q="+n),"get","",r)},GetStockImage:function(e,n,r){t.QueryApi(t.MakeRestPath("designers",e.HandoverKey,"images",n),"get","",r)},GetDefaultLanguage:function(e,n){t.QueryApi(t.MakeRestPath("designers",e.HandoverKey,"languages",e.Language),"get","",n)},GetLanguage:function(e,n,r){t.QueryApi(t.MakeRestPath("designers",e,"languages",n),"get","",r)},GetTemplate:function(e,n,r){t.QueryApi(t.MakeRestPath("designers",e.HandoverKey,"templates",n),"get","",r)},
GetFonts:function(e,n){t.QueryApi(e.TextOnImage.Fonts.URL,"get","",n)},GetDataCaptureObject:function(e,r){e.DataCapture.CustomDataCaptureEnabled&&t.QueryApi(e.DataCapture.Url,"get","",function(t){n.PopulateDataCaptureMethods(e,t),r(t)})},UploadImageByUrl:function(e,n,r,i,o){t.QueryApi(t.MakeRestPath("designers",e.HandoverKey,"ClientDesigns",n.CardImageId,"Uploads"),"post",{Url:r,Type:i},o)},AddStockImageLayerToClient:function(e,t,r,i){n.CreateLayer(e,"StockImageLayer",function(e){e.ImageId=r,e.Configuration.Top=-5,e.Configuration.Bottom=158,e.Configuration.Left=-5,e.Configuration.Right=246,t.Layers[t.Layers.length]=e,i(e)})},AddCustomImageLayerToClient:function(e,t,r,i){n.CreateLayer(e,"CustomImageLayer",function(e){e.ImageId=r,e.Configuration.Top=-5,e.Configuration.Bottom=158,e.Configuration.Left=-5,e.Configuration.Right=246,t.Layers[t.Layers.length]=e,i(e)})},AddTextLayerToClient:function(e,t,r,i,o,a){var s=function(e){return-1!==e.indexOf("rgb")?rgbToHex(e).replace("#",""):e.replace("#","")},l=function(e){switch(e){case"left":return 0;case"center":return 1;default:return 2}};n.CreateLayer(e,"TextLayer",function(e){null==e.Lines&&(e.Lines=[]);for(var u=0;u<r.length;u++)e.Lines[e.Lines.length]=n.CreateTextLine(r[u],u,o[u]);e.Font.Size=i.size,e.Font.Name=i.font,e.Font.Id=i.fontId,e.Font.Bold=i.bold,e.Font.Italic=i.italic,e.Font.Alignment=l(i.alignment),e.Font.Colour=s(i.color),e.Font.OutlineColour=i.outlineColour&&s(i.outlineColour),e.Font.Shadow=i.shadow,e.Font.LineSpacing=i.lineSpacing,e.Filters=[],t.Layers[t.Layers.length]=e,a(e)})},CreateLayer:function(e,n,r){t.QueryApi(t.MakeRestPath("designers",e.HandoverKey,"layers","?type="+n),"post","",r)},CreateTextLine:function(e,t,n){return n=n||{top:0,left:0},{Text:e,Order:t,Top:n.top,Left:n.left}},GetClientById:function(e,r,i){t.QueryApi(t.MakeRestPath("designers",e.HandoverKey,"clientdesigns",r),"get","",function(t){null!==t&&n.PopulateClientMethods(e,t),i(t)})},SubmitClient:function(e,n,r,i){t.QueryApi(t.MakeRestPath("designers",e.HandoverKey,"clientdesigns",n.CardImageId),"put",n,function(e){r(e)},i)},PopulateClientMethods:function(e,t){n.PopulateDataCaptureMethods(e,t.CustomDataCapture),t.UploadImageByUrl=function(r,i){n.UploadImageByUrl(e,t,r,n.CustomImageType.Image,i)},t.UploadFacebookImageByUrl=function(r,i){n.UploadImageByUrl(e,t,r,n.CustomImageType.Facebook,i)},t.GetUploads=function(r){n.GetUploadedImages(e,t,function(t){n.PopulateUploadsMethods(e,t),r(t)})},t.AddStockImageLayer=function(r,i){n.AddStockImageLayerToClient(e,t,r,i)},t.AddCustomImageLayer=function(r,i){n.AddCustomImageLayerToClient(e,t,r,i)},t.AddTextLayer=function(r,i,o,a){n.AddTextLayerToClient(e,t,r,i,o,a)},t.Submit=function(r,i){n.SubmitClient(e,t,r,i)}},PopulateDataCaptureMethods:function(e,t){null!=t&&(t.toKeyValCollection=function(){for(var e=[],n=0;n<t.length;n++)e[t[n].Key]=t[n].Value||"";return e})},PopulateUploadsMethods:function(e,t){t.toCategory=function(e,t){for(var n={Id:t,Name:e,Images:[],GetCategory:function(e){e(n)}},r=0;r<this.length;r++)n.Images.push({Id:this[r].Id,ReviewImage:this[r].Url,ThumbNail:this[r].ThumbnailUrl,LargeImage:this[r].Url,ThumbnailUrl:this[r].ThumbnailUrl,Url:this[r].Url});return n}},PerformRealTimeImageCheck:function(e,n,r){t.QueryApi(t.MakeRestPath("designers",e,"ImageChecking",n),"get","",function(e){r({imageId:n,checkResult:null===e})},function(){r({imageId:n,checkResult:!0})})}};return e.exports("Network.Connectors.PCS.Designer",n)}(window.ServerSide||{},ServerSide.Network.RestClient),window.ServerSide=function(e,t){e.requires("Lib.Utils");var n={that:this,UserToken:"",SetUserCredentials:function(n,r){var i=e.Lib.Utils.SsgSerialiser.deserialise("FacebookData");if(null===i){var o=e.Lib.Utils.SsgSerialiser.deserialise("accesstoken"),a=e.Lib.Utils.SsgSerialiser.deserialise("fbappid"),s={};s.accessToken=o;var l=e.Configuration.Urls.FacebookApp+a+"/GetUserInfo";t.QueryApi(l,"post",s,function(e){r(e)})}else r(JSON.parse(i))},GetFacebookUserId:function(n,r){var i=e.Configuration.Urls.FacebookApi+"/"+n.id+"/?fields=id&access_token="+n.token;t.FacebookQueryApi(i,"get","",function(e){r(e)})},GetCategories:function(n,r){var i=e.Configuration.Urls.FacebookApi+"/"+n.id+"/albums?fields=images,name,id,height,width,source&access_token="+n.token;t.FacebookQueryApi(i,"get","",function(e){r(e)})},GetUserPhotos:function(n,r){var i=e.Configuration.Urls.FacebookApi+"/"+n.id+"/photos?fields=images,name,id,height,width,source&access_token="+n.token;t.FacebookQueryApi(i,"get","",function(e){r(e)})},GetImages:function(r,i){var o=e.Configuration.Urls.FacebookApi+"/"+r+"/photos?fields=images,name,id,height,width,source&access_token="+n.UserToken+"&limit=20";t.FacebookQueryApi(o,"get","",function(e){i(e)})},Get:function(e,n){t.FacebookQueryApi(e,"get","",function(e){n(e)})}};return e.exports("Network.Connectors.Facebook",n)}(window.ServerSide||{},ServerSide.Network.RestClient),window.ServerSide=function(e){function t(){return void 0!==l&&null!=l}function n(e){$("*[ref]").each(function(){if(this.attributes.ref){var t=o(this.attributes.ref.value,e);if(""==t||null==t)this.attributes["hide-if-empty"]&&"true"===this.attributes["hide-if-empty"].value.toLowerCase()&&$(this).hide();else{try{$(this).val(t)}catch(e){}try{$(this).html(t)}catch(e){}}}}),$("font").removeAttr("size")}function r(t,n){var r={languageData:t};n&&e.Lib.Utils.extend(r,n),e.Lib.Utils.SsgSerialiser.serialise("ViewData",r),l=t}function i(t){if(!u||!s)return t({});var n=e.Lib.Utils.SsgSerialiser.deserialise("viewdata");n&&n.languageData?t(n.languageData):c.GetLanguage(u,s,function(e){t(e,n)})}function o(e,t){try{var n=e.split("."),r=t[n[0]]}catch(e){throw e}if(n.length<2)return void 0===r?"":r;for(var i=1;i<n.length;i++)r=void 0===r?"":r[n[i]];return void 0===r?"":r}e.requires("Lib.Utils");var a,s,l,u,c=e.Network.Connectors.PCS.Designer,d=function(a){var c=a||{};s=c.Language,u=c.HandoverKey,i(function(e){r(e)}),this.getLanguageSet=function(n){e.Lib.Utils.defer(function(){n(l)},{until:t})},this.Apply=function(){e.Lib.Utils.defer(function(){n(l)},{until:t})},this.applyTag=function(e){return o(e,l)},this.getTagWhenLoaded=function(n,r){e.Lib.Utils.defer(function(){r(o(n,l))},{until:t})},this.getText=function(e,t){return o(e,t||l)},this.localize=function(e,t,n,r){var i=$(e,t);if(i&&i.length>0)for(var o=0;o<i.length;o++){var a=i[o],s=a.getAttribute("data-ref");if(s){var l=this.getText(s,r)||"";if(n instanceof Array)for(var u=0;u<n.length;u++)a.setAttribute(n[u],l);else a[n]=l}}}},f=function(e){return void 0===a&&(a=new d(e)),a};return e.exports("Framework.UI.Templating.RefLangTemplater",f)}(window.ServerSide||{}),window.ServerSide=function(e){e.requires("Lib.Utils");var t,n={minutes:6e3,seconds:1e3,milliseconds:1},r=function(e,t){if("number"==typeof n[e])return t*n[e]},i=function(e){try{$.ajax({url:e,type:"get",async:!0})}catch(e){}},o=function(e,n){var o=(n||{period:null}).period||6e3,a=(n||{units:null}).units||"milliseconds";i=(n||{period:null}).action||i,o=r(a,o),this.start=function(){try{t=window.setInterval(function(){i(e)},o)}catch(e){}},this.stop=function(){try{window.clearInterval(t)}catch(e){}}};return e.exports("Components.KeepAlive",o)}(window.ServerSide||{}),window.ServerSide=function(e){e.requires("Lib.Utils");var t=function(){var t=this;return this.values={},this.getValue=function(e){var n=t.values;return""!==n&&null!==n&&e in n?n[e]:""},this.setValue=function(n,r,i){var o=void 0!==i&&!0===i,a=t.values;""!==a&&null!==a||(a={}),n in a?o&&(a[n]=r):a[n]=r,e.Lib.Utils.SsgSerialiser.serialise("passthrough",e.Lib.Utils.SsgUrl.createQuery(a))},this.storeValues=function(n,r){var i={},o={};for(var a in n)n.hasOwnProperty(a)&&(o[a.toLowerCase()]=n[a]);r?$.extend(i,t.values,o):$.extend(i,o,t.values),t.values=i,e.Lib.Utils.SsgSerialiser.serialise("passthrough",e.Lib.Utils.SsgUrl.createQuery(i))},this.values=e.Lib.Utils.SsgUrl.parseQuery(e.Lib.Utils.SsgSerialiser.deserialise("passthrough"),!1),this};return e.exports("Framework.Utils.Passthrough",t)}(window.ServerSide||{}),window.ServerSide=function(){return _module=function(e){function t(e){l=null,u=0,c=0,d=0,f=0,p=0,h=null,e&&(C.value="",C.removeEventListener("change",r))}function n(e){y.onError(0,l,e)}function r(){var e=C.files[0];if(l=e.name,y.onSubmit(0,l),-1===b.allowedExtensions.indexOf(e.type.replace("image/","")))return n("typeError");if(e.size>b.sizeLimit)return n("sizeError");if(e.size<b.minSizeLimit)return n("minSizeError");var t=new FileReader;t.onload=function(t){v.src=t.target.result,v.onload=function(){if(sResultFileSize=bytesToSize(e.size),b.minSize&&(v.naturalWidth<b.minSize.Width||v.naturalHeight<b.minSize.Height))return n("minSizeError");h={size:sResultFileSize,type:e.type,dimension:{width:v.naturalWidth,height:v.naturalHeight}},x&&i()}},t.readAsDataURL(e)}function i(){iPreviousBytesLoaded=0,ServerSide.Lib.Utils.defer(function(){y.onUpload(0,l,h)},{until:function(){return null!==h}});var e=new FormData;$.each(C.files,function(t,n){e.append(t,n)});var t=new XMLHttpRequest;t.upload.addEventListener("progress",o,!1),t.addEventListener("load",a,!1),t.addEventListener("error",n,!1),t.addEventListener("abort",n,!1),t.open("POST",m.endpoint),t.send(e)}function o(e){e.lengthComputable?(u=e.loaded,d=e.total,f=Math.round(100*e.loaded/e.total),s()):n("cantCompute")}function a(e){y.onComplete(0,l,JSON.parse(e.target.responseText))}function s(){var e=u,t=e-c;if(0!=t){c=e,t*=2;var n=d-c,r=n/t,i=t.toString()+"B/s";t>1048576?i=(Math.round(100*t/1048576)/100).toString()+"MB/s":t>1024&&(i=(Math.round(100*t/1024)/100).toString()+"KB/s"),y.onProgress(0,l,u,d,f,i,secondsToTime(r))}}var l,u,c,d,f,p,h,g=e.button,v=e.preview||new Image,m=e.request,y=e.callbacks,b=e.validation||{},x=e.autoUpload||!1,w='<input id={0} accept="{1}" type="file" title="Choose an image" style="position: absolute; right: 0px; top: 0px; font-family: Arial; font-size: 18px; margin: 0px; padding: 0px; cursor: pointer; opacity: 0;">',C=e.input||null;return function(){if(b.allowedExtensions=b.allowedExtensions||["jpeg","jpg","png","gif","bmp","tif","tiff"],b.acceptFiles=b.acceptFiles||"image/*",b.sizeLimit=b.sizeLimit||10485760,b.minSizeLimit=b.minSizeLimit||1,t(),!C){var e="upload_input_"+(new Date).getTime();g.appendHtml(String.format(w,e,b.acceptFiles)),C=document.getElementById(e)}C.addEventListener("change",r)}(),{upload:function(){i()},hasUpload:function(){return!!l},reset:function(e){t(e)}}},ServerSide.exports("Framework.Utils.Upload",_module)}(window.ServerSide),window.ServerSide=function(){return _module=function(e){function t(e){return new RegExp("^[A-Z0-9._%+-]+@[A-Z0-9.-]+.[A-Z]{2,4}$","i").test(e)}return{isEmailValid:t}},ServerSide.exports("Framework.Utils.ValidationHelper",_module)}(window.ServerSide),window.ServerSide=function(){return _module=function(e){function t(e){return e&&e.TextOnImage.Enabled&&"v"!==e.Orientation.Type}function n(e){return!0!==r(e)&&e&&null!=e.Coverage.Logo}function r(e){return e&&!0===e.ClipArtEnabled}function i(e){return e&&("Enabled"===e.DataCapture.EmailCapture||!0===e.DataCapture.CustomDataCaptureEnabled)}function o(e){return e&&e.FacebookAppId&&e.EnableFacebookButton}function a(e){return e&&e.SpecialEffects&&!0===e.SpecialEffects.Enabled&&e.SpecialEffects.Effects.length>0}function s(e){return e&&e.Doodle&&!0===e.Doodle.Enabled}function l(){for(var e="",t=0;t<c;t++)e+=u.charAt(Math.floor(Math.random()*u.length));return e}var u="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",c=8;return{isTextViewEnabled:t,isLogoViewEnabled:n,isClipArtEnabled:r,isDataCaptureEnabled:i,isFacebookEnabled:o,isSpecialEffectsEnabled:a,isDoodleEnabled:s,generateId:l}},ServerSide.exports("Framework.Utils.AppHelper",_module)}(window.ServerSide),window.ServerSide=function(e){var t={StockImageGallery:function(t,n,r,i,o,a,s){function l(e){return void 0!==n&&e in n?n[e]:""}function u(e){"function"==typeof S.onpagechange&&S.onpagechange(e)}function c(e,t){"function"==typeof S.onimagechange&&S.onimagechange(e,t)}function d(e,t){"function"==typeof S.onallimagesloaded&&S.onallimagesloaded(e,t)}function f(e){var t=new Image;return t.src=e,t}function p(e){var t=document.createElement("div");return t.style.backgroundSize="cover",t.style.backgroundPosition="center",t.style.backgroundRepeat="no-repeat",t.setAttribute("class","gallery-img"),t.setAttribute("alt",e),t}function h(){for(var e=0;e<r;e++)A[e]=document.createElement("div"),A[e].setAttribute("id","row"+(e+1)),A[e].setAttribute("class","gallery-row"),y.appendChild(A[e])}function g(e){for(var t=0,n=0;n<r;n++)A[n].children.length<D&&(D=A[n].children.length,t=n);A[t].appendChild(e),D=A[t].children.length}function v(){$(".imgCont").hide(),$catImgList=$(".imgCont."+E+".pag"+L[E].currentPage),$catImgList.fadeIn(),b.style.display="block",$(C).html(String.format(a.text,L[E].currentPage,L[E].pageIndex)),$(x).removeClass("active"),$(w).removeClass("active"),L[E].currentPage>1&&$(x).addClass("active"),L[E].currentPage<L[E].pageIndex&&$(w).addClass("active"),u(L[E].currentPage)}function m(e){return void 0!==e&&null!=e}var y,b,x,w,C,S=this,E=null,L={},_=0,I=0,k=e.Configuration.Images.DefaultGallerySize,T=null,M=null,A=[],D=0,H={Upload:-1,Search:-2},z=i?" v":"",P=i?" rotate":"";return r=void 0===typeof r?0:r,S.onimagechange=null,S.onallimagesloaded=null,function(){t.innerHTML="",y=document.createElement("div"),y.setAttribute("class","outerDiv"+z),r>1&&h(),t.appendChild(y)}(),a&&function(){b=document.createElement("div"),b.setAttribute("class","pagination"),b.style.display="none",x=document.createElement("button"),x.setAttribute("title","Previous gallery page"),x.id="prevPage",x.onclick=function(){L[E].currentPage>1&&(L[E].currentPage--,v())},w=document.createElement("button"),w.setAttribute("title","Next gallery page"),w.id="nextPage",w.onclick=function(){L[E].currentPage<L[E].pageIndex&&(L[E].currentPage++,v())},C=document.createElement("div"),C.id="paginationText",b.appendChild(x),b.appendChild(C),b.appendChild(w),t.appendChild(b)}(),this.setVisibility=function(e){t.style.display=e?"block":"none"},this.showCustomMessage=function(e){null===M?void 0!==e&&(M=document.createElement("span"),M.setAttribute("id","messageCont"),M.innerHTML=l(e),t.appendChild(M)):M.style.display="block"},this.hideCustomMessage=function(){null!==M&&(M.style.display="none")},this.createErrorContainer=function(){T=document.createElement("div"),T.setAttribute("class","errorCont"),T.innerHTML="<div id='errorImage'></div><span id='errorText'>"+l("galleryKeywordFail")+"</span>";var e=document.createElement("a");e.setAttribute("href","#/"),e.setAttribute("id","closeError"),e.onclick=function(){S.closeError()},T.appendChild(e),t.appendChild(T)},this.addImage=function(e,t,n,i,s){var l=m(i)?i:t.Name,u=m(s)?s:E,h=document.createElement("button"),v="";if(_++,a&&o){var x=Math.ceil(_/o);x>L[u].pageIndex&&(L[u].pageIndex++,$(b).show(),$(w).removeClass("active").addClass("active"),$(C).html(String.format(a.text,L[u].currentPage,L[u].pageIndex))),x>1&&(h.style.display="none"),v=" pag"+L[u].pageIndex}h.setAttribute("class","imgCont "+u+v+" loading"),h.setAttribute("title",l+" image "),$(h).addClass("tab-item"),h.setAttribute("type","button"),h.fadeImg=function(){k.style.opacity=.2,$(this).addClass("loading")},h.addEventListener("click",function(e){c(h,e)});var S=f(e),k=p(l);k.Id=m(n)?n:t.Id,h.setAttribute("id",k.Id),m(t)&&(k.data=t),S.onload=function(){this.width>this.height&&(k.className+=P),k.style.backgroundImage="url('"+this.src+"')",k.style.opacity=1,$(h).removeClass("loading"),I++,_===I&&(I=0,d(y,_))},h.appendChild(k),m(s)&&s!==E&&s!=H.Search&&(h.style.display="none"),r>1?g(h):y.appendChild(h)},this.clearImages=function(){if(r>1)for(var e=0;e<r;e++)A[e].innerHTML="";else y.innerHTML=""},this.showError=function(){T&&(y.style.display="none",T.style.display="block","function"==typeof S.onSearchFail&&S.onSearchFail())},this.hideError=function(){T&&(T.style.display="none",y.style.display="block")},this.closeError=function(){var e="#"+t.id+" ";S.hideError(),$(e+"."+H.Search).hide();var n=$("."+E);n.show(),n.parent().hasClass("activeImage")&&n.parent().show(),S.updateContainerWidth(k)},this.setActiveImage=function(e,n,r){var i="#"+t.id+" ",o=a?"":":visible",s=$(i).find("#"+e+":not(."+H.Search+")"+o);if(s.length>0){if(n&&a&&L[E].pageIndex>1){var l=s.attr("class").match(/pag(\d+)/);L[E].currentPage=l.length>0?parseInt(l[1]):1,v()}var u=$(i+".active.imgCont");if(u.attr("aria-label","not selected"),u.removeClass("active"),!r){"activeImage"===u.parent().attr("class")&&u.unwrap()}var c=$(y).find("#"+e);c.addClass("active"),r||(c.wrap("<div class='activeImage'></div>"),c.hasClass(E)||c.parent().hide()),c.attr("aria-label","selected")}},this.filterImagesByAltValue=function(e){var t=e.split(" "),n=""===t[t.length-1]&&t.length>1?t.length-1:t.length,r=[],i=0;return $(y).find(".gallery-img").each(function(){for(var e=!1,o=$(this),a=0;a<n;a++)if(o.attr("alt").toLowerCase().indexOf(t[a].toLowerCase())>=0){e=!0;break}var s=o.parent();e?(s.parent().hasClass("activeImage")?(s.parent().show(),s.show()):s.show(),r[i]=o.attr("alt"),i++):s.parent().hasClass("activeImage")?s.parent().hide():s.hide()}),r},this.setCategoryId=function(e){E=e},this.getCurrentCategory=function(){return E},this.setCategory=function(e){_=0;var n="#"+t.id+" ";t.scrollLeft=0,null!=E&&($(n+".imgCont").hide(),$(n+".activeImage").hide()),$(n+"."+e).show(),$(n+".activeImage ."+e).length>0&&$(n+".activeImage ."+e).parent().show(),E=e,a&&(L[e]||(L[e]={pageIndex:1,currentPage:1}),1===L[e].pageIndex?b.style.display="none":v())},this.updateContainerWidth=function(e){var t;if("ontouchstart"in window){var n=$(".imgCont:visible").length,r=1.1*parseInt($(".imgCont:visible").css("width")),i=parseInt($(".imgCont:visible").css("height")),o=parseInt($(y).parent().css("height")),a=Math.floor(o/i);t=r*Math.ceil(n/a),y.style.width=t+"px"}else{t=e*Math.ceil($(".imgCont:visible").length/2)+"px"}y.style.width=t},this.containsCategoryById=function(e){return t.getElementsByClassName(e).length>0},this},GallerySelector:function(e){function t(e){var t=document.createElement("option");return t.innerHTML=e,t.value=e,t.onclick=function(){this.blur(),o.blur()},t}function n(){"function"==typeof r.oncategorychange&&r.oncategorychange(o.options[o.selectedIndex],o.options[o.selectedIndex].data)}var r=this;this.oncategorychange=null;var i={},o=document.createElement("select");o.setAttribute("id","galleryDropdown"),o.setAttribute("class","innerShadow"),o.onchange=n;var a=document.createElement("div");a.setAttribute("id","gallery-select"),a.setAttribute("class","styledSelect");var s=document.createElement("div");return s.setAttribute("id","selectorDiv"),a.appendChild(o),s.appendChild(a),e.innerHTML="",e.appendChild(s),this.addCategoryAtTop=function(e,n){var r=t(e);r.data=n,o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r);for(var a in i)i[a]++;var s=n.Id||n.id;i[s]=r.index},this.addCategory=function(e,n,r){var a=t(e);a.data=n,void 0!==r&&null!=r?o.add(a,o.options[r]):o.appendChild(a);var s=n.Id||n.id;i[s]=o.options.length-1},this.containsCategory=function(e){for(var t=0;t<o.options.lenght;t++)if(o.options[t].value===e)return!0;return!1},this.setActiveCategoryIndex=function(e){o.selectedIndex=i[e]},this.setActiveCategory=function(e){o.selectedIndex=i[e],n()},this.setVisibility=function(t){e.style.display=t?"block":"none"},this},FlatGallerySelector:function(e,t){var n=this;n.dropDown=$(e),n.placeholder=$(n.dropDown).find("span")[0],n.opts=$(n.dropDown).find("ul.dropdown")[0],n.val="",n.selectedId=-1,n.categories=[];var r=t||{};this.oncategorychange=r.onCategoryChange||function(){};return n.dropDown.on("click",function(){return n.dropDown.toggleClass("active"),!1}),this.addCategoryAtTop=function(e,t){var r=t.Id||t.id,i=this.addOption(r,e);n.categories.unshift({id:t.Id||t.id,name:e,data:t}),$(n.opts).prepend(i),1===n.categories.length&&(n.placeholder.innerHTML=e)},this.addCategory=function(e,t){var r=t.Id||t.id,i=this.addOption(r,e);n.categories.push({id:t.Id||t.id,name:e,data:t}),$(n.opts).append(i),1===n.categories.length&&(n.placeholder.innerHTML=e)},this.setActiveCategory=function(e){n.selectedId=e;for(var t=0,r=n.categories.length;t<r;t++){var i=n.categories[t];i.id===e&&(n.placeholder.innerHTML=i.name,n.oncategorychange(n,i.data))}},this.setVisibility=function(t){e.style.display=t?"block":"none"},this.getCategories=function(){return this.categories},this.addOption=function(e,t){var r=$('<li class="list-item" id="'+e+'"><a class="" href="#">'+t+"</a></li>");return r.on("click",function(e){e.preventDefault();var t=parseInt($(e.target).parent().attr("id"));n.setActiveCategory(t)}),r},function(){if(r.categories&&r.categories.forEach(function(e){n.addCategory(e.Name,e)}),r.selectedCategory){n.selectedId=r.selectedCategory;for(var e=0,t=n.categories.length;e<t;e++){var i=n.categories[e];i.id===n.selectedId&&(n.placeholder.innerHTML=i.name)}}}(),this},GallerySearch:function(e,t){function n(e){return void 0!==t&&e in t?t[e]:""}function r(e){13===e.keyCode&&i()}function i(){"function"==typeof o.onsearchclick&&o.onsearchclick(s.value.trim())}var o=this;o.onsearchclick=null;var a=document.createElement("span");a.setAttribute("id","search-text"),a.innerHTML=n("galleryKeyword");var s=document.createElement("input");s.type="text",s.setAttribute("id","search-box"),s.setAttribute("class","textbox1"),s.onkeyup=r;var l=document.createElement("input");return l.type="button",l.onclick=i,l.setAttribute("id","go-button"),l.setAttribute("class","bar-button"),l.setAttribute("value",n("galleryKeywordGo")),e.innerHTML="",e.appendChild(a),e.appendChild(s),e.appendChild(l),this.setVisibility=function(t){e.style.display=t?"block":"none"},this.clearSearchText=function(){s.value=""},this}};return e.exports("Components.Gallery.Controller",t)}(window.ServerSide||{}),window.ServerSide=function(){return _module=function(e){function t(e){n.style.width=e+"%"}var n=document.createElement("div");e.appendChild(n),t(0),this.setPercentage=function(e){if(e>100||e<0)throw"LoadingBar.setPercentage value is out of sensible bounds (0->100)";t(e)},this.setInnerText=function(e){n.innerHTML=e},this.hide=function(){n.style.visibility="hidden"},this.show=function(){n.style.visibility="visible"}},ServerSide.exports("Framework.UI.LoadingBar",_module)}(window.ServerSide),window.ServerSide=function(e){e.requires("Lib.Utils");var t=function(t,n,r,i,o){function a(e){return"undefined"!=typeof passthrough&&e.toLowerCase()in passthrough?passthrough[e.toLowerCase()]:""}function s(e){-1!==$.inArray(e.keyCode,[46,8,9,27,13,110])||65==e.keyCode&&!0===e.ctrlKey||e.keyCode>=35&&e.keyCode<=39||(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()}function l(e){e.preventDefault()}function u(e){var t=this.childNodes[0];return t.options[t.selectedIndex].value}function c(e){return this.checked?"True":"False"}function d(e){return this.value}function f(e){return new RegExp("^[0-9]+$").test(this.value)}function p(e){return new RegExp(this.regexp,"i").test(this.value)}function h(e,t){var n=document.createElement("span");return n.className="data-capture-label",n.innerHTML=e,t&&$(n).addClass("required-field"),n}function g(e){var t=document.createElement("div");return t.className="validation",k||(t.innerHTML=e?"*":""),t}function v(e){var t;switch(e.Type){case"DropDown":t=M(e);break;case"CheckBox":t=A(e);break;default:t=D(e)}return!e.AllowUserEdit&&t.validPassthrough&&(t.disabled=!0,"DropDown"===e.Type&&(t.className+=" disabledDD",t.childNodes[0].disabled=!0)),e.Mandatory&&(t.mandatory=!0),t.setAttribute("id",e.Key),t.className+=" dcElement",t.label=e.Label,t.returnOnHandback=e.HandbackValue,_.push(t),t}function m(){$("#dataCapture .active",n).removeClass("active"),$(".validation",n).html("")}function y(e){e.addClass("active"),e.html("")}function b(e){var t=document.createElement("option");return t.innerHTML=e.Key,t.value=e.Value,e.Default&&(t.selected=!0),t}function x(e,t){I?C(e,t):w(e,t)}function w(e,t){var n=document.createElement("td");n.className="tdLabel";var r=document.createElement("td");r.className="tdElement",n.appendChild(h(t.Label)),r.appendChild(v(t)),e.appendChild(n),e.appendChild(r);var i=g(t.Mandatory),o=document.createElement("td");o.appendChild(i),o.className="tdValidation",e.appendChild(o)}function C(e,t){if("CheckBox"===t.Type){var n=document.createElement("td");n.className="tdElement",n.appendChild(v(t)),n.appendChild(h(t.Label,t.Mandatory)),e.appendChild(n);var r=g();n.appendChild(r),n.colSpan="3"}else{var i=document.createElement("td");i.className="tdLabel";var n=document.createElement("td");n.className="tdElement",i.appendChild(h(t.Label,t.Mandatory)),n.appendChild(v(t)),e.appendChild(i),e.appendChild(n);var r=g(t.mandatory),o=document.createElement("td");o.appendChild(r),o.className="tdValidation",e.appendChild(o)}}function S(e){var t=document.createElement("div");return t.className="data-capture-item",t.appendChild(h(e.Label,e.Mandatory)),t.appendChild(v(e)),t.appendChild(g(e.Mandatory)),t}o||(o={});var E=document.createElement("table"),L=document.createElement("tbody"),_=[],I=o.isSingleColumn||!1,k=o.hideInitialValidationContent||!1;passthrough=(new e.Framework.Utils.Passthrough).values||[],r=r||{checkbox:{invalid:""},regexp:{invalid:"",numericOnly:""},input:{length:""},email:{invalid:"",mandatory:"",label:"",confirmlabel:"",nomatch:""},mandatory:"",competition:{label:""}},E.setAttribute("id","dataCapture");var T,M=function(e){var t=document.createElement("select");t.className+=" ssgDropDown",t.setAttribute("tabindex",e.index);var n=document.createElement("div");n.className+=" ssg-select";for(var r=0;r<e.Options.length;r++){var i=b(e.Options[r]);t.appendChild(i)}var o=a(e.Key);if(""!=o){t.validPassthrough=!1;for(var r=0;r<t.options.length;r++)if(t.options[r].value===o){t.selectedIndex=r,n.validPassthrough=!0;break}}return n.appendChild(t),n.isValid=n.getValue=u,n},A=function(e){var t=document.createElement("input");t.type="checkbox",t.validationMessages={},t.setAttribute("tabindex",e.index);var n=""!==e.Default?e.Default:"",i=a(e.Key),o=""!==i?i:n;return"true"===o?(t.checked=!0,t.validPassthrough=!0):"false"!==o&&(t.validPassthrough=!1),t.isValid=function(){return!this.mandatory||this.checked&&this.mandatory},t.getValue=c,t.validationMessages.invalid=t.validationMessages.mandatory=r.checkbox.invalid,t},D=function(e){var t=document.createElement("input"),n=null!=e.Length&&0!==e.Length,i=""!==e.Default?e.Default:"",o=a(e.Key),u=""!==o?o:i;switch(t.validPassthrough=""!==o,t.className="textbox1",t.validationMessages={},t.setAttribute("tabindex",e.index),t.type="text",e.Type){case"Numeric":t.onkeydown=s,t.onpaste=l,t.value=u,t.isValid=f,t.validationMessages.invalid=String.format(r.regexp.numericOnly,e.Label),t.type="number";break;case"RegExp":var c=r.regexp.custom?r.regexp.custom[e.Key]:r.regexp.invalid;t.value=o,t.regexp=i,t.isValid=p,t.onpaste=l,t.validationMessages.invalid=String.format(c,e.Label);break;default:t.value=u}return n&&(t.maxLength=e.Length,t.validationMessages.length=String.format(r.input.length,e.Label,e.Length)),t.getValue=d,t.validationMessages.mandatory=String.format(r.mandatory,e.Label),t},H=function(e){return this.validateFields(void 0!==e&&e)},z=function(e){this.removeAllValidationWarnings();for(var t=this.dcElements,n=[],r=0,i=0;i<t.length;i++){var o=t[i];o.disabled||(o.mandatory&&""===o.getValue()&&(e?$(o).addClass("active"):this.addValidationWarning($(o).parent().next().find(".validation")),n[r]=o.validationMessages.mandatory,r++),""!==o.getValue()&&null!=o.maxlength&&o.value.length<o.maxlength&&(e?$(o).addClass("active"):this.addValidationWarning($(o).parent().next().find(".validation")),n[r]=o.validationMessages.length,r++),""===o.getValue()||null==o.isValid||o.isValid()||(e?$(o).addClass("active"):this.addValidationWarning($(o).parent().next().find(".validation")),n[r]=o.validationMessages.invalid,r++))}return n},P=function(e){for(var t={},n=_,r=0;r<n.length;r++){var i=n[r],o=i.getValue();(!e||i.returnOnHandback)&&(t[i.getAttribute("id")]=o)}for(var r=0;r<j.length;r++)t[j[r].Key]="RegExp"===j[r].Type?"":j[r].Default;return t},R=[],j=[],U=0,B=0,N=0,O=0,G=0;G=o.maxRows?o.maxRows:i?2*e.Configuration.DataCapture.MaxRows:e.Configuration.DataCapture.MaxRows;for(var F=0;F<t.length;F++){if(t[F].Display)R[U]=t[F],U++;else if(t[F].HandbackValue){var V=a(t[F].Key);""!==V&&(t[F].Default=V),j[B]=t[F],B++}t[F].index=F+1}if(R.length>G?(T=O=G,N=R.length-G):T=R.length,o.isSingleColumn)for(var F=0;F<T;F++)n.appendChild(S(R[F])),0!==N&&(n.appendChild(S(R[O])),N--,O++);else{for(var F=0;F<T;F++){var q=document.createElement("tr");x(q,R[F]),0!==N&&(x(q,R[O]),N--,O++),L.appendChild(q)}E.appendChild(L),n&&n.appendChild(E)}return{dcElements:_,getValues:P,getValidationMessages:H,validateFields:z,_createFieldset:x,removeAllValidationWarnings:m,addValidationWarning:y}};return e.exports("Components.DataCapture.Controller",t)}(window.ServerSide||{}),window.ServerSide=function(e){var t={email:function(e,t,n){function r(e){return void 0!==t&&e in t?decodeURIComponent(t[e]):""}function i(e,t){var n=document.createElement("td");n.className="tdLabel";var i=document.createElement("td");i.className="tdElement";var o=document.createElement("td");o.className="tdValidation";var a=document.createElement("div");a.className="emailValidation",a.innerHTML="*",o.appendChild(a);var s=document.createElement("span");s.innerHTML=t,n.appendChild(s);var l=document.createElement("input");l.type="email",l.label=t,l.className="textbox1",l.isValid=function(){return new RegExp("^[A-Z0-9._%+-]+@[A-Z0-9.-]+.[A-Z]{2,4}$","i").test(this.value)};var u=r("emailaddress");""!=u&&(l.value=u),e.getInputField=function(){return l},e.getValidationField=function(){return a},i.appendChild(l),e.appendChild(n),e.appendChild(i),e.appendChild(o)}function o(){$("#emailCapture .active").removeClass("active"),$(".emailValidation").html("*")}function a(e){$(e).addClass("active"),$(e).html("")}var s=document.createElement("table");s.setAttribute("id","emailCapture");var l=document.createElement("tr");i(l,n.email.label);var u=document.createElement("tr");return i(u,n.email.confirmlabel),this.getValidationMessages=function(e){var t=void 0!==e&&e;o();var r=new Array,i=l.getInputField(),s=u.getInputField(),c=l.getValidationField(),d=u.getValidationField(),f=0;return""!==i.value&&""!==s.value||(t?($(i).addClass("active"),$(s).addClass("active")):(a(c),a(d)),r[f]=n.email.mandatory,f++),i.isValid()&&s.isValid()||(t?($(i).addClass("active"),$(s).addClass("active")):(a(c),a(d)),r[f]=n.email.invalid,f++),i.value!==s.value&&(t?($(i).addClass("active"),$(s).addClass("active")):(a(c),a(d)),r[f]=n.email.nomatch,f++),r},this.getEmailValue=function(){return l.getInputField().value},s.appendChild(l),s.appendChild(u),e.appendChild(s),this},competition:function(e,t){var n=document.createElement("table");n.setAttribute("id","competition");var r=document.createElement("tr");r.innerHTML="<td colspan=3></td>";var i=document.createElement("tr"),o=document.createElement("td");o.setAttribute("class","tdLabel"),o.innerHTML=t.competition.label;var a=document.createElement("td");a.setAttribute("class","tdElement"),a.setAttribute("colspan","2");var s=document.createElement("input");s.setAttribute("id","chkCompetition"),s.type="checkbox",s.checked=!0,a.appendChild(s),i.appendChild(o),i.appendChild(a),n.appendChild(r),n.appendChild(i),e.appendChild(n),this.isChecked=function(){return s.checked}}};return e.exports("Components.DataCapture.EmailCapture",t)}(window.ServerSide||{}),window.ServerSide=function(e){var t=function(e){function t(e){var t=document.createElement("li");t.innerHTML=e,o.appendChild(t)}function n(){o.innerHTML=""}var r=document.createElement("div");r.setAttribute("id","validationContainer");var i=document.createElement("div");i.setAttribute("id","validationImage");var o=document.createElement("ul");return this.addMessages=function(e,r){n();for(var i=r&&e.length>=r?r:e.length,o=0;o<i;o++)t(e[o])},
r.appendChild(i),r.appendChild(o),e.appendChild(r),this};return e.exports("Components.DataCapture.Validation",t)}(window.ServerSide||{}),window.ServerSide=function(e){e.requires("Lib.Dom.EventHandler"),e.requires("Lib.Utils");var t=function(t,n,r,i){var o=this,a=1,s=1,l=e.Lib.Utils.options(i);n.style.backgroundImage="url("+t+")",this.setMode=function(e){if(!(e in r))throw"CssSprite :: mode '"+e+"' was not found";var t=-Math.round(r[e].x*a),i=-Math.round(r[e].y*s);n.style.backgroundPosition=t+"px "+i+"px"},e.Lib.Dom.EventHandler.addHandler(window,"load",function(){if(l.isNotNullObject("tileSize")&&l.isNotNullObject("sheetSize")){a=n.clientWidth/i.tileSize.width,s=n.clientHeight/i.tileSize.height;var e=i.sheetSize.width*a,t=i.sheetSize.height*s;n.style.backgroundSize=e+"px "+t+"px"}l.isNotNullString("defaultMode")&&o.setMode(i.defaultMode)}),i.defaultMode&&this.setMode(i.defaultMode)};return e.exports("Framework.UI.CssSprite",t)}(window.ServerSide||{}),window.ServerSide=function(e){e.requires("Framework.Eventing.EventCollection"),e.requires("Framework.UI.CssSprite");var t={CssButton:function(t,n,r){function i(e,t){a.fireEvent(e,t)}if(!t)throw new Error("Button element is not defined");var o={disabled:"disabled",activated:"activated",deactivated:"deactivated"},a=new e.Framework.Eventing.EventCollection,s=!0,l=o.activated,u=function(e){"string"==typeof n[e]&&(t.className=t.className.replace(n[l],""),t.className=t.className+" "+n[e],l=e)};t.onclick=function(e){s&&i("onclick",e)},this.disable=function(){s=!1,u(o.disabled)},this.activate=function(){s=!0,u(o.activated)},this.deactivate=function(){s=!0,u(o.deactivated)},this.registerEventHandler=function(e,t){a.registerEventHandler(e,t)},this.getEventName=function(){return t.getAttribute("eventname")}},FastButton:function(t,n,r,i){function o(e,t){l.fireEvent(e,t)}var a=!0,s=new e.Framework.UI.CssSprite(n,t,r,i),l=new e.Framework.Eventing.EventCollection;t.onclick=function(e){a&&o("onclick",e)},this.disable=function(){a=!1,s.setMode("inactive")},this.activate=function(){a=!0,s.setMode("active")},this.deactivate=function(){a=!0,s.setMode("active")},this.registerEventHandler=function(e,t){l.registerEventHandler(e,t)},this.getEventName=function(){return t.getAttribute("eventname")}},Button:function(t,n){function r(e,t){a.fireEvent(e,t)}var i="Skins/ClassicWhite/Mobile/images/";n&&n.resourceLocation?i=n.resourceLocation:"string"==typeof n&&(i=n);var o=t+"-button",a=new e.Framework.Eventing.EventCollection,s=!0,l=document.getElementById(o);if(null===l)throw"No image is associated with the button : "+o;var u="IMG"===l.tagName||"INPUT"===l.tagName?l:l.getElementsByTagName("img")[0],c=i+o+"-active.png",d=i+o+"-inactive.png",f=i+o+"-disabled.png";l.onclick=function(e){s&&r("onclick",e)},this.disable=function(){u.src=f,u.disabled=!0,s=!1},this.activate=function(){u.src=c,u.disabled=!1,s=!0},this.deactivate=function(){u.src=d,u.disabled=!1,s=!0},this.registerEventHandler=function(e,t){a.registerEventHandler(e,t)},this.getEventName=function(){return l.getAttribute("eventname")}},Slider:function(t,n){function r(e){a.fireEvent("onclick",parseInt(e))}function i(e,t,n){var r=parseInt(c.slider("value"))+e;t(r)&&(r=n),c.slider("value",r)}var o=t+"-slider",a=new e.Framework.Eventing.EventCollection,s=n&&n.maxScale?n.maxScale:200,l=n&&n.minScale?n.minScale:10,u=document.getElementById(o),c=jQuery(u);c.slider({from:l,to:s,step:1,skin:n&&n.sliderSkinName?n.sliderSkinName:"classicwhite",limits:!1,onstatechange:r,dimension:"%"}),this.registerEventHandler=function(e,t){a.registerEventHandler(e,t)},this.activate=function(){c.next().show(),c.prev().hide(),$("#slider-td").removeClass("slider-td-disabled")},this.deactivate=function(){c.next().show(),c.prev().hide(),$("#slider-td").removeClass("slider-td-disabled")},this.disable=function(){c.next().hide(),c.prev().show(),$("#slider-td").addClass("slider-td-disabled")},this.getEventName=function(){return u.getAttribute("eventname")},this.incValue=function(){i(2,function(e){return e>s},s)},this.decValue=function(){i(-2,function(e){return e<l},l)},this.setScale=function(e){c.slider("value",e)}},Combo:function(e,n,r){var i=r?r.minusButton:new t.Button("scaledown",n),o=r?r.plusButton:new t.Button("scaleup",n),a=new t.Slider("scale",n);o.registerEventHandler("onclick",function(e){a.incValue()}),i.registerEventHandler("onclick",function(e){a.decValue()}),this.registerEventHandler=function(e,t){a.registerEventHandler(e,t)},this.activate=function(){i.activate(),o.activate(),a.activate()},this.deactivate=function(){i.deactivate(),o.deactivate(),a.deactivate()},this.getEventName=function(){return a.getEventName()},this.setScale=function(e){a.setScale(e)},this.disable=function(e){i.disable(),o.disable(),a.disable()}},NativeRange:function(n,r,i){i=i||{};var o=r?r.minusButton:new t.Button("scaledown",i),a=r?r.plusButton:new t.Button("scaleup",i),s=new e.Framework.Eventing.EventCollection,l=$(n);l.val(i.defaultValue||100),l.on("input",function(e){s.fireEvent("onscalechange",parseInt(l.val()))}),l.on("change",function(e){s.fireEvent("onscalechange",parseInt(l.val()))}),a.registerEventHandler("onclick",function(e){l[0].stepUp(),s.fireEvent("onscalechange",parseInt(l.val()))}),o.registerEventHandler("onclick",function(e){l[0].stepDown(),s.fireEvent("onscalechange",parseInt(l.val()))}),this.registerEventHandler=function(e,t){s.registerEventHandler(e,t)},this.activate=function(){o.activate(),a.activate(),l.prop("disabled",!1)},this.deactivate=function(){o.deactivate(),a.deactivate(),l.prop("disabled",!1)},this.disable=function(){o.disable(),a.disable(),l.prop("disabled",!0)},this.getEventName=function(){return l.prop("eventname")},this.setScale=function(e){l.val(e),s.fireEvent("onscalechange",parseInt(l.val()))}},Section:function(n,r,i){function o(e,t){s&&c.fireEvent(e,t)}var a=[],s=!1,l=n+"-controls",u=document.getElementById(l),c=new e.Framework.Eventing.EventCollection;this.registerEventHandler=function(e,t){c.registerEventHandler(e,t)},this.activate=function(){u&&(u.style.display="block");for(var e=0;e<a.length;e++)a[e].deactivate();s=!0},this.deactivate=function(){for(var e=0;e<a.length;e++)a[e].deactivate();s=!0},this.getName=function(){return n},this.disable=function(){s=!1;for(var e=0;e<a.length;e++)a[e].disable()};for(var d=0;d<r.length;d++)a[d]="string"!=typeof r[d]?r[d]:new t.Button(r[d],i),a[d].registerEventHandler("onclick",function(e){return function(t){o(e.getEventName(),t)}}(a[d]));this.activate()}};return e.exports("Framework.UI.WidgetLib",t)}(window.ServerSide||{}),window.ServerSide=function(e){e.requires("Lib.Utils");var t=function(t,n,r,i){function o(e){y.setCategory(e.Id);for(var t=i.nImages&&!h&&e.Images.length>=i.nImages?i.nImages:e.Images.length,n=0;n<t;n++){var r=i.useThumbnail?e.Images[n].ThumbNail:e.Images[n].ReviewImage;y.addImage(r,e.Images[n],e.Images[n].Id,null,null)}i.layer&&y.setActiveImage(i.layer.Id,null,!0),"function"==typeof d.onsetload&&d.onsetload()}function a(e){for(var t=[],n=0;n<e.length;n++)i.layer.Uploads&&-1!==i.layer.Uploads.indexOf(e[n].Id)&&t.push(e[n]);return t.toCategory=e.toCategory,t}function s(){i.layer&&r.Client.GetUploads(function(e){if(e=a(e),e.length>0&&!1!==i.insertCustom)if("Standard"===i.categoryType){var t=e.toCategory(g.applyTag("myImages"),-1);e.GetCategory=function(e){e(t)},b.addCategoryAtTop(g.applyTag("myImages"),t),m=f.Available}else m=f.Available;else m=f.NoCustom})}function l(e){for(var t=0;t<e.length;t++)b.addCategory(e[t].Name,e[t]);s()}function u(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];(void 0===i.knockout||!0===i.knockout&&r.Knockout||!0!==i.knockout&&!r.Knockout)&&(e[n].ImageType&&e[n].ImageType!==i.categoryType||t.push(r))}return t}function c(){e.Lib.Utils.defer(function(){m==f.Available&&b.setActiveCategory(-1)},{until:function(){return m!=f.Pending}})}var d=this;i=i||{},i.categoryType=i.categoryType||"Standard";var f={Pending:0,Available:1,NoCustom:2},p=n.nodeName?n:null,h=null,g=(e.Network.Connectors.PCS.Designer,new e.Framework.UI.Templating.RefLangTemplater(r.Designer));r.Designer.Galleries.Pagination&&(h={},h.text=g.applyTag("paginationText"));var v=e.Lib.Utils.SsgSerialiser.deserialise("category"),m=f.Pending;this.oncategorychange=null,this.onimagechange=null,this.onfirstcategoryload=null,this.onsetload=null,this.onallimagesloaded=null;var y=new e.Components.Gallery.Controller.StockImageGallery(t,null,null,i.isVertical,i.nImages,h),b=p?new e.Components.Gallery.Controller.GallerySelector(p):n;this.addCustomImageCategory=function(){r.Client.GetUploads(function(e){if(e.length>0){var t=e.toCategory(g.applyTag("myImages"),-1);e.GetCategory=function(e){e(t)};for(var n,r=0,i=b.getCategories().length;r<i;r++){var a=b.getCategories()[r];if(-1===a.id){n=a;break}}n?(n.data.Images=t.Images.slice(),y.clearImages(),o(t)):(b.addCategoryAtTop(g.applyTag("myImages"),t),m=f.Available),b.setActiveCategory(t.Id)}else m=f.NoCustom})},b.oncategorychange=function(t,n){v=n,e.Lib.Utils.SsgSerialiser.serialise("category",v),y.containsCategoryById(n.Id)?(y.setCategory(n.Id),"function"==typeof d.oncategorychange&&d.oncategorychange(t,n)):n.GetCategory(function(r){o(r),e.Lib.Utils.SsgSerialiser.deserialise("isCategoryLoaded")||(y.setActiveImage(r.Images[0].Id,null,!0),e.Lib.Utils.SsgSerialiser.serialise("isCategoryLoaded",!0),"function"==typeof d.onfirstcategoryload&&d.onfirstcategoryload(r)),"function"==typeof d.oncategorychange&&d.oncategorychange(t,n)})},y.onimagechange=function(e,t){"function"==typeof d.onimagechange&&d.onimagechange(e,t,v)},y.onallimagesloaded=function(e,t){"function"==typeof d.onallimagesloaded&&d.onallimagesloaded(e,t)},y.onpagechange=function(e){"function"==typeof d.onpagechange&&d.onpagechange(e)},this.show=function(e){y.setVisibility(e),b.setVisibility(e)},this.setActiveImage=function(e,t,n){y.setActiveImage(e,t,n)},i.startHidden&&y.setVisibility(!1),r.Designer.Galleries.Enabled?r.Designer.GetCategories(function(e){var t=u(e);l(t),i.layer&&"Custom"===i.layer.Type?c():null!=v?b.setActiveCategory(v.Id):t.length>0&&b.setActiveCategory(t[0].Id)}):(s(),c())};return e.exports("Components.Gallery.Adaptors.GallerySelectorUploads",t)}(window.ServerSide||{}),window.ServerSide=function(e){e.requires("Lib.Utils");var t=function(t,n,r,i,o){function a(e){for(var n=o.nImages&&e.Images.length>=o.nImages?o.nImages:e.Images.length,r=0;r<n;r++)t.addImage(e.Images[r].LargeImage,e.Images[r],null,null,e.Id,n);t.updateContainerWidth(p),o.layer&&t.setActiveImage(o.layer.Id),"function"==typeof f.onsetload&&f.onsetload()}function s(e){for(var t=[],n=0;n<e.length;n++)o.layer.Uploads&&-1!==o.layer.Uploads.indexOf(e[n].Id)&&t.push(e[n]);return t.toCategory=e.toCategory,t}function l(){i.Client.GetUploads(function(t){var r=new e.Framework.UI.Templating.RefLangTemplater(i.Designer);if(t=s(t),t.length>0&&insertCustom){var o=t.toCategory(r.applyTag("myImages"),v.Upload);t.GetCategory=function(e){e(o)},n.addCategoryAtTop(r.applyTag("myImages"),o),y=g.Available}else y=g.NoCustom})}function u(e){for(var t=[],n=o.categoryType||"Standard",r=0;r<e.length;r++){var i=e[r];(void 0===o.knockout||!0===o.knockout&&i.Knockout||!0!==o.knockout&&!i.Knockout)&&(e[r].ImageType&&e[r].ImageType!==n||t.push(i))}return t}function c(e){for(var t=0;t<e.length;t++){var r=e[t];n.addCategory(r.Name,r)}l()}function d(){e.Lib.Utils.defer(function(){y==g.Available&&n.setActiveCategory(-1)},{until:function(){return y!=g.Pending}})}o||(o={});var f=this,p=e.Configuration.Images.DefaultGallerySize,h=void 0!==r&&null!==r;insertCustom=void 0===o.insertCustom||o.insertCustom;var g={Pending:0,Available:1,NoCustom:2},v={Upload:-1,Search:-2},m=e.Lib.Utils.SsgSerialiser.deserialise("category"),y=g.Pending,b=!0;this.oncategorychange=null,this.onimagechange=null,this.onfirstcategoryload=null,this.onsetload=null,this.onallimagesloaded=null,t.createErrorContainer(),h&&(r.onsearchclick=function(e){if(""!==e){var n,r=t.filterImagesByAltValue(e),o=new Array;t.updateContainerWidth(p),i.Designer.GetSearchResults(e,function(e){if(null!=e){for(var i=0;i<e.length;i++){n=!1;for(var s=0;s<r.length;s++)if(e[i].Name===r[s]){n=!0;break}n||o.push(e[i])}if(o.length<1&&r.length<1)t.showError();else{t.hideError();var l={Images:o};l.Id=v.Search,a(l)}}})}else t.closeError()}),n.oncategorychange=function(n,i){h&&r.clearSearchText(),m=i,e.Lib.Utils.SsgSerialiser.serialise("category",m),t.containsCategoryById(i.Id)?(t.setCategory(i.Id),t.updateContainerWidth(p),"function"==typeof f.oncategorychange&&f.oncategorychange(n,i)):i.GetCategory(function(e){t.setCategory(e.Id),a(e),b&&"function"==typeof f.onfirstcategoryload&&(t.setActiveImage(e.Images[0].Id),f.onfirstcategoryload(e),b=!1),"function"==typeof f.oncategorychange&&f.oncategorychange(n,i)})},t.onimagechange=function(e,t){"function"==typeof f.onimagechange&&f.onimagechange(e,t,m)},t.onallimagesloaded=function(e,t){"function"==typeof f.onallimagesloaded&&f.onallimagesloaded(e,t)},i.Designer.Galleries.Enabled?i.Designer.GetCategories(function(e){c(u(e)),o.layer&&"Custom"===o.layer.Type?d():null!=m?n.setActiveCategory(m.Id):n.setActiveCategory(e[0].Id)}):(l(),d())};return e.exports("Components.Gallery.Adaptors.GallerySelectorSearchUploads",t)}(window.ServerSide||{}),window.ServerSide=function(e){var t=function(t,n,r){var i=this;this.onimagechange=null;e.Configuration.Images.DefaultGallerySize;this.onfirstcategoryload=null,this.onsetload=null,this.onallimagesloaded=null;var o=e.Lib.Utils.SsgSerialiser.deserialise("category");DesignerController.designer.GetCategories(function(a){function s(e){t.setCategory(e.Id);for(var n=r&&e.Images.length>=r?r:e.Images.length,o=0;o<n;o++)t.addImage(e.Images[o].LargeImage,e.Images[o],null,null,e.Id,n);"function"==typeof i.onsetload&&i.onsetload()}for(var l=0;l<a.length;l++)n.addCategory(a[l].Name,a[l]);n.oncategorychange=function(n,r){o=r,e.Lib.Utils.SsgSerialiser.serialise("category",o),t.containsCategoryById(r.Id)?t.setCategory(r.Id):r.GetCategory(function(e){t.setCategory(e.Id),s(e)})},a[0].GetCategory(function(e){s(e),o=e,t.setActiveImage(e.Images[0].Id),"function"==typeof i.onfirstcategoryload&&i.onfirstcategoryload(e)}),t.onimagechange=function(e,t){"function"==typeof i.onimagechange&&i.onimagechange(e,t,o)},t.onallimagesloaded=function(e,t){"function"==typeof i.onallimagesloaded&&i.onallimagesloaded(e,t)}})};return e.exports("Components.Gallery.Adaptors.GallerySelector",t)}(window.ServerSide||{}),window.ServerSide=function(e){var t=function(t,n,r,i,o){var a=this,s=e.Configuration.Images.DefaultGallerySize;this.onimagechange=null,this.onfirstcategoryload=null,this.onsetload=null,this.onallimagesloaded=null,t.createErrorContainer();var l=null;DesignerController.designer.GetCategories(function(u){function c(e,n){for(var r=o&&cat.Images.length>=o?o:cat.Images.length,l=0;l<r;l++)t.addImage(e[l].LargeImage,e[l],null,null,n,r);t.updateContainerWidth(s),i&&t.setActiveImage(i.Id),"function"==typeof a.onsetload&&a.onsetload()}for(var d=0;d<u.length;d++)n.addCategory(u[d].Name,u[d]);n.oncategorychange=function(e,n){l=n,r.clearSearchText(),t.containsCategoryById(n.Id)?(t.setCategory(n.Id),t.updateContainerWidth(s)):n.GetCategory(function(e){t.setCategory(e.Id),c(e.Images,e.Id)})},r.onsearchclick=function(e){if(""!==e){var n,r=t.filterImagesByAltValue(e),i=new Array;t.updateContainerWidth(s),DesignerController.designer.GetSearchResults(e,function(e){if(null!=e){for(var o=0;o<e.length;o++){n=!1;for(var a=0;a<r.length;a++)if(e[o].Name===r[a]){n=!0;break}n||i.push(e[o])}i.length<1?t.showError():(t.hideError(),c(i))}})}else t.closeError()},u[0].GetCategory(function(e){t.setCategory(e.Id),l=e,t.setActiveImage(e.Images[0].Id),"function"==typeof a.onfirstcategoryload&&a.onfirstcategoryload(e)}),t.onimagechange=function(t,n){e.Lib.Utils.SsgSerialiser.serialise("category",l),"function"==typeof a.onimagechange&&a.onimagechange(t,n,l)},t.onallimagesloaded=function(e,t){"function"==typeof a.onallimagesloaded&&a.onallimagesloaded(e,t)}})};return e.exports("Components.Gallery.Adaptors.GallerySelectorSearch",t)}(window.ServerSide||{}),window.ServerSide=function(e){var t=function(t,n,r,i){function o(e){return e.height<h.Height&&e.height>g.Height&&e.width<h.Width&&e.width>g.Width}function a(t,n,r){e.Network.Connectors.Facebook.GetFacebookUserId(t,function(e){e?n({token:t.token,id:e.id}):r?y({error:"failed to get user id"}):n({token:t.token,id:null})})}function s(t,n){e.Network.Connectors.Facebook.GetUserPhotos(t,function(e){var t=c(e.data);e.paging.next?l(e.paging.next,[],function(e){t=t.concat(e),n(t)}):n(t)})}function l(t,n,r){e.Network.Connectors.Facebook.Get(t,function(e){n=n.concat(c(e.data)),e.paging.next?l(e.paging.next,n,r):r(n)})}function u(t,n){e.Network.Connectors.Facebook.GetCategories(t,function(e){n(e)})}function c(e){var t=[];if(e&&e.length>0)for(var n=0;n<e.length;n++){var r=d(e[n].images);r&&t.push({id:e[n].id,source:r.source})}return t}function d(e){if(e&&e.length>0)for(var t=0;t<e.length;t++)if(o(e[t]))return e[t]}function f(e){w.setCategory(e.id);for(var t=0;t<e.images.length;t++){var n=e.images[t];w.addImage(n.source,n,n.id,"Facebook image "+t,e.id)}w.updateContainerWidth(m)}var p=this,h=i.maxSize||{Height:1e3,Width:1e4},g=i.minSize||{Height:672,Width:1050},v=i.fbData,m=i.galleryWidth||e.Configuration.Images.DefaultGallerySize;this.oncategorychange=null,this.onimagechange=null,this.onfirstcategoryload=null,this.onsetload=null,this.onallimagesloaded=null;var y=i.onError||function(e){},b=e.Lib.Utils.SsgSerialiser.deserialise("category"),x=[],w=new e.Components.Gallery.Controller.StockImageGallery(t,null,null,i.isVertical,i.nImages,null);!function(){a(v,function(e){u(e,function(e){e&&e.data&&e.data.length>0&&e.data.forEach(function(e){s({token:v.token,id:e.id},function(t){if(t.length>0){var r={id:x.length,facebookAlbumId:e.id,name:e.name,images:t};x.push(r),n.addCategory(r.name,r),1==x.length&&f(r)}})})})},function(){return null}),n.oncategorychange=function(t,n){b=n,e.Lib.Utils.SsgSerialiser.serialise("category",b),w.containsCategoryById(n.id)?(w.setCategory(n.id),"function"==typeof p.oncategorychange&&p.oncategorychange(t,n)):(f(n),"function"==typeof p.oncategorychange&&p.oncategorychange(t,n)),w.updateContainerWidth(m)},w.onimagechange=function(e,t){"function"==typeof p.onimagechange&&p.onimagechange(e,t)},w.onallimagesloaded=function(e,t){"function"==typeof p.onallimagesloaded&&p.onallimagesloaded(e,t)}}()};return e.exports("Components.Gallery.Adaptors.FacebookSelector",t)}(window.ServerSide||{}),window.ServerSide=function(e){var t=function(e,t){function n(e,t){var n=new Image;n.src=t,n.onload=function(){e.html(n)}}function r(){e.innerHTML=""}var i=t.imageClassName||"gallery-image",o=t.onImageSelected||function(){},a=t.imageType||"Review",s=t.showImageAsChild;return this.loadImages=function(l){r();for(var u=t.maxSize?Math.min(t.maxSize,l.length):l.length,c=0;c<u;c++){var d=l[c],f=$("<button></button>");f.addClass(i).attr("id",d.Id).attr("data-image-locked",d.Locked),d.Name&&(f.attr("title",d.Name),f.attr("aria-label",d.Name));var p="Large"===a?d.LargeImage:d.ReviewImage||d.LargeImage;s?(f.html('<div class="clipart-loading"></div>'),n(f,p),f.click(function(e){o(e.currentTarget.id)})):(f.css("background-image","url("+p+")"),f.click(function(e){o(e.target.id)})),f.on("keydown",function(e){!e||13!==e.keyCode&&32!==e.keyCode||o(e.target.id)}),e.appendChild(f[0])}},t.images&&this.loadImages(t.images),this};return e.exports("Components.MiniImageGallery",t)}(window.ServerSide||{}),window.ServerSide=function(e){function t(e){this.publicPath=e.publicPath||"/filters/",this.gradingCanvas=e.gradingCanvas,this.gradingContext=gradingCanvas.getContext("2d"),this.maxSize=e.maxSize||[600,600],this.filters={amaro:[{lut:"amaro_100.png"},{lut:"amaro_100-2.png",alpha:"mask.jpg"}],inkwell:[{lut:"inkwell_100.png",baselineLut:"inkwell_0.png"}],clarendon:[{lut:"clarendon_100.png"}],gingham:[{lut:"gingham_100.png"}],juno:[{lut:"juno_100.png"}],lark:[{lut:"lark_100.png"}],lofi:[{lut:"lofi_100.png"}],ludwig:[{lut:"ludwig_100.png"}],valencia:[{lut:"valencia_100.png"}],xpro2:[{lut:"xpro2_100.png"}]},this.baselineLut="baseline_lut.png",this.activeFilter=null,this.intensityMap={1:30,2:65,3:100},this.baseImage=new Image,this.imageSize=[]}return t.prototype.setImage=function(e,t){var n=this;this.baseImage.onload=function(){var e,r=n.baseImage.width,i=n.baseImage.height,o=r>i;e=o?Math.min(1,n.maxSize[0]/r):Math.min(1,n.maxSize[1]/i);var a=Math.round(r*e),s=Math.round(i*e);n.imageSize=[a,s],n.gradingCanvas.width=a,n.gradingCanvas.height=s,n.gradingContext.drawImage(n.baseImage,0,0,a,s),n.baseImage.onload=void 0,n.baseImage.src=n.gradingCanvas.toDataURL(),t&&t()},this.baseImage.src=e},t.prototype.setFilter=function(e,t,n){function r(e,t){a(e.baselineLut||l.baselineLut,function(n){e.baselineLutImage=n,t(e)})}function i(e,t){a(e.lut,function(n){e.lutImage=n,t(e)})}function o(e,t){e.alpha?a(e.lut,function(n){e.alphaImage=n,t(e)}):t(e)}function a(e,t){var n=new Image;n.src=l.publicPath+e,n.onload=function(){t(n)}}this.activeFilter=this.filters[e],this.intensity=this.intensityMap[t];var s=this.filters[e],l=this,u=0;s.forEach(function(e){r(e,function(){i(e,function(){o(e,function(){++u===s.length&&n()})})})})},t.prototype.lutToData=function(e,t){var n=document.createElement("canvas");n.width=t.width,n.height=t.height;var r=n.getContext("2d");r.drawImage(t,0,0);var i=r.getImageData(0,0,t.naturalWidth,t.naturalHeight);r.clearRect(0,0,t.naturalWidth,t.naturalHeight),r.drawImage(e,0,0);var o=r.getImageData(0,0,t.naturalWidth,t.naturalHeight),a=this.blendLayers(o,i,this.intensity);return r.putImageData(a,0,0),a.data},t.prototype.reset=function(){var e=this.baseImage;this.gradingContext.clearRect(0,0,this.imageSize[0],this.imageSize[1]),this.gradingContext.drawImage(e,0,0)},t.prototype.applyLut=function(e,t,n,r){var i=this.imageSize[0],o=this.imageSize[1],a=e.getImageData(0,0,this.imageSize[0],this.imageSize[1]),s=a.data,l=this.lutToData(n,t);if(r){var u=document.createElement("canvas");u.width=i,u.height=o,u.getContext("2d").drawImage(r,0,0,i,o);var c=u.getContext("2d").getImageData(0,0,i,o).data}for(var d=0,f=s.length;d<f;d+=4){var p,h,g;p=Math.floor(s[d]/4),h=Math.floor(s[d+1]/4),g=Math.floor(s[d+2]/4);var v,m,y;v=g%8*64+p,m=64*Math.floor(g/8)+h,y=4*(m*t.naturalWidth+v);var b,x,w,C;b=l[y],x=l[y+1],w=l[y+2],s[d]=b,s[d+1]=x,s[d+2]=w,C=r?c[d]:255,s[d+3]=C}return a},t.prototype.blendLayers=function(e,t,n){for(var r=e.data,i=t.data,o=n/100||1,a=0,s=r.length;a<s;a+=4){var l,u,c,d,f,p,h,g,v,m,y,b;l=i[a],u=i[a+1],c=i[a+2],d=i[a+3]*o,f=r[a],p=r[a+1],h=r[a+2],g=r[a+3],v=l*d/255+f*g*(255-d)/65025,m=u*d/255+p*g*(255-d)/65025,y=c*d/255+h*g*(255-d)/65025,b=d+g*(255-d)/255,r[a]=v,r[a+1]=m,r[a+2]=y,r[a+3]=b}return e},t.prototype.process=function(e){var t=this;this.reset();var n=document.createElement("canvas");n.width=this.imageSize[0],n.height=this.imageSize[1],n.getContext("2d").drawImage(this.baseImage,0,0);var r,i=n.getContext("2d"),o=this.activeFilter.map(function(e){return t.applyLut(i,e.lutImage,e.baselineLutImage,e.alphaImage)});r=0===o.length?o[0]:o.slice(1).reduce(function(e,n){return t.blendLayers(e,n)},o[0]),this.gradingCanvas.getContext("2d").putImageData(r,0,0),e&&e(t.gradingCanvas.toDataURL())},e.exports("Lib.UI.SpecialEffects",t)}(window.ServerSide||{}),window.ServerSide=function(e){e.requires("Lib.Dom.EventHandler");var t=function(t,n,r){function i(e){return f=!1,d.touchPoint={x:e.pageX,y:e.pageY},d.startPoint={x:e.pageX,y:e.pageY},d.modelSnapshot=n.clone(),null!=d.gestureStart&&d.gestureStart(c(e)),s(e)}function o(e){return null!=d.touchPoint&&null!=d.startPoint&&(d.touchPoint.x=e.pageX,d.touchPoint.y=e.pageY,null==d.gestureChange||f||d.gestureChange(c(e))),s(e)}function a(e){return null==d.gestureEnd||null==d.startPoint||f||d.gestureEnd(c(e)),this.touchPoint=null,this.startPoint=null,s(e)}function s(e){return e.stopPropagation(),e.preventDefault(),e.returnValue=!1,!1}function l(e,t){return{x:e.x-t.x,y:e.y-t.y}}function u(){return l(d.touchPoint,d.startPoint)}function c(e){var t=u();return{x:t.x,y:t.y,scale:0,rotation:0,snapshot:d.modelSnapshot,innerEvent:e,target:d.el}}var d=this;this.el=t,this.gestureStart=null,this.gestureChange=null,this.gestureEnd=null,this.touchPoint=null,this.startPoint=null,this.modelSnapshot=null;var f=!1;this.attachEvents=function(){e.Lib.Dom.EventHandler.addHandler(d.el,"mousedown",i),e.Lib.Dom.EventHandler.addHandler(d.el,"mousemove",o),e.Lib.Dom.EventHandler.addHandler(d.el,"mouseup",a)},this.detachEvents=function(){e.Lib.Dom.EventHandler.removeHandler(d.el,"mousedown",i),e.Lib.Dom.EventHandler.removeHandler(d.el,"mousemove",o),e.Lib.Dom.EventHandler.removeHandler(d.el,"mouseup",a)},this.stopCurrentEvent=function(){f=!0},this.attachEvents()};return e.exports("Components.Canvas.Gestures.CanvasMoveGesture",t)}(window.ServerSide||{}),window.ServerSide=function(e){e.requires("Lib.Dom.EventHandler");var t=function(e,t){this.el=e,this.gestureStart=null,this.gestureChange=null,this.gestureEnd=null,this.touchPoint=null,this.startPoint=null,this.modelSnapshot=null,this.AttachEvents(t)};return t.prototype.AttachEvents=function(t){function n(e){return e.stopPropagation(),e.preventDefault(),e.returnValue=!1,!1}var r=this;this.startHandler=function(e){return r.touchPoint={x:e.pageX,y:e.pageY},r.startPoint={x:e.pageX,y:e.pageY},r.modelSnapshot=t.clone(),null!=r.gestureStart&&r.gestureStart(r._MakeGestureEvent(e)),n(e)},this.moveHandler=function(e){return null!=r.touchPoint&&(r.touchPoint.x=e.pageX,r.touchPoint.y=e.pageY,null!=r.gestureChange&&r.gestureChange(r._MakeGestureEvent(e))),n(e)},this.endHandler=function(e){return null!=r.gestureEnd&&r.gestureEnd(r._MakeGestureEvent(e)),r.touchPoint=null,r.startPoint=null,n(e)},e.Lib.Dom.EventHandler.addHandler(this.el,"mousedown",this.startHandler),e.Lib.Dom.EventHandler.addHandler(this.el,"mousemove",this.moveHandler),e.Lib.Dom.EventHandler.addHandler(this.el,"mouseup",this.endHandler)},t.prototype.DetachEvents=function(){e.Lib.Dom.EventHandler.removeHandler(this.el,"mousedown",this.startHandler),e.Lib.Dom.EventHandler.removeHandler(this.el,"mousemove",this.moveHandler),e.Lib.Dom.EventHandler.removeHandler(this.el,"mouseup",this.endHandler)},t.prototype.getDelta=function(){return this._getDifference(this.touchPoint,this.startPoint)},t.prototype.getDeltaScale=function(){var e=this.modelSnapshot?this.modelSnapshot.getCentre():null;return null!=this.touchPoint&&null!=e?(this._toScaler(this.touchPoint,e)-this._toScaler(this.startPoint,e))/this.modelSnapshot.width:null},t.prototype._getDifference=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},t.prototype._toScaler=function(e,t){var n=this._getDifference(e,t);return Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2))},t.prototype._MakeGestureEvent=function(e){var t=this.getDeltaScale(),n=this;return{x:0,y:0,scale:t,rotation:0,snapshot:n.modelSnapshot,innerEvent:e,target:n.el}},e.exports("Components.Canvas.Gestures.CanvasScaleGesture",t)}(window.ServerSide||{}),window.ServerSide=function(e){e.requires("Lib.Dom.EventHandler");var t=function(e,t){this.el=e,this.gestureStart=null,this.gestureChange=null,this.gestureEnd=null,this.touchPoint=null,this.startPoint=null,this.modelSnapshot=null,this.AttachEvents(t)};return t.prototype.AttachEvents=function(t){function n(e){return e.stopPropagation(),e.preventDefault(),e.returnValue=!1,!1}var r=this;this.startHandler=function(e){return r.touchPoint={x:e.pageX,y:e.pageY},r.startPoint={x:e.pageX,y:e.pageY},r.modelSnapshot=t.clone(),null!=r.gestureStart&&r.gestureStart(r._MakeGestureEvent(e)),n(e)},this.moveHandler=function(e){return null!=r.touchPoint&&(r.touchPoint.x=e.pageX,r.touchPoint.y=e.pageY,null!=r.gestureChange&&r.gestureChange(r._MakeGestureEvent(e))),n(e)},this.endHandler=function(e){return null!=r.gestureEnd&&r.gestureEnd(r._MakeGestureEvent(e)),r.touchPoint=null,r.startPoint=null,n(e)},e.Lib.Dom.EventHandler.addHandler(this.el,"mousedown",this.startHandler),e.Lib.Dom.EventHandler.addHandler(this.el,"mousemove",this.moveHandler),e.Lib.Dom.EventHandler.addHandler(this.el,"mouseup",this.endHandler)},t.prototype.DetachEvents=function(){e.Lib.Dom.EventHandler.removeHandler(this.el,"mousedown",this.startHandler),e.Lib.Dom.EventHandler.removeHandler(this.el,"mousemove",this.moveHandler),e.Lib.Dom.EventHandler.removeHandler(this.el,"mouseup",this.endHandler)},t.prototype.getDeltaAngle=function(){var e=this.modelSnapshot?this.modelSnapshot.getCentre():null;return null!=this.touchPoint&&null!=e?this._getAngle(e,this.startPoint)-this._getAngle(e,this.touchPoint):null},t.prototype._getDifference=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},t.prototype._getAngle=function(e,t){var n=this._getDifference(e,t);return Math.atan2(n.y,n.x)},t.prototype._MakeGestureEvent=function(e){var t=this.getDeltaAngle(),n=this;return{x:0,y:0,scale:0,rotation:t,snapshot:n.modelSnapshot,innerEvent:e,target:n.el}},e.exports("Components.Canvas.Gestures.CanvasRotateGesture",t)}(window.ServerSide||{}),window.ServerSide=function(e){var t=e.Components.Canvas.Gestures,n=function(n,r,i){var o=this,a=!0;this.onMove=null,this.onRotate=null,this.onScale=null,this.onEnd=null;var s=function(e){var t=function(t){var n=document.createElement("div");return n.className="handle-circle",t(n),e.appendChild(n),n},n=[t(function(e){e.style.right="-5px",e.style.bottom="-5px"}),t(function(e){e.style.left="-5px",e.style.top="-5px"}),t(function(e){e.style.right="-5px",e.style.top="-5px"}),t(function(e){e.style.left="-5px",e.style.bottom="-5px"})],r={},i=function(e,t,n){return!!e.surrounds(t,n)&&(r=e,!0)};return{hide:function(){n[0].style.display="none",n[1].style.display="none",n[2].style.display="none",n[3].style.display="none"},show:function(){n[0].style.display="block",n[1].style.display="block",n[2].style.display="block",n[3].style.display="block"},anySurround:function(e,t){return i(n[0],e,t)||i(n[1],e,t)||i(n[2],e,t)||i(n[3],e,t)},getLastSurroundingHandle:function(){return r},each:function(e){for(var t=0;t<n.length;t++)e(n[t])}}}(r.parentNode),l=null,u=0,c=0;e.Lib.Dom.EventHandler.addHandler(n,"mousemove",function(e){s.anySurround(e.pageX,e.pageY)&&a?(s.getLastSurroundingHandle().className="handle-circle hightlighted-handle",n.style.cursor="pointer"):s.each(function(t){t.className="handle-circle",r.surrounds(e.pageX,e.pageY)&&a?n.style.cursor="pointer":n.style.cursor="auto"})});var d=new t.CanvasMoveGesture(n,i);d.gestureStart=function(e){r.surrounds(e.innerEvent.pageX,e.innerEvent.pageY)&&!s.anySurround(e.innerEvent.pageX,e.innerEvent.pageY)&&a&&(l=r,h(e,2))},d.gestureChange=function(e){l===r&&a&&null!=o.onMove&&o.onMove(e)},d.gestureEnd=function(e){g(e)};var f=new t.CanvasRotateGesture(n,i);f.gestureStart=function(e){s.anySurround(e.innerEvent.pageX,e.innerEvent.pageY)&&a&&(l=s.getLastSurroundingHandle(),h(e,1))},f.gestureChange=function(e){l===s.getLastSurroundingHandle()&&a&&null!=o.onRotate&&o.onRotate(e)},f.gestureEnd=function(e){g(e)};var p=new t.CanvasScaleGesture(n,i);p.gestureStart=function(e){s.anySurround(e.innerEvent.pageX,e.innerEvent.pageY)&&a&&(l=s.getLastSurroundingHandle(),h(e,1))},p.gestureChange=function(e){l===s.getLastSurroundingHandle()&&a&&null!=o.onScale&&o.onScale(e)},p.gestureEnd=function(e){g(e)};var h=function(e,t){n.style.position="fixed",c+=t,"function"==typeof o.onStart&&a&&2===c&&(o.onStart(e),c=0)},g=function(e){a&&(l=null,u++,n.style.position="absolute","function"==typeof o.onEnd&&3===u&&(o.onEnd(e),u=0))};this.disable=function(){a=!1,s.hide()},this.enable=function(){a=!0,s.show()},this.glow=function(e){r.className=e?"glowing":""},this.glow(!0),this.setMoveMode=function(){},this.setScaleMode=function(){},this.setRotateMode=function(){}};return e.exports("Components.Canvas.EventLayers.HandleBasedCanvasEventLayer",n)}(window.ServerSide||{}),window.ServerSide=function(e){var t=e.Components.Canvas.Gestures,n=function(n,r,i){var o=this,a=!0;this.onMove=null,this.onRotate=null,this.onScale=null,this.onEnd=null;var s=function(e){
var t="position:absolute; background-color: #fff; width: 9px; height: 9px; cursor: pointer; border-radius: 5px; border: 1px solid #31B7DB",n=function(n){var r=document.createElement("div");return r.className="handle-circle scale",r.setAttribute("style",t),n(r),e.appendChild(r),r},r=[n(function(e){e.style.right="-5px",e.style.top="-5px"}),n(function(e){e.style.right="-5px",e.style.bottom="-5px"}),n(function(e){e.style.left="-5px",e.style.top="-5px"}),n(function(e){e.style.left="-5px",e.style.bottom="-5px"}),function(n){var r=document.createElement("div");return r.className="handle-circle rotate",r.setAttribute("style",t),n(r),e.appendChild(r),r}(function(e){e.style.left="50%",e.style.top="-32px"})],i={},o=function(e,t,n){return!!e.surrounds(t,n)&&(i=e,!0)};return{hide:function(){r[0].style.display="none",r[1].style.display="none",r[2].style.display="none",r[3].style.display="none",r[4].style.display="none"},show:function(){r[0].style.display="block",r[1].style.display="block",r[2].style.display="block",r[3].style.display="block",r[4].style.display="block"},anySurround:function(e,t){return o(r[0],e,t)||o(r[1],e,t)||o(r[2],e,t)||o(r[3],e,t)||o(r[4],e,t)},rotateSurround:function(e,t){return o(r[4],e,t)},scalesSurround:function(e,t){return o(r[0],e,t)||o(r[1],e,t)||o(r[2],e,t)||o(r[3],e,t)},getLastSurroundingHandle:function(){return i},each:function(e){for(var t=0;t<r.length;t++)e(r[t])}}}(r.parentNode),l=null,u=0,c=0;e.Lib.Dom.EventHandler.addHandler(n,"mousemove",function(e){if(s.anySurround(e.pageX,e.pageY)&&a){var t=s.getLastSurroundingHandle().className.split(" ");-1===t.indexOf("hightlighted-handle")&&t.push("hightlighted-handle"),s.getLastSurroundingHandle().className=t.join(" ")}else s.each(function(e){var t=e.className.split(" "),n=t.indexOf("hightlighted-handle");-1!==n&&t.splice(n,1),e.className=t.join(" "),e.style.backgroundColor="#fff"});r.surrounds(e.pageX,e.pageY)&&a?n.style.cursor="pointer":n.style.cursor="auto"});var d=new t.CanvasMoveGesture(n,i);d.gestureStart=function(e){r.surrounds(e.innerEvent.pageX,e.innerEvent.pageY)&&!s.anySurround(e.innerEvent.pageX,e.innerEvent.pageY)&&a&&(l=r,h(e,2))},d.gestureChange=function(e){l===r&&a&&null!=o.onMove&&o.onMove(e)},d.gestureEnd=function(e){g(e)};var f=new t.CanvasRotateGesture(n,i);f.gestureStart=function(e){s.rotateSurround(e.innerEvent.pageX,e.innerEvent.pageY)&&a&&(l=s.getLastSurroundingHandle(),h(e,1))},f.gestureChange=function(e){var t=s.getLastSurroundingHandle();if(t&&t.className){-1!==t.className.indexOf("rotate")&&l===s.getLastSurroundingHandle()&&a&&null!=o.onRotate&&o.onRotate(e)}},f.gestureEnd=function(e){g(e)};var p=new t.CanvasScaleGesture(n,i);p.gestureStart=function(e){s.scalesSurround(e.innerEvent.pageX,e.innerEvent.pageY)&&a&&(l=s.getLastSurroundingHandle(),h(e,1))},p.gestureChange=function(e){var t=s.getLastSurroundingHandle();if(t&&t.className){-1!==t.className.indexOf("scale")&&l===s.getLastSurroundingHandle()&&a&&null!=o.onScale&&o.onScale(e)}},p.gestureEnd=function(e){g(e)};var h=function(e,t){n.style.position="fixed",c+=t,"function"==typeof o.onStart&&a&&2===c&&(o.onStart(e),c=0)},g=function(e){a&&(l=null,u++,n.style.position="absolute","function"==typeof o.onEnd&&3===u&&(o.onEnd(e),u=0))};this.disable=function(){a=!1,s.hide()},this.enable=function(){a=!0,s.show()},this.glow=function(e){r.className=e?"glowing":""},this.glow(!0),this.setMoveMode=function(){},this.setScaleMode=function(){},this.setRotateMode=function(){}};return e.exports("Components.Canvas.EventLayers.HandleScaleRotateCanvasEventLayer",n)}(window.ServerSide||{}),window.ServerSide=function(e){var t=e.Components.Canvas.Gestures,n=function(e,n,r){var i=this;this.onMove=null,this.onRotate=null,this.onScale=null,this.onEnd=null;var o=document.createElement("img");o.src="img/handle4.png",o.style.width="50px",o.style.height="50px",o.style.position="absolute",o.style.right="0px",o.style.bottom="0px",n.parentNode.appendChild(o);var a=null,s=new t.MoveGesture(e,r);s.gestureStart=function(e){n.surrounds(e.innerEvent.touches[0].pageX,e.innerEvent.touches[0].pageY)&&!o.surrounds(e.innerEvent.touches[0].pageX,e.innerEvent.touches[0].pageY)&&(a=n)},s.gestureChange=function(e){a===n&&null!=i.onMove&&i.onMove(e)},s.gestureEnd=function(e){a=null,"function"==typeof i.onEnd&&i.onEnd(e)};var l=new t.SingleFingerRotateGesture(e,r);l.gestureStart=function(e){o.surrounds(e.innerEvent.touches[0].pageX,e.innerEvent.touches[0].pageY)&&(a=o)},l.gestureChange=function(e){a===o&&null!=i.onRotate&&i.onRotate(e)},l.gestureEnd=function(e){a=null,"function"==typeof i.onEnd&&i.onEnd(e)};var u=new t.SingleFingerScaleGesture(e,r);u.gestureStart=function(e){o.surrounds(e.innerEvent.touches[0].pageX,e.innerEvent.touches[0].pageY)&&(a=o)},u.gestureChange=function(e){a===o&&null!=i.onScale&&i.onScale(e)},u.gestureEnd=function(e){a=null,"function"==typeof i.onEnd&&i.onEnd(e)},this.disable=function(){},this.enable=function(){}};return e.exports("Components.Canvas.EventLayers.AndroidEventLayer",n)}(window.ServerSide||{}),window.ServerSide=function(e){var t=function(e,t){this.el=e,this.gestureStart=null,this.gestureChange=null,this.gestureEnd=null,this.modelSnapshot=null,this.touchPoint=null,this.startPoint=null,this._initEvents(t)};return t.prototype._initEvents=function(e){var t=this,n=new P(this.el,{prevent_default:!0,scale_treshold:0,rotation_threshold:0});n.ontransformstart=function(n){t.modelSnapshot=e.clone(),t.touchPoint={x:n.position.x,y:n.position.y},t.startPoint={x:n.position.x,y:n.position.y},null!=t.gestureStart&&t.gestureStart(t._MakeGestureEvent(n))},n.ontransform=function(e){t.touchPoint.x=e.position.x,t.touchPoint.y=e.position.y,null!=t.gestureChange&&t.gestureChange(t._MakeGestureEvent(e))},n.ontransformend=function(e){null!=t.gestureEnd&&t.gestureEnd(t._MakeGestureEvent(e))}},t.prototype.getDelta=function(){return this._getDifference(this.touchPoint,this.startPoint)},t.prototype._getDifference=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},t.prototype._MakeGestureEvent=function(e){var t=this,n=this.getDelta();return{x:n.x,y:n.y,scale:e.scale-1,rotation:-e.rotation/360*2*Math.PI,snapshot:t.modelSnapshot,innerEvent:e.originalEvent}},e.exports("Components.Canvas.Gestures.PinchGesture",t)}(window.ServerSide||{}),window.ServerSide=function(e){var t=function(e,t){this.el=e,this.touchPoint=null,this.startPoint=null,this.gestureStart=null,this.gestureChange=null,this.gestureEnd=null,this.modelSnapshot=null,this._initEvents(t,this)};return t.prototype._initEvents=function(e,t){this.startHandler=function(n){n.stopPropagation(),t.initMoveGesture(e.clone(),n),null!=t.gestureStart&&t.gestureStart(t._MakeGestureEvent(n))},this.moveHandler=function(e){e.preventDefault(),t.updateTouchPoint(e),null!=t.gestureChange&&t.gestureChange(t._MakeGestureEvent(e))},this.endHandler=function(e){null!=t.gestureEnd&&t.gestureEnd(t._MakeGestureEvent(e))},this.el.addEventListener("touchstart",this.startHandler),this.el.addEventListener("touchmove",this.moveHandler),this.el.addEventListener("touchend",this.endHandler)},t.prototype.detachEvents=function(){this.el.removeEventListener("touchstart",this.startHandler),this.el.removeEventListener("touchmove",this.moveHandler),this.el.removeEventListener("touchend",this.endHandler)},t.prototype.initMoveGesture=function(e,t){this.modelSnapshot=e,this.touchPoint={x:t.pageX||t.touches[0].pageX,y:t.pageY||t.touches[0].pageY},this.startPoint={x:t.pageX||t.touches[0].pageX,y:t.pageY||t.touches[0].pageY}},t.prototype.updateTouchPoint=function(e){this.touchPoint.x=e.pageX||e.touches[0].pageX,this.touchPoint.y=e.pageY||e.touches[0].pageY},t.prototype.getDelta=function(){return this._getDifference(this.touchPoint,this.startPoint)},t.prototype._getDifference=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},t.prototype._MakeGestureEvent=function(e){var t=this.getDelta(),n=this;return{x:t.x,y:t.y,scale:0,rotation:0,snapshot:n.modelSnapshot,innerEvent:e}},e.exports("Components.Canvas.Gestures.TwoFingerMoveGesture",t)}(window.ServerSide||{}),window.ServerSide=function(e){var t=function(e,t){this.el=e,this.gestureStart=null,this.gestureChange=null,this.gestureEnd=null,this.modelSnapshot=null,this._initEvents(t,this)};return t.prototype._initEvents=function(e,t){this.startHandler=function(n){n.stopPropagation(),n.preventDefault(),t.modelSnapshot=e.clone(),null!=t.gestureStart&&t.gestureStart(t._MakeGestureEvent(n))},this.moveHandler=function(e){e.preventDefault(),null!=t.gestureChange&&t.gestureChange(t._MakeGestureEvent(e))},this.endHandler=function(e){e.preventDefault(),null!=t.gestureEnd&&t.gestureEnd(t._MakeGestureEvent(e))},this.el.addEventListener("gesturestart",this.startHandler),this.el.addEventListener("gesturechange",this.moveHandler),this.el.addEventListener("gestureend",this.endHandler)},t.prototype.detachEvents=function(){this.el.removeEventListener("gesturestart",this.startHandler),this.el.removeEventListener("gesturechange",this.moveHandler),this.el.removeEventListener("gestureend",this.endHandler)},t.prototype._MakeGestureEvent=function(e){var t=this;return{x:0,y:0,scale:e.scale-1,rotation:-e.rotation/360*2*Math.PI,snapshot:t.modelSnapshot,innerEvent:e}},e.exports("Components.Canvas.Gestures.ApplePinchGesture",t)}(window.ServerSide||{}),window.ServerSide=function(e){var t=e.Components.Canvas.Gestures,n=function(e,n,r){var i=this,o=!0;this.onMove=null,this.onRotate=null,this.onScale=null,this.onEnd=null,this.onMulti=null;var a=null,s=new t.MoveGesture(e,r);s.gestureStart=function(e){n.surrounds(e.innerEvent.touches[0].pageX,e.innerEvent.touches[0].pageY)&&(a=n),"function"==typeof i.onStart&&o&&i.onStart(e)},s.gestureChange=function(e){a===n&&null!=i.onMove&&o&&i.onMove(e)},s.gestureEnd=function(e){a=null,"function"==typeof i.onEnd&&o&&i.onEnd(e)};var l=new t.ApplePinchGesture(e,r);l.gestureStart=function(e){n.surrounds(e.innerEvent.touches[0].pageX,e.innerEvent.touches[0].pageY)&&(a=n,"function"==typeof i.onMulti&&i.onMulti())},l.gestureChange=function(e){a===n&&(s.stopCurrentEvent(),null!=i.onScale&&o&&i.onScale(e),null!=i.onRotate&&o&&i.onRotate(e))},l.gestureEnd=function(e){a=null,"function"==typeof i.onEnd&&o&&i.onEnd(e)};var u=new t.TwoFingerMoveGesture(e,r);u.gestureStart=function(e){n.surrounds(e.innerEvent.touches[0].pageX,e.innerEvent.touches[0].pageY)&&(a=n,e.innerEvent.touches.length>1&&"function"==typeof i.onMulti&&i.onMulti())},u.gestureChange=function(e){a===n&&(s.stopCurrentEvent(),null!=i.onMove&&o&&i.onMove(e))},u.gestureEnd=function(e){a=null,"function"==typeof i.onEnd&&o&&i.onEnd(e)},this.disable=function(){o=!1},this.enable=function(){o=!0}};return e.exports("Components.Canvas.EventLayers.AppleEventLayer",n)}(window.ServerSide||{}),window.ServerSide=function(e){var t=function(e){function t(e){return e[0]+","+e[1]+","+e[2]+","+e[3]+","+e[4]+","+e[5]+","+e[6]+","+e[7]+","+e[8]+","+e[9]+","+e[10]+","+e[11]+","+e[12]+","+e[13]+","+e[14]+","+e[15]}this.Update=function(n){var r=(n.flip,n.flip?"-1":"1"),i=Math.cos(n.rotation)*n.scale,o=i,a=Math.sin(-n.rotation)*n.scale,s=Math.sin(n.rotation)*n.scale,l=n.left,u=n.top,c=n.scale,d=[i,a,0,0,s,o,0,0,0,0,c,0,l,u,0,1];e.style["-webkit-transform"]=e.style["-ms-transform"]=e.style["-o-transform"]=e.style.MozTransform="matrix3d("+t(d)+")scaleX("+r+")",d=i=o=i=a=s=l=u=c=null}};return e.exports("Components.Canvas.Core.Matrix3dCssEngine",t)}(window.ServerSide||{}),window.ServerSide=function(e){var t=function(e){this.Update=function(t){var n=t.flip?"-1":"1";e.style["-webkit-transform"]=e.style["-ms-transform"]=e.style["-o-transform"]=e.style.MozTransform="translate("+t.left+"px,"+t.top+"px)scale("+t.scale+") rotateZ("+-t.rotation+"rad)scaleX("+n+")"}};return e.exports("Components.Canvas.Core.Translate2dCssEngine",t)}(window.ServerSide||{}),window.ServerSide=function(e){var t=function(t,n){function r(){return null!=(i=document.getElementById("overlay"+n))?i:(i=document.createElement("div"),i.style.width="100%",i.style.height="100%",i.style.position="absolute",i.style.zIndex=e.Configuration.Canvas.zIndex.overlay+n,i.style.top=0,i.style.left=0,i.style.backgroundColor="rgba(255, 255, 255, 0)",i.id="overlay"+n,t.parentNode.parentNode.appendChild(i),i)}var i;return{renderOverlay:function(e){},setIndex:function(t){i.style.zIndex=e.Configuration.Canvas.zIndex.overlay+t},getIndex:function(){return i.style.zIndex-e.Configuration.Canvas.zIndex.overlay},getEventLayer:function(n){var i=e.Components.Canvas.EventLayers,o=new e.Lib.Utils.BrowserCheck;if(!o.isTouchDevice())return new i.HandleBasedCanvasEventLayer(r(),t,n);if(o.isIOS())return new i.AppleEventLayer(r(),t,n);var a=new i.ModalHammerEventLayer(r(),t,n);return a.setMoveMode(),a}}};return e.exports("Components.Canvas.EventLayers.HandleBasedEventFactory",t)}(window.ServerSide||{}),window.ServerSide=function(e){var t=function(t,n,r){this.listener=e.Components.Canvas.EventLayers.EventFacades.WebkitEventFacade,this.el=t,this.gestureStart=null,this.gestureChange=null,this.gestureEnd=null,this.touchPoint=null,this.startPoint=null,this.modelSnapshot=null,this._cancelled=!1,this.AttachEvents(n)};return t.prototype.AttachEvents=function(e){var t=this;this.startHandler=function(n){n.stopPropagation(),t._cancelled=!1,t._init(e.clone(),n),null!=t.gestureStart&&t.gestureStart(t._MakeGestureEvent(n))},this.moveHandler=function(e){e.stopPropagation(),e.preventDefault(),t.updateTouchPoint(e),null==t.gestureChange||t._cancelled||t.gestureChange(t._MakeGestureEvent(e))},this.endHandler=function(e){e.stopPropagation(),null==t.gestureEnd||this._cancelled||t.gestureEnd(t._MakeGestureEvent(e))},this.listener.addEventListener(this.el,"touchstart",this.startHandler),this.listener.addEventListener(this.el,"touchmove",this.moveHandler),this.listener.addEventListener(this.el,"touchend",this.endHandler)},t.prototype.detachEvents=function(){this.listener.removeEventListener(this.el,"touchstart",this.startHandler),this.listener.removeEventListener(this.el,"touchmove",this.moveHandler),this.listener.removeEventListener(this.el,"touchend",this.endHandler)},t.prototype._init=function(e,t){this.touchPoint={x:t.touches[0].pageX,y:t.touches[0].pageY},this.startPoint={x:t.touches[0].pageX,y:t.touches[0].pageY},this.modelSnapshot=e},t.prototype.updateTouchPoint=function(e){this.touchPoint.x=e.touches[0].pageX,this.touchPoint.y=e.touches[0].pageY},t.prototype.getDelta=function(){return this._getDifference(this.touchPoint,this.startPoint)},t.prototype._getDifference=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},t.prototype.stopCurrentEvent=function(){this._cancelled=!0},t.prototype._MakeGestureEvent=function(e){var t=this.getDelta(),n=this;return{x:t.x,y:t.y,scale:0,rotation:0,snapshot:n.modelSnapshot,innerEvent:e,target:n.el}},e.exports("Components.Canvas.Gestures.MoveGesture",t)}(window.ServerSide||{}),window.ServerSide=function(e){var t=function(e,t){this.el=e,this.gestureStart=null,this.gestureChange=null,this.gestureEnd=null,this.touchPoint=null,this.startPoint=null,this.modelSnapshot=null,this.AttachEvents(t)};return t.prototype.AttachEvents=function(e){var t=this;this.startHandler=function(n){t.initScaleRotateGesture(e.clone(),n),null!=t.gestureStart&&t.gestureStart(t._MakeGestureEvent(n)),n.stopPropagation()},this.moveHandler=function(e){e.preventDefault(),t.updateTouchPoint(e),null!=t.gestureChange&&t.gestureChange(t._MakeGestureEvent(e)),e.stopPropagation()},this.endHandler=function(e){null!=t.gestureEnd&&t.gestureEnd(t._MakeGestureEvent(e)),e.stopPropagation()},this.el.addEventListener("touchstart",this.startHandler),this.el.addEventListener("touchmove",this.moveHandler),this.el.addEventListener("touchend",this.endHandler)},t.prototype.DetachEvents=function(){this.el.removeEventListener("touchstart",this.startHandler),this.el.removeEventListener("touchmove",this.moveHandler),this.el.removeEventListener("touchend",this.endHandler)},t.prototype.initScaleRotateGesture=function(e,t){this.touchPoint={x:t.touches[0].pageX,y:t.touches[0].pageY},this.startPoint={x:t.touches[0].pageX,y:t.touches[0].pageY},this.modelSnapshot=e},t.prototype.updateTouchPoint=function(e){this.touchPoint.x=e.touches[0].pageX,this.touchPoint.y=e.touches[0].pageY},t.prototype.getDelta=function(){return this._getDifference(this.touchPoint,this.startPoint)},t.prototype.getDeltaScale=function(){var e=this.modelSnapshot.getCentre();return this._toScaler(this.touchPoint,e)-this._toScaler(this.startPoint,e)},t.prototype._getDifference=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},t.prototype._toScaler=function(e,t){var n=this._getDifference(e,t);return Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2))},t.prototype._MakeGestureEvent=function(e){var t=this.getDeltaScale(),n=this;return{x:0,y:0,scale:t,rotation:0,snapshot:n.modelSnapshot,innerEvent:e,target:n.el}},e.exports("Components.Canvas.Gestures.SingleFingerScaleGesture",t)}(window.ServerSide||{}),window.ServerSide=function(e){var t=function(e,t){this.el=e,this.gestureStart=null,this.gestureChange=null,this.gestureEnd=null,this.touchPoint=null,this.startPoint=null,this.modelSnapshot=null,this.AttachEvents(t)};return t.prototype.AttachEvents=function(e){var t=this;this.startHandler=function(n){t.initScaleRotateGesture(e.clone(),n),null!=t.gestureStart&&t.gestureStart(t._MakeGestureEvent(n)),n.stopPropagation()},this.moveHandler=function(e){e.preventDefault(),t.updateTouchPoint(e),null!=t.gestureChange&&t.gestureChange(t._MakeGestureEvent(e)),e.stopPropagation()},this.endHandler=function(e){null!=t.gestureEnd&&t.gestureEnd(t._MakeGestureEvent(e)),e.stopPropagation()},this.el.addEventListener("touchstart",this.startHandler),this.el.addEventListener("touchmove",this.moveHandler),this.el.addEventListener("touchend",this.endHandler)},t.prototype.DetachEvents=function(){this.el.removeEventListener("touchstart",this.startHandler),this.el.removeEventListener("touchmove",this.moveHandler),this.el.removeEventListener("touchend",this.endHandler)},t.prototype.initScaleRotateGesture=function(e,t){this.touchPoint={x:t.touches[0].pageX,y:t.touches[0].pageY},this.startPoint={x:t.touches[0].pageX,y:t.touches[0].pageY},this.modelSnapshot=e},t.prototype.updateTouchPoint=function(e){this.touchPoint.x=e.touches[0].pageX,this.touchPoint.y=e.touches[0].pageY},t.prototype.getDeltaAngle=function(){var e=this.modelSnapshot.getCentre();return this._getAngle(e,this.startPoint)-this._getAngle(e,this.touchPoint)},t.prototype._getDifference=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},t.prototype._getAngle=function(e,t){var n=this._getDifference(e,t);return Math.atan2(n.y,n.x)},t.prototype._MakeGestureEvent=function(e){var t=this.getDeltaAngle(),n=this;return{x:0,y:0,scale:0,rotation:t,snapshot:n.modelSnapshot,innerEvent:e,target:n.el}},e.exports("Components.Canvas.Gestures.SingleFingerRotateGesture",t)}(window.ServerSide||{}),window.ServerSide=function(e){var t=e.Components.Canvas.Gestures,n=function(e,n,r){var i=this;this.onMove=null,this.onRotate=null,this.onScale=null,this.onEnd=null,this.onMulti=null;var o=!0,a=null,s=new t.PinchGesture(e,r);s.gestureStart=function(e){n.surrounds(e.innerEvent.touches[0].pageX,e.innerEvent.touches[0].pageY)&&(a=n),e.innerEvent.touches.length>1&&"function"==typeof i.onMulti&&i.onMulti()},s.gestureChange=function(e){a===n&&(null!=i.onScale&&o&&i.onScale(e),null!=i.onRotate&&o&&i.onRotate(e),null!=i.onMove&&o&&i.onMove(e))},s.gestureEnd=function(e){a=null,"function"==typeof i.onEnd&&o&&i.onEnd(e)},this.disable=function(){o=!1},this.enable=function(){o=!0}};return e.exports("Components.Canvas.EventLayers.HammerEventLayer",n)}(window.ServerSide||{}),window.ServerSide=function(e){var t=e.Components.Canvas.EventLayers,n=function(e,n,r){var i=this;this.onMove=null,this.onRotate=null,this.onScale=null,this.onEnd=null;var o=new t.HammerEventLayer(e,n,r),a=new t.ModalTouchEventLayer(e,n,r);o.onMulti=function(e){o.enable(),a.disable()},a.onSingle=function(e){o.disable(),a.enable()},o.onMove=a.onMove=function(e){"function"==typeof i.onMove&&i.onMove(e)},o.onRotate=a.onRotate=function(e){"function"==typeof i.onRotate&&i.onRotate(e)},o.onScale=a.onScale=function(e){"function"==typeof i.onScale&&i.onScale(e)},a.onEnd=function(e){"function"==typeof i.onEnd&&i.onEnd(e)},o.onEnd=function(e){"function"==typeof i.onEnd&&i.onEnd(e)},this.setMoveMode=function(){o.disable(),a.enable(),a.setMoveMode()},this.setRotateMode=function(){o.disable(),a.enable(),a.setRotateMode()},this.setScaleMode=function(){o.disable(),a.enable(),a.setScaleMode()},this.disable=function(){o.disable(),a.disable()},this.enable=function(){o.enable(),a.enable()}};return e.exports("Components.Canvas.EventLayers.ModalHammerEventLayer",n)}(window.ServerSide||{}),window.ServerSide=function(e){var t={WebkitEventFacade:{addEventListener:function(e,t,n){e.addEventListener(t,n)},removeEventListener:function(e,t,n){e.removeEventListener(t,n)}},WinMoEventFacade:{addEventListener:function(e,t,n){e.attachEvent(t,n)},removeEventListener:function(e,t,n){e.detachEvent(t,n)}}};return e.exports("Components.Canvas.EventLayers.EventFacades",t)}(window.ServerSide||{}),window.ServerSide=function(e){var t=e.Components.Canvas.Gestures,n=function(e,n,r){var i=this,o=!0;this.onMove=null,this.onRotate=null,this.onScale=null,this.onEnd=null,this.onSingle=null;var a="move";this.setMoveMode=function(){a="move"},this.setScaleMode=function(){a="scale"},this.setRotateMode=function(){a="rotate"};var s=null,l=new t.MoveGesture(e,r);l.gestureStart=function(e){n.surrounds(e.innerEvent.touches[0].pageX,e.innerEvent.touches[0].pageY)&&!n.surrounds(e.innerEvent.touches[0].pageX,e.innerEvent.touches[0].pageY)&&(s=n),1===e.innerEvent.touches.length&&"function"==typeof i.onSingle&&i.onSingle()},l.gestureChange=function(e){s===n&&null!=i.onMove&&"move"===a&&o&&i.onMove(e)},l.gestureEnd=function(e){s=null,"function"==typeof i.onEnd&&"move"===a&&o&&i.onEnd(e)};var u=new t.SingleFingerRotateGesture(e,r);u.gestureStart=function(e){n.surrounds(e.innerEvent.touches[0].pageX,e.innerEvent.touches[0].pageY)&&(s=n)},u.gestureChange=function(e){s===n&&null!=i.onRotate&&"rotate"===a&&o&&i.onRotate(e)},u.gestureEnd=function(e){s=null,"function"==typeof i.onEnd&&"rotate"===a&&o&&i.onEnd(e)};var c=new t.SingleFingerScaleGesture(e,r);c.gestureStart=function(e){n.surrounds(e.innerEvent.touches[0].pageX,e.innerEvent.touches[0].pageY)&&(s=n)},c.gestureChange=function(e){s===n&&null!=i.onScale&&"scale"===a&&o&&i.onScale(e)},c.gestureEnd=function(e){s=null,"function"==typeof i.onEnd&&"scale"===a&&o&&i.onEnd(e)},this.disable=function(){o=!1},this.enable=function(){o=!0}};return e.exports("Components.Canvas.EventLayers.ModalTouchEventLayer",n)}(window.ServerSide||{}),window.ServerSide=function(e){var t=function(t,n,r){var i=this,o=e.Lib.Utils.options(n),a=o.isNullOrEmpty("opacity")?.4:n.opacity,s=o.isNullOrEmpty("glowOpacity")?a:n.glowOpacity,l=o.isNullOrEmpty("glowColor")?"#31b7db":n.glowColor,u=o.isNullOrEmpty("borderStyle")?"":n.borderStyle,c=(n.displayLayers,document.createElement("div"));c.id="bleed-glow",c.style.position="absolute",c.style.zIndex=e.Configuration.Canvas.zIndex.bleed;this.setCardCoverage=function(e,t,n){var r=hexToRgb(l);t&&(c.style["-moz-box-shadow"]=c.style["-webkit-box-shadow"]=c.style.boxShadow="0px 0px 0px "+t.x+"px rgba("+r.r+", "+r.g+", "+r.b+", "+s+")"),e&&(c.style.width=e.width+"px",c.style.height=e.height+"px",c.style.left=e.left+"px",c.style.top=e.top+"px"),n&&(c.style.borderRadius=n+"px")},this.showGlow=function(e){c.style.display=e?"block":"none"},this.showBorder=function(){c.style.border=u},this.hideBorder=function(){c.style.border=""},this.setIndex=function(t){c.style.zIndex=e.Configuration.Canvas.zIndex.bleed+t},this.render=function(){c.style.border=u,c.style.boxSizing=c.style.MozBoxSizing=c.style.webkitBoxSizing="border-box",t.appendChild(c)},this.setBleed=function(e,t){i.setCardCoverage(null,{x:e,y:t},null)},this.Test={init:function(e,t,n,r){i.vertices=t.getVertices(n,r),i.bleedBox=e},linesIntersect:function(){for(var e=Math.verticesToLines(i.vertices),t=Math.verticesToLines([{x:Math.round(i.bleedBox.left),y:Math.round(i.bleedBox.bottom)},{x:Math.round(i.bleedBox.left),y:Math.round(i.bleedBox.top)},{x:Math.round(i.bleedBox.right),y:Math.round(i.bleedBox.top)},{x:Math.round(i.bleedBox.right),y:Math.round(i.bleedBox.bottom)}]),n=0;n<e.length;n++)for(var r=0;r<t.length;r++)if(null!=Math.getIntersection(e[n],t[r]))return!0;return!1},noOverlap:function(){return i.vertices[0].y<i.bleedBox.top&&i.vertices[1].y<i.bleedBox.top&&i.vertices[2].y<i.bleedBox.top&&i.vertices[3].y<i.bleedBox.top||i.vertices[0].y>i.bleedBox.bottom&&i.vertices[1].y>i.bleedBox.bottom&&i.vertices[2].y>i.bleedBox.bottom&&i.vertices[3].y>i.bleedBox.bottom||i.vertices[0].x<i.bleedBox.left&&i.vertices[1].x<i.bleedBox.left&&i.vertices[2].x<i.bleedBox.left&&i.vertices[3].x<i.bleedBox.left||i.vertices[0].x>i.bleedBox.right&&i.vertices[1].x>i.bleedBox.right&&i.vertices[2].x>i.bleedBox.right&&i.vertices[3].x>i.bleedBox.right},allInside:function(){return i.vertices[0].y>i.bleedBox.top&&i.vertices[1].y>i.bleedBox.top&&i.vertices[2].y>i.bleedBox.top&&i.vertices[3].y>i.bleedBox.top&&i.vertices[0].x>i.bleedBox.left&&i.vertices[1].x>i.bleedBox.left&&i.vertices[2].x>i.bleedBox.left&&i.vertices[3].x>i.bleedBox.left&&i.vertices[0].x<i.bleedBox.right&&i.vertices[1].x<i.bleedBox.right&&i.vertices[2].x<i.bleedBox.right&&i.vertices[3].x<i.bleedBox.right&&i.vertices[0].y<i.bleedBox.bottom&&i.vertices[1].y<i.bleedBox.bottom&&i.vertices[2].y<i.bleedBox.bottom&&i.vertices[3].y<i.bleedBox.bottom},run:function(){return!this.allInside()&&!this.noOverlap()&&!this.linesIntersect()}}};return e.exports("Components.Canvas.Objects.CardCoverage",t)}(window.ServerSide||{}),window.ServerSide=function(e){var t=function(){return{Items:[],Models:[],Options:[],CardSize:null,length:function(){return this.Items.length},moveUp:function(e){this.setOrder(e,e+1)},moveDown:function(e){this.setOrder(e,e-1)},moveTop:function(e){this.setOrder(e,this.length()-1)},moveBottom:function(e){this.setOrder(e,0)},setOrder:function(e,t){this.Items.move(e,t);for(var n=0;n<this.length();n++)this.Items[n].setIndex(n)},add:function(e,t){this.Items.push(e);for(var n=!1,r=0;r<this.Options.length;r++)if(this.Options[r].name===t.name){n=!0;break}n||this.Options.push(t)},remove:function(e){this.Options.splice(e,1);var t=document.querySelector(".canvas-layer#layer"+e);t.parentNode&&t.parentNode.removeChild(t),this.Items.splice(e,1),this.Models.splice(e,1);for(var n=0;n<this.Items.length;n++){var r=this.Items[n];if(r.id!==n){var t=document.querySelector(".canvas-layer#layer"+r.id);t&&t.setAttribute("id","layer"+n),r.id=n}}},removeByName:function(e){for(var t=0;t<this.Items.length;t++)if(this.Items[t].name===e)return this.remove(t)},removeOptionByName:function(e){for(var t=0;t<this.Options.length;t++)if(this.Options[t].name===e){this.Options.splice(t,1);break}},resetAll:function(e){for(var t=0;t<this.length();t++)this.Items[t].reset()},disableAll:function(e){for(var t=0;t<this.length();t++)this.Items[t].disable()},enableAll:function(e){for(var t=0;t<this.length();t++)this.Items[t].enable()}}};return e.exports("Components.Canvas.Objects.LayerCollection",t)}(window.ServerSide||{}),window.ServerSide=function(e){var t=function(t,n,r){var i=n.options||{},o=n.layers.Options[r],a=e.Configuration.Canvas.zIndex.layer+(r||0),s=this,l={width:241,height:153},u=null,c=null,d=null,f=null,p=null,h=null,g=!1,v=i.isVertical,m=void 0!==o.isVertical?o.isVertical:v;this.onLoad=function(){},this.setImage=function(e){if(null!==p&&null!==f)try{f.removeChild(p)}catch(e){}d.style.opacity="0",(h=document.getElementById("canvas-spinner"))&&(h.style.opacity=1);var t=new Image;t.onload=y,t.src=e},this.setPosition=function(e,t){c={x:e,y:t},d.style.top=Math.round(t)+"px",d.style.left=Math.round(e)+"px"},this.getPosition=function(){return c},this.setSize=function(e,t){u={height:t,width:e},d.style.width=Math.round(e)+"px",d.style.height=Math.round(t)+"px"},this.update=function(e,t,n,r){s.setSize(n,r),s.setPosition(t,e),g&&(p.style.width=Math.round(r)+"px",p.style.height=Math.round(n)+"px",p.style.top=Math.round(-(n-r)/2)+"px",p.style.left=Math.round((n-r)/2)+"px")},this.getDisplayedSize=function(){return u},this.getRawImageSize=function(){return l},this.getRawImageAspectRatio=function(){return l.width/l.height},this.getBoundingBox=function(){return d.getBoundingClientRect()},this.getRotationAdjustment=function(e){return v&&!g?-90:v&&g&&e?180:0},this.getDomElement=function(){return d},this.getCustomerImageLining=function(){return f},this.setIndex=function(t){d.style.zIndex=e.Configuration.Canvas.zIndex.layer+t},this.getIndex=function(t){return d.style.zIndex-e.Configuration.Canvas.zIndex.layer};var y=function(){p=this,p.width>p.height&&m?(p.style["-webkit-transform"]=p.style["-ms-transform"]=p.style["-o-transform"]=p.style.MozTransform="rotate(90deg)",g=!0):g=!1,l=g?{width:p.height,height:p.width}:{width:p.width,height:p.height},p.style.width="100%",p.style.height="100%",f.appendChild(p),f.style.display="block",h=document.getElementById("canvas-spinner"),h&&(h.style.opacity=0),d.style.opacity=1,s.onLoad(p)};this.render=function(e){t.prependHtml("<div id='customerImage' class='fade'> \t\t\t\t\t\t\t\t<div id='customerImage-lining'> \t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t</div>"),d=$("#layer"+r+" #customerImage")[0],d.style.zIndex=a,f=$("#layer"+r+" #customerImage-lining")[0],e&&(d.style.overflow="hidden")},this.center=function(e,t,n){var r=t?-n:i.customImageMargin||0,o={},a=e.width()/l.width,u=e.height()/l.height,c=Math[t?"min":"max"](u,a);o.width=l.width*c+2*r,o.height=l.height*c+2*r,o.left=e.left+(e.width()-o.width)/2,o.top=e.top+(e.height()-o.height)/2,s.update(o.top,o.left,o.width,o.height)}};return e.exports("Components.Canvas.Objects.ImageLayer",t)}(window.ServerSide||{}),window.ServerSide=function(e){var t=function(t,n,r,i,o){function a(e,t){var n=t.split(/ |-/),r=new Array,i=n[0]+" ";e.html(n[0]);for(var o=e.height(),a=1;a<n.length;a++)e.html(e.html()+" "+n[a]),e.height()>o&&(o=e.height(),r.push(i),i=""),i+=n[a]+" ";return i&&r.push(i),r}var s=e.Configuration.Canvas.zIndex.layer+(r||0),l=1===i,u="background:transparent; max-width:initial; top:50%; left:50%; white-space:pre-wrap; text-indent:0; position:absolute; z-index:"+s,c="<label id='customerTextLabel{0}' class='customTextLabel' style='"+u+"'> </label>",d="",f=[],p={},h={},g={},v=0;new Array;this.setSize=function(e,t){l?_$textLabels.css("min-height",p.size+"px"):(v=Math.round((t/i-p.size)/i),_$textLabels.css("padding-top",v+"px"),_$textLabels.css("min-height",Math.round(t/i)-v+"px")),_$textLabels.css((o?"min-":"")+"width",Math.round(e)+"px"),h={height:t,width:e}},this.setPosition=function(e,t){_$textLabels.css("left",Math.round(t)+"px");for(var n=0;n<i;n++)_$textLabels.eq(n).css("top",Math.round(e+n*(h.height/i))+"px");g={top:e,left:t}},this.getDomElement=function(e){return void 0!==e?_$textLabels[e]:f},this.updateText=function(e,t){_$textLabels[t-1].innerHTML=e},this.setIndex=function(t){_$textLabels.css("zIndex",e.Configuration.Canvas.zIndex.layer+t)},this.getIndex=function(t){return _$textLabels[0].style.zIndex-e.Configuration.Canvas.zIndex.layer},this.setStyle=function(e){$.extend(p,e),_$textLabels.css("color",p.color),_$textLabels.css("font-family",p.font),p.size=Math.round(p.size),h.height&&h.width&&!l&&this.setSize(h.width,h.height),_$textLabels.css("font-size",p.size*n.scaleFactor+"px"),_$textLabels.css("font-weight",p.bold?"bold":""),_$textLabels.css("font-style",p.italic?"italic":""),_$textLabels.css("text-shadow",p.shadow?"#3E3E3E 2px 2px 5px":""),_$textLabels.css("text-align",p.alignment),l&&_$textLabels.css("line-height",(p.size+5)*n.scaleFactor+"px")},this.getStyle=function(){return p},this.getText=function(){var e=new Array;if(l)for(var t=f[0].innerHTML.split(/\r?\n/),n=0;n<t.length;n++)e=e.concat(a(_$textLabels.eq(0),t[n]));else for(var n=0;n<i;n++)e=e.concat(_$textLabels.eq(n).html());return e},this.getTextPosition=function(){for(var e=[],t=0;t<i;t++){var n=_$textLabels.eq(t),r=n.html();n.html("").append("<span>"+r+"</span>")
;var o=n.children().first().position().left;e[t]={left:o,top:h.height/2*t+v},n.html(r)}return e},this.render=function(){t.prependHtml(d),_$textLabels=$("#layer"+r+" .customTextLabel"),f=_$textLabels.toArray()};for(var m=0;m<i;m++)d+=String.format(c,m)};return e.exports("Components.Canvas.Objects.TextLayer",t)}(window.ServerSide||{}),window.ServerSide=function(e){var t=function(t,n,r){var o=e.Configuration.Canvas.zIndex.layer+(r||0),a="background:transparent; top:50%; left:50%; text-indent:0; position:absolute; z-index:"+o,a={},l={},u={},c=0;this.setSize=function(e,t){c=Math.round((t/2-a.size)/2),_$textLabels.css("padding-top",c+"px"),_$textLabels.css("min-width",Math.round(e)+"px"),_$textLabels.css("min-height",Math.round(t/2)-c+"px"),l={height:t,width:e}},this.setPosition=function(e,t){_$textLabels.css("left",Math.round(t)+"px"),_$textLabels.eq(0).css("top",Math.round(e)+"px"),_$textLabels.eq(1).css("top",Math.round(e+l.height/2)+"px"),u={top:e,left:t}},this.getDomElement=function(e){return void 0!==e?_$textLabels[e]:void 0},this.updateText=function(e,t){_$textLabels[t-1].innerHTML=e},this.setIndex=function(t){_$textLabels.css("zIndex",e.Configuration.Canvas.zIndex.layer+t)},this.getIndex=function(t){return _$textLabels[0].style.zIndex-e.Configuration.Canvas.zIndex.layer},this.setStyle=function(e){$.extend(a,e),_$textLabels.css("color",a.color),_$textLabels.css("font-family",a.font),a.size=Math.round(a.size)},this.getStyle=function(){return a},this.getText=function(){return[(void 0)[0].innerHTML,(void 0)[1].innerHTML]},this.getTextPosition=function(){var e=[];for(i=0;i<3;i++){var t,n,r=$("#cardMg .mg"+i),o=r.html();t=parseInt(r.css("left")),n=parseInt(r.css("top")),s=parseInt(r.css("font-size")),colour=r.css("color"),e[i]={left:t,top:n,color:colour,size:s,text:o}}return e},this.render=function(){t.prependHtml("<div  id='cardMg'><div class='mgInitial mg0'>C</div><div class='mgInitial mg1'>J</div><div class='mgInitial mg2'>F</div></div>"),_$textLabels=$("#cardMg")}};return e.exports("Components.Canvas.Objects.MonogramLayer",t)}(window.ServerSide||{}),window.ServerSide=function(e){e.requires("Lib.Utils");var t=function(t,n,r){var i=this,o=e.Lib.Utils.options(n.options),a=n.options.isVertical,s=o.isNullOrEmpty("maskOpacity")?.6:n.options.maskOpacity,l=n.options.boxShadowColor||"255,255,255",u=e.Configuration.Canvas.zIndex.template,c="0px 0px 5px 1000px rgba("+l+","+s+")",d=n.options.templateBorder||"none",f="<img alt='' id='productTemplate' class='fade'> "+e.Lib.UI.Transitions()+e.Lib.UI.Spinner("fade"),p=null,h=null,g=function(e,t){e&&"function"==typeof t&&(e.addEventListener?e.addEventListener("load",t,!1):e.attachEvent("onload",t))},v=function(e,t){return{width:e,height:t}},m=function(e,t){return a&&(t+=i.size.width),{top:e,left:t}};this.setSize=function(e,t){p.style.width=(a?t:e)+"px",p.style.height=(a?e:t)+"px"},this.setPosition=function(e,t){if(p.style.top=i.offset.top+"px",p.style.left=i.offset.left+"px",a){var n=$(p);n.css("transform","rotate(90deg)"),n.css("transform-origin","top left"),n.css("-webkit-transform","rotate(90deg)"),n.css("-webkit-transform-origin","top left")}},this.getSize=function(){return i.size},this.getPosition=function(){return i.offset},this.setOpacity=function(e){p.style.opacity=e},this.getBoundingBox=function(){return p.getBoundingClientRect()},this.setTemplate=function(e,t){g(p,t),p.src=e},this.update=function(e,t){i.size=v(e.width,e.height),i.offset=m(e.top,e.left),t&&(i.setSize(i.size.width,i.size.height),i.setPosition(i.size.left,i.size.top))};var y=function(){h.style.top=i.size.height/2-h.clientHeight/2+i.offset.top+"px",h.style.left=(n.options.isVertical?i.offset.left-(i.size.width/2+h.clientWidth/2):i.size.width/2-h.clientWidth/2+i.offset.left)+"px"};this.render=function(){t.appendHtml(f),p=document.getElementById("productTemplate"),h=document.getElementById("canvas-spinner"),p.style.position="absolute",p.style.opacity="0",p.style.border=d,p.style.zIndex=u,p.style.boxShadow=c,p.style["-moz-box-shadow"]=c,p.style["-webkit-box-shadow"]=c,p.style.borderRadius=this.size.width/n.standardCardSize.width*10+"px",i.update(r,!0),y(),g(p,function(){1!==this.width&&1!==this.height&&0==this.style.opacity&&(this.style.opacity=1)})},this.size=v(r.width,r.height),this.offset=m(r.top,r.left)};return e.exports("Components.Canvas.Objects.Template",t)}(window.ServerSide||{}),window.ServerSide=function(e){var t=function(e,n,r,i,o,a,s,l){var u=this;this.top=n,this.left=e,this.width=r,this.height=i,this.rotation=o,this.scale=a,this.flip=s,this.cardCoverage=null,this.fittingArea=null,this.bleed=null,this.imageUrl=null,this.enabled=null,this.offset=l,this.containerOffset={x:0,y:0},u.imageOffset={x:0,y:0},this.clone=function(){return new t(u.left,u.top,u.width,u.height,u.rotation,u.scale,u.flip,u.offset)},this.getCentre=function(){return{x:u.left+u.width/2+u.offset.x,y:u.top+u.height/2+u.offset.y}},this.getRotationDegrees=function(){return(360-360*this.rotation/(2*Math.PI)).roundTo(0)},this.getRotationPositive=function(){return 2*Math.PI-this.rotation},this.getPercentageScale=function(){return 100*u.scale},this.deserialise=function(e,t){null!=e&&(u.left=e.left*t.x,u.top=e.top*t.y,u.width=e.width,u.height=e.height,u.rotation=e.rotation,u.scale=e.scale,u.flip=e.flip,u.enabled=e.enabled,u.cardCoverage=e.cardCoverage,u.fittingArea=e.fittingArea,u.bleed=e.bleed,u.imageUrl=e.imageUrl)},this.setOffset=function(e){u.imageOffset=e,u.offset.x=e.x+u.containerOffset.x,u.offset.y=e.y+u.containerOffset.y},this.setContainerOffset=function(e){u.containerOffset.x=e.x,u.containerOffset.y=e.y,u.offset.x=u.imageOffset.x+u.containerOffset.x,u.offset.y=u.imageOffset.y+u.containerOffset.y}};return e.exports("Components.Canvas.Models.Image",t)}(window.ServerSide||{}),window.ServerSide=function(e){var t=function(e,n){var r=this;this.text=n||[],this.style={font:e.font,fontId:e.fontId,size:e.size,bold:e.bold,italic:e.italic,shadow:e.shadow,alignment:e.alignment,color:e.color,colorId:e.colorId,outlineColour:e.outlineColour,lineSpacing:e.lineSpacing},this.position=null,this.bleed=null,this.enabled=null,this.clone=function(){var e=r.style;return new t(e.font,e.size,e.bold,e.italic,e.shadow,e.alignment,e.color)},this.deserialise=function(e){null!=e&&(r.text=e.text,r.style=e.style,r.enabled=e.enabled,r.position=e.position,r.bleed=e.bleed)}};return e.exports("Components.Canvas.Models.Text",t)}(window.ServerSide||{}),window.ServerSide=function(e){e.requires("Lib.Utils");var t=function(t,n,r,i){r.options=r.options||{};var o=this,a=r.options.isVertical,s={x:5,y:5},l={x:5,y:5};this.imageLoaded=function(){};var u,c,d=r.template,f=r.templateModel,p=function(){u=r.options.scale&&r.options.scale.x||f.width/r.standardCardSize.width,c=r.options.scale&&r.options.scale.y||f.height/r.standardCardSize.height};p();var h=!1;r.options.scaleFactor=u;var g={top:0,left:0,bottom:r.standardCardSize.height,right:r.standardCardSize.width,width:function(){return this.right-this.left},height:function(){return this.bottom-this.top}},v={},m=!0===r.layers.Options[i].inset,y=new e.Components.Canvas.Objects.ImageLayer(t,r,i),b=new e.Components.Canvas.Objects.CardCoverage(t,r.options,f);b.render(),y.render(),y.onLoad=function(e){1!==e.width&&1!==e.height&&o.positionCustomImage()},this.positionCustomImage=function(){var e=m?0:2,t=g;h&&(t=v,e=0),p();var n=x(t,f,{x:l.x+e,y:l.y+e});y.center(n,m,l.y);var r=y.getDisplayedSize(),i=y.getPosition();o.imageLoaded({width:r.width,height:r.height,left:i.x,top:i.y})},this.positionCardCoverage=function(e){e&&(f=e),p();var t=x(g,f,{x:0,y:0}),n={top:t.top,left:t.left,width:t.width(),height:t.height()},r={x:l.x*u,y:l.y*c};b.setCardCoverage(n,r,10*u)},this.getConfiguration=function(){var e=y.getBoundingBox(),t=d.getBoundingBox();return a?{top:((t.right-e.right)/u).roundTo(0),left:((e.top-t.top)/c).roundTo(0),bottom:((t.width-(e.left-t.left))/u).roundTo(0),right:((e.bottom-t.bottom+t.height)/c).roundTo(0)}:{top:((e.top-t.top)/c).roundTo(0),left:((e.left-t.left)/u).roundTo(0),bottom:((e.bottom-t.bottom+t.height)/c).roundTo(0),right:((e.right-t.right+t.width)/u).roundTo(0)}},this.getRotationDegrees=function(){return n.getRotationDegrees()+y.getRotationAdjustment(1==n.flip)},this.isCoveringCard=function(){return b.Test.init(x(g),y.getDomElement(),n.getRotationDegrees(),n.scale),b.Test.run()},this.notAllInside=function(){return b.Test.init(x(g),y.getDomElement(),n.getRotationDegrees(),n.scale),b.Test.allInside()};var x=function(e,t,n){var r=t||d.getBoundingBox(),i=n||l;return{top:r.top+(e.top-i.y)*c,bottom:r.top+(e.bottom+i.y)*c,left:r.left+(e.left-i.x)*u,right:r.left+(e.right+i.x)*u,width:function(){return this.right-this.left},height:function(){return this.bottom-this.top}}};this.setImage=function(e){y.setImage(e)},this.setBleed=function(e,t){l.x=e,l.y=t,o.positionCardCoverage()},this.setCardCoverage=function(e){g.top=e.top+s.y,g.left=e.left+s.y,g.bottom=e.bottom-s.x,g.right=e.right-s.x,o.positionCardCoverage(r.templateModel)},this.setFittingArea=function(e){h=!0,v.top=e.top,v.left=e.left,v.bottom=e.bottom,v.right=e.right},this.getCustomerImageLining=function(){return y.getCustomerImageLining()},this.setIndex=function(e){y.setIndex(e),b.setIndex(e)},this.getIndex=function(){return y.getIndex()},this.getCustomerImage=function(){return y.getDomElement()},this.showGlow=function(e){b.showGlow(e)},this.showBorder=function(){b.showBorder()},this.hideBorder=function(){b.hideBorder()}};return e.exports("Components.Canvas.Manipulators.Image",t)}(window.ServerSide||{}),window.ServerSide=function(e){var t=function(t,n,r,i,o,a){var s,l,u,c,d=r.templateModel,f=r.template,p={x:1,y:1},h=function(){s=d.width/r.standardCardSize.width,l=d.height/r.standardCardSize.height};h(),r.options.scaleFactor=s,r.options.glowColor=r.layers.Options[i].glowColor,r.options.opacity=r.layers.Options[i].glowOpacity||1;var g=new e.Components.Canvas.Objects.CardCoverage(t,r.options,d),v=new e.Components.Canvas.Objects.TextLayer(t,r.options,i,n.text.length,a);g.render(),v.render();var m={top:0,left:0,bottom:153,right:241,width:function(){return this.right-this.left},height:function(){return this.bottom-this.top}},y=function(){n.style.size=n.style.size||Math.floor(u.height/r.layers.Options[i].scaleFactor),v.setStyle(n.style);for(var e=0;e<n.text.length;e++)v.updateText(n.text[e]||"",e+1)},b=function(){v.setSize(u.width,u.height),v.setPosition(u.top,u.left)},x=function(){var e=r.templateModel;h(),_coverageArea={top:e.top+m.top*l,bottom:e.top+m.bottom*l,left:e.left+m.left*s,right:e.left+m.right*s,width:function(){return this.right-this.left},height:function(){return this.bottom-this.top}},u={top:_coverageArea.top,bottom:_coverageArea.bottom,left:_coverageArea.left,right:_coverageArea.right,width:_coverageArea.width(),height:_coverageArea.height()},g.setCardCoverage(u,p),y(),b(),w()},w=function(){var e=f.getBoundingBox();c={top:e.top+(m.top-p.y)*l,bottom:e.top+(m.bottom+p.y)*l,left:e.left+(m.left-p.x)*s,right:e.left+(m.right+p.x)*s}};this.positionCardCoverage=function(){x()},this.getConfiguration=function(){w();for(var e=f.getBoundingBox(),t=v.getTextPosition(),n=[],r={top:((c.top-e.top)/s).roundTo(0),left:((c.left-e.left)/s).roundTo(0),bottom:((c.bottom-e.bottom+e.height)/l).roundTo(0),right:((c.right-e.right+e.width)/l).roundTo(0)},i=0;i<t.length;i++)n[i]={top:(t[i].top+r.top+p.y-1).roundTo(2),left:(t[i].left+r.left+p.x+1).roundTo(2)};return r.Text=n,r},this.testCoverage=function(){var e=[];w();for(var t=0;t<o;t++)g.Test.init(c,v.getDomElement(t),0,1),e[t]=g.Test.allInside();return e},this.setBleed=function(e,t){g.setBleed(e,t),p.x=e,p.y=t,w()},this.hideBleed=function(){g.showGlow(!1)},this.showGlow=function(e){g.showGlow(e)},this.setIndex=function(e){v.setIndex(e),g.setIndex(e)},this.getIndex=function(){return v.getIndex()},this.updateText=function(e,t){v.updateText(e,t)},this.getText=function(){return v.getText()},this.setCardCoverage=function(e,t,n,r){m.top=e,m.left=t,m.bottom=n,m.right=r,x()},this.updateTextSyle=function(e){v.setStyle(e)},this.getTextSyle=function(){return v.getStyle()},this.getTextStyle=function(){return v.getStyle()}};return e.exports("Components.Canvas.Manipulators.Text",t)}(window.ServerSide||{}),window.ServerSide=function(e){var t=function(t,n,r,i,o){var a,s,l,u=r.templateModel,c=r.template,d={x:1,y:1};!function(){a=u.width/r.standardCardSize.width,s=u.height/r.standardCardSize.height}(),r.options.scaleFactor=a,r.options.glowColor=r.layers.Options[i].glowColor,r.options.opacity=1;var f=new e.Components.Canvas.Objects.CardCoverage(t,r.options,u),p=new e.Components.Canvas.Objects.MonogramLayer(t,r.options,i);f.render(),p.render();var h={top:0,left:0,bottom:153,right:241,width:function(){return this.right-this.left},height:function(){return this.bottom-this.top}},g=function(){var e=c.getBoundingBox();l={top:e.top+(h.top-d.y)*s,bottom:e.top+(h.bottom+d.y)*s,left:e.left+(h.left-d.x)*a,right:e.left+(h.right+d.x)*a}};this.positionCardCoverage=function(){},this.getConfiguration=function(){g();for(var e=c.getBoundingBox(),t=p.getTextPosition(),n=[],r={top:((l.top-e.top)/a).roundTo(0),left:((l.left-e.left)/a).roundTo(0),bottom:((l.bottom-e.bottom+e.height)/s).roundTo(0),right:((l.right-e.right+e.width)/s).roundTo(0)},i=0;i<t.length;i++)n[i]={top:(t[i].top+r.top).roundTo(0),left:(t[i].left+r.left+2*d.x).roundTo(0)};return r.Text=n,r},this.testCoverage=function(){var e=[];g();for(var t=0;t<o;t++)f.Test.init(l,p.getDomElement(t),0,1),e[t]=f.Test.allInside();return e},this.setBleed=function(e,t){f.setBleed(e,t),d.x=e,d.y=t,g()},this.hideBleed=function(){f.showGlow(!1)},this.setIndex=function(e){p.setIndex(e),f.setIndex(e)},this.getIndex=function(){return p.getIndex()},this.updateText=function(e,t){p.updateText(e,t)},this.getText=function(){return p.getText()},this.setCardCoverage=function(e,t,n,r){h.top=e,h.left=t,h.bottom=n,h.right=r},this.updateTextSyle=function(e){p.setStyle(e)},this.getTextSyle=function(){return p.getStyle()}};return e.exports("Components.Canvas.Manipulators.Monogram",t)}(window.ServerSide||{}),window.ServerSide=function(e){e.requires("Lib.Utils");var t=function(t,n,r){function i(){u.top=p.top,u.left=p.left,u.bottom=p.bottom,u.right=p.right,u.scale=p.scale,u.rotation=p.rotation,u.flip=p.flip,f.serialise()}function o(t){return new e.Components.Canvas.Core.Matrix3dCssEngine(t)}this.id=t;var a={x:1,y:1};r.options.scale&&(a.x=r.options.scale.x||r.options.scale,a.y=r.options.scale.y||r.options.scale);var s=void 0!==r.layers.Options[t].isVertical?r.layers.Options[t].isVertical:r.options.isVertical;if(r.options.preview){var l=r.layers.Models[t],u=l?new e.Components.Canvas.Models.Image(l.left*a.x,l.top*a.y,l.width,l.height,l.rotation,l.scale,l.flip,{x:null,y:null}):new e.Components.Canvas.Models.Image(0,0,0,0,0,1,!1,{x:null,y:null},{}),c=new e.Components.Canvas.Manipulators.Image(n,u,r,t),d=o(c.getCustomerImage());return d.Update(u),l&&l.cardCoverage&&c.setCardCoverage(l.cardCoverage),l&&l.fittingArea&&c.setFittingArea(l.fittingArea),l&&l.imageUrl&&c.setImage(l.imageUrl),l&&l.bleed&&c.setBleed(l.bleed.x,l.bleed.y),this.SetImage=function(e){c.setImage(e)},this.setCardCoverage=function(e,t,n,i){var o=r.options.isVertical?{left:t,top:e,bottom:i,right:n}:{left:t,top:e,bottom:n,right:i};c.setCardCoverage(o)},this.setBleed=function(e,t){u.bleed={x:e,y:t},c.setBleed(e,t)},this.getConfiguration=function(){var e=c.getConfiguration();return e.rotation=c.getRotationDegrees(),e.flip=u.flip,e.order=c.getIndex(),e},n.style.overflow="hidden",n.style.position="absolute",n.style.top=0,n.style.left=0,n.style.width="100%",n.style.height="100%",void c.showGlow(!1)}var f=this,u=function(){return new e.Components.Canvas.Models.Image(0,0,0,0,0,1,!1,{x:0,y:0},{})}(),p=u.clone(),h=(2*Math.PI).roundTo(2),g=(Math.PI/2).roundTo(2),v=(Math.PI+g).roundTo(2);this.snapshot=null,u.deserialise(r.layers.Models[t],a),this.enabled=!1;var m=!1;this.isCoveringCard=!1,this.onImageLoad=null;var c=new e.Components.Canvas.Manipulators.Image(n,u,r,t);this.positionCustomImage=function(){c.positionCustomImage()},c.imageLoaded=function(e){u.width=e.width,u.height=e.height,u.setOffset({x:e.left,y:e.top}),m=!1,f.enabled&&b.enable(),f.imageLoaded()};var d=o(c.getCustomerImage()),y=e.Components.Canvas.EventLayers.HandleBasedEventFactory(c.getCustomerImageLining(),t);u.scaleAndRotate=r.options.scaleAndRotate;var b=y.getEventLayer(u);b.onMove=function(e){null!=typeof f.onMove&&f.onMove(e),"function"==typeof f.onEventComplete&&f.onEventComplete(e)},b.onRotate=function(e){"function"==typeof f.onRotate&&f.onRotate(e),"function"==typeof f.onEventComplete&&f.onEventComplete(e)},b.onScale=function(e){"function"==typeof f.onScale&&f.onScale(e),"function"==typeof f.onEventComplete&&f.onEventComplete(e)},b.onEnd=function(e){"function"==typeof f.onGestureComplete&&f.onGestureComplete(u),f.serialise()},b.onStart=function(e){"function"==typeof f.onGestureStart&&f.onGestureStart(u)},b.onMulti=function(e){"function"==typeof f.onGestureStart&&f.onGestureStart(u)},this.setIndex=function(e){c.setIndex(e),y.setIndex(e)},this.getIndex=function(){return y.getIndex()},this.testCardCoverage=function(){return r.layers.Options[f.id].inset?f.isCoveringCard=c.notAllInside():f.isCoveringCard=c.isCoveringCard(),f.isCoveringCard=!$(n.parentElement).width()||f.isCoveringCard,"function"==typeof f.onCardCoverageChange&&f.onCardCoverageChange(f.isCoveringCard,f.name),f.isCoveringCard},this.setMoveMode=function(){b.enable(),b.setMoveMode()},this.setRotateMode=function(){b.enable(),b.setRotateMode()},this.setScaleMode=function(){b.enable(),b.setScaleMode()},this.setFlipMode=function(){},this.setNoMode=function(){b.disable()},this.setBleed=function(e,t){u.bleed={x:e,y:t},c.setBleed(e,t),f.serialise()},this.setCardCoverage=function(e,t,n,r){var i=s?{left:t,top:e,bottom:e+r-t,right:t+n-e}:{left:t,top:e,bottom:n,right:r};u.cardCoverage=i,c.setCardCoverage(i),f.serialise()},this.setFittingArea=function(e,t,n,i){var o=r.options.isVertical?{left:t,top:e,bottom:i,right:n}:{left:t,top:e,bottom:n,right:i};c.setFittingArea(o),u.fittingArea=o},this.update=function(){d.Update(u),f.testCardCoverage()},this.SetImage=function(e,t){m=!0,t&&(i(),f.update()),c.setImage(e),u.imageUrl=e,f.serialise()},this.hasImage=function(){return!!u.imageUrl},this.updateMaskAndTemplate=function(){c.positionCardCoverage(r.templateModel),f.serialise()},this.disable=function(){f.enabled=!1,u.enabled=!1,b.disable(),f.serialise(),$("#layer"+f.id).css("pointer-events","none")},this.enable=function(){f.enabled=!0,u.enabled=!0,m||b.enable(),f.serialise(),$("#layer"+f.id).css("pointer-events","auto")},this.showBorder=function(){c.showBorder()},this.hideBorder=function(){c.hideBorder()},this.showGlow=function(e){c.showGlow(e),b.glow&&b.glow(e)},this.reset=function(){i(),f.setup(),f.update(),"function"==typeof f.onImageScale&&f.onImageScale(u.getPercentageScale())},this.clear=function(){$("#layer"+f.id).remove()},this.addOnScaleListener=function(e){f.onImageScale=e},this.addOnImageLoadListener=function(e){f.onImageLoad=e},this.imageLoaded=function(){"function"==typeof f.onImageScale&&f.onImageScale(u.getPercentageScale()),"function"==typeof f.onImageLoad&&f.onImageLoad()},this.onMove=function(e){f.enabled&&f.UpdateModelMove(e)},this.onRotate=function(e){f.enabled&&(f.UpdateModelRotate(e),this.onRotateListener&&this.onRotateListener(u.rotation))},this.onScale=function(e){f.enabled&&(f.UpdateModelScale(e),"function"==typeof f.onImageScale&&f.onImageScale(u.getPercentageScale()))},this.UpdateModelScale=function(e){u.scale=e.snapshot.scale+e.scale},this.UpdateModelMove=function(e){u.top=e.snapshot.top+e.y,u.left=e.snapshot.left+e.x},this.onEventComplete=function(e){f.update()},this.UpdateModelRotate=function(e){f.SetAngle(e.snapshot.rotation+e.rotation)},this.SetAngle=function(e){f.enabled&&(e>=h&&(e-=h),e<0&&(e=h+e),u.rotation=e),f.serialise()},this.GetAngle=function(){return u.rotation},this.positionCustomImage=function(){c.positionCustomImage()},this.moveUp=function(e){u.top-=e,f.update(),f.serialise()},this.moveDown=function(e){u.top+=e,f.update(),f.serialise()},this.moveRight=function(e){u.left+=e,f.update(),f.serialise()},this.moveLeft=function(e){u.left-=e,f.update(),f.serialise()},this.rotate=function(e){f.SetAngle(u.rotation+e),f.update()},this.scale=function(e){u.scale=e/100,f.update(),f.serialise()},this.getScale=function(){return u.getPercentageScale()},this.scaleUp=function(e){u.scale+=e/100,f.update(),f.serialise()},this.scaleDown=function(e){u.scale-=e/100,f.update(),f.serialise()},this.flip=function(){f.enabled&&(u.flip=!u.flip,f.update(),f.serialise())},this.SnapRight=function(){var e=0;u.rotation>0&&u.rotation<=g?e=0:u.rotation>g&&u.rotation<=Math.PI.roundTo(2)?e=g:u.rotation>Math.PI&&u.rotation<=v?e=Math.PI.roundTo(2):(u.rotation>g+Math.PI&&u.rotation<=h||0===u.rotation)&&(e=v),f.SetAngle(e),f.update()},this.SnapLeft=function(){var e=0;u.rotation>=0&&u.rotation<g.roundTo(2)?e=g:u.rotation>=g&&u.rotation<Math.PI?e=Math.PI.roundTo(2):u.rotation>=Math.PI&&u.rotation<v?e=v:u.rotation>=g+Math.PI&&u.rotation<h&&(e=0),f.SetAngle(e),f.update()},this.RevertGesture=function(e){null!==e.snapshot&&(u.top=e.snapshot.top,u.left=e.snapshot.left,u.rotation=e.snapshot.rotation,u.scale=e.snapshot.scale,u.flip=e.snapshot.flip),f.update(),f.serialise()},this.TakeSnapshot=function(){return f.snapshot=u.clone(),f.snapshot},this.update(),this.getConfiguration=function(){var e=c.getConfiguration();return e.rotation=c.getRotationDegrees(),e.flip=u.flip,e.order=f.getIndex(),e},this.snap90Left=function(){f.SnapLeft()},this.snap90Right=function(){f.SnapRight()},this.rotate90Left=function(){f.Rotate(g)},this.rotate90Right=function(){f.Rotate(-g)},r.events.registerEventHandler("onrotate",function(){f.setup(),f.positionCustomImage(),f.update()}),this.setup=function(){var e=n.parentNode.getTopLeft();u.setContainerOffset({x:e.left,y:e.top}),f.updateMaskAndTemplate(),"function"==typeof n.onresize&&n.onresize()},this.getDomCont=function(){return n},this.serialise=function(){var e=jQuery.extend({},u);e.left=u.left/a.x,e.top=u.top/a.y,r.layers.Models[f.id]=e,r.serialise()},u.cardCoverage&&(c.setCardCoverage(u.cardCoverage),f.hasCardCoverage=!0),u.fittingArea&&c.setFittingArea(u.fittingArea),u.bleed&&(c.setBleed(u.bleed.x,u.bleed.y),f.hasBleed=!0),u.enabled?f.enabled=!0:b.disable(),e.Lib.Utils.options(r.options).isNotNullBoolean("showGlow")?this.showGlow(r.options.showGlow):this.showGlow(!0)};return e.exports("Components.Canvas.ViewControllers.Image",t)}(window.ServerSide||{}),window.ServerSide=function(e){var t=function(t,n,r){var i=this;this.id=t;var o={enabled:!1},a=function(e,t){this.enabled=!0;var n=function(e,t){var n="";e.value.length>0&&(n=i.alphanumericOnly(e)),f.updateText(n,t+1),i.testCardCoverage(),d.text[t]=n,i.serialise()};this.enable=function(e){var t=r[e-1];t.enabled=!0,t.removeAttribute("maxlength")},this.disable=function(e){var t=r[e-1];t.enabled=!1,t.setAttribute("maxlength",t.value.length)},i.updateText=n,this.disableAll=function(){for(var e=0;e<r.length;e++)r[e].enabled=!1,r[e].setAttribute("maxlength",r[e].value.length)};var r=function(e){for(var t=new Array,n=0;n<e.length;n++)t.push(document.getElementById(e[n]));return t}(e);if(r.every(function(e){return null===e}))this.enabled=!1;else for(var o=0;o<r.length;o++)r[o]&&(!function(e){$(r[e]).on("input propertychange paste",function(){n(this,e)})}(o),r[o].enabled=!0,t&&t[o]&&(r[o].value=t[o]))},s={font:"Arial",fontId:1,size:18,bold:!1,italic:!1,shadow:!1,alignment:"left",color:"#000000",colorId:"black",lineSpacing:22,outlineColour:null};$.extend(s,r.layers.Options[t].Style);for(var l=r.layers.Options[t].txtBoxes,u=[""],c=0;c<l.length-1;c++)u=u.concat([""]);var d=new e.Components.Canvas.Models.Text(s,u);d.deserialise(r.layers.Models[t]),!r.options.preview&&l&&(o=new a(l,d.text));var f=new e.Components.Canvas.Manipulators.Text(n,d,r,t,l.length,o.enabled);if(this.setup=function(){i.serialise()},this.alphanumericOnly=function(e){var t=e.value;if(!t[t.length-1].match(/^[a-zA-Z0-9\s]+$/)){var n=t.substring(0,t.length-1);return e.value=n,n}return t},this.disable=function(e){o.disable(e),i.serialise()},this.enable=function(e){o.enable(e),i.serialise()},this.setCardCoverage=function(e,t,n,r){var o={top:e,left:t,bottom:n,right:r};d.position=o,f.setCardCoverage(e,t,n,r),i.serialise()},this.setBleed=function(e,t){d.bleed={x:e,y:t},f.setBleed(e,t),i.serialise()},this.getDomCont=function(){return n},this.setIndex=function(e){f.setIndex(e)},this.getIndex=function(){return f.getIndex()},this.testCardCoverage=function(){_textCoverage=f.testCoverage();for(var e=[],t=0;t<_textCoverage.length;t++)_textCoverage[t]||e.push(t+1);return i.isCoveringCard=0==e.length,"function"==typeof i.onCardCoverageChange&&i.onCardCoverageChange(0==e.length||e),0==e.length||e},this.updateTextSyle=function(e){$.extend(d.style,e),f.updateTextSyle(e),i.testCardCoverage(),i.serialise()},this.setTextStyle=function(e){return f.updateTextSyle(e)},this.getTextSyle=function(){return f.getTextSyle()},this.getTextStyle=function(){return f.getTextSyle()},this.getText=function(){return f.getText()},this.serialise=function(){r.layers.Models[t]=d,r.serialise()},this.deserialise=function(){r.deserialise(),d.deserialise(r.layers.Models[t])},this.getConfiguration=function(){var e=f.getConfiguration();return e.lines=d.text,e.style=d.style,e.order=i.getIndex(),e.rotation=0,e.flip=!1,e},this.showGlow=function(e){f.showGlow(e),a.glow&&a.glow(e)},r.events.registerEventHandler("onrotate",function(){f.positionCardCoverage()}),d.bleed&&f.setBleed(d.bleed.x,d.bleed.y),d.position){var p=d.position;f.setCardCoverage(p.top,p.left,p.bottom,p.right)}r.options.preview&&f.hideBleed()};return e.exports("Components.Canvas.ViewControllers.Text",t)}(window.ServerSide||{}),window.ServerSide=function(e){var t=function(t,n,r){var i=this,o=function(e,t){var n=function(e){for(var t=[],n=0;n<e.length;n++)t.push(document.getElementById(e[n]));return t}(e),r=function(e,t){l.updateText(e.value,t+1),i.testCardCoverage(),s.text[t]=e.value,i.serialise()};this.enable=function(e){n[e-1].enabled=!0},this.disable=function(e){n[e-1].enabled=!1},this.disableAll=function(){for(var e=0;e<n.length;e++)n[e].enabled=!1};for(var o=0;o<n.length;o++)n[o]&&(!function(e){n[e].onkeyup=function(t){r(t.target,e),t.target.enabled?t.target.removeAttribute("maxlength"):t.target.setAttribute("maxlength",t.target.value.length)}}(o),n[o].enabled=!0,t&&t[o]&&(n[o].value=t[o]))},a={font:"Arial",size:null,bold:!1,italic:!1,shadow:!1,alignment:"left",color:"#000000",colorId:"black",lineSpacing:0,outlineColour:"#ffffff"};$.extend(a,r.layers.Options[t].Style);var s=new e.Components.Canvas.Models.Text(a);s.deserialise(r.layers.Models[t]);var l=new e.Components.Canvas.Manipulators.Monogram(n,s,r,t,3);if(!r.options.preview&&r.layers.Options[t].txtBoxes)var u=new o(r.layers.Options[t].txtBoxes,s.text);if(this.setup=function(){i.serialise()},this.disable=function(e){u.disable(e),i.serialise()},this.enable=function(e){u.enable(e),i.serialise()},this.setIndex=function(e){l.setIndex(e)},this.clear=function(){$("#layer"+t).remove()},this.updateTextStyle=function(e){$.extend(s.style,e),l.updateTextSyle(e),i.serialise()},this.serialise=function(){r.layers.Models[t]=s,r.serialise()},this.deserialise=function(){r.deserialise(),s.deserialise(r.layers.Models[t])},this.getConfiguration=function(){return l.getConfiguration()},r.events.registerEventHandler("onrotate",function(){l.positionCardCoverage()}),s.bleed&&l.setBleed(s.bleed.x,s.bleed.y),s.position){var c=s.position;l.setCardCoverage(c.top,c.left,c.bottom,c.right)}r.options.preview&&l.hideBleed()};return e.exports("Components.Canvas.ViewControllers.Monogram",t)}(window.ServerSide||{}),window.ServerSide=function(e){e.requires("Lib.Utils");var t=function(t,n){function r(e){for(var t=0;t<p.layers.Options.length;t++)if(e===p.layers.Options[t].uuid)return p.layers.Options[t];return null}function i(){t.innerHTML="",t.style.position="relative",t.style.overflow="hidden",t.loaded=!1}function o(){p.deserialise(),void 0!==n&&null!==n||(n={}),e.Lib.Utils.options(p.options).insertAll(n,!1),p.layers.Options=p.options.layers||(p.layers.Options.length>0?p.layers.Options:null)||[{name:"imageLayer",type:"Image",uuid:h.generateId()}],p.options.isVertical="orientation"in p.options&&"vertical"===p.options.orientation,p.standardCardSize=p.options.isVertical?{width:e.Configuration.Canvas.StandardCardSize.height,height:e.Configuration.Canvas.StandardCardSize.width}:e.Configuration.Canvas.StandardCardSize;var t=!p.layers||!p.layers.CardSize||"scale"in n?{width:p.standardCardSize.width,height:p.standardCardSize.height}:{width:p.layers.CardSize.width,height:p.layers.CardSize.height};n.scale&&(t.width*=n.scale.x||n.scale,t.height*=n.scale.y||n.scale),f(t)}function a(){p.template=new e.Components.Canvas.Objects.Template(t,p,p.templateModel),p.options.preview&&(t.style.width=p.template.size.width+"px",t.style.height=p.template.size.height+"px"),p.template.render(),t.template=p.template}function s(){for(var e=0;e<p.layers.Options.length;e++){var t=p.layers.Options[e],n=l(e,t);p.options.displayLayers&&-1===p.options.displayLayers.indexOf(t.name)&&n.show(!1)}}function l(n,r){var i=c(n);return t.appendChild(i),i=new e.Components.Canvas.ViewControllers[r.type](n,i,p),i.uuid=r.uuid,p.options.preview||i.setup(),p.layers.add(i,r),t[r.name]=u(i)}function u(e){return e.setOrder=function(e){p.layers.setOrder(this.getIndex(),e)},e.up=function(){p.layers.moveUp(this.getIndex())},e.down=function(){p.layers.moveDown(this.getIndex())},e.top=function(){p.layers.moveTop(this.getIndex())},e.bottom=function(){p.layers.moveBottom(this.getIndex())},e.show=function(e){e?p.layers.moveTop(this.getIndex()):p.layers.moveBottom(this.getIndex()),this.getDomCont().style.display=e?"block":"none"},e}function c(e){var t=document.createElement("div");return t.id="layer"+e,t.className="canvas-layer",t}function d(){var e=g.hasClass("landscape"),t=n.widthFactor?n.widthFactor:.7,r=n.heightFactor?n.heightFactor.ls:.35,i=n.heightFactor?n.heightFactor.pt:.3,o=g.width()*t,a=o/(241/153),s=e?g.height()*r:g.height()*i;a>s&&(a=s,o=a*(241/153)),n.margin=(g.width()-o)/2}function f(r){if(n.isResponsive&&d(),void 0!==n&&"margin"in n&&e.Lib.Utils.options(n).isNotNullNumber("margin")){var i=r.width;r.width=v.width()-2*n.margin,r.height*=r.width/i,t.style.height=r.height+(p.options.isVertical?n.margin/2:2*n.margin)+"px"}void 0!==n&&"size"in n&&"width"in n.size&&"height"in n.size&&(r.width=n.size.width,r.height=n.size.height);var o=0,a=0;p.options.preview||(o=Math.round((v.width()-r.width)/2),a=Math.round((v.height()-r.height)/2)),p.options.preview||(p.layers.CardSize=r),p.templateModel={left:o,top:a,bottom:a+r.height,right:o+r.width,width:r.width,height:r.height},p.template&&p.template.update(p.templateModel,!0)}var p=this;this.layers=new e.Components.Canvas.Objects.LayerCollection,this.events=new e.Framework.Eventing.EventCollection;var h=new e.Framework.Utils.AppHelper;this.template=null,this.standardCardSize={},this.templateModel={},this.options={};var g,v=$(t);n&&n.aamd&&(g=$(n.aamd)),t.SetOverlay=function(e){p.template.setTemplate(e,p.onTemplateLoad)},t.addOnOverlayLoadListener=function(e){p.onTemplateLoad=e},t.Reset=function(){p.layers.resetAll()},t.Disable=function(){p.layers.disableAll()},t.Enable=function(){p.layers.enableAll()},t.Add=function(e){e.uuid=h.generateId(),p.layers.Options.push(e),l(p.layers.Items.length,e),p.serialise()},t.Remove=function(e){p.events.removeEventHandler("onrotate",e),p.layers.remove(e),p.serialise()},t.RemoveByName=function(e){p.layers.removeByName(e),delete t[e],p.serialise()},t.nLayers=function(e){return p.layers.length()},t.getConfiguration=function(e){for(var t=[],n=0;n<p.layers.length();n++){var i=p.layers.Items[n].uuid;t[n]=p.layers.Items[n].getConfiguration(),t[n].name=r(i).name}return t},this.serialise=function(){e.Lib.Utils.SsgSerialiser.serialise("Canvas",this.layers)},this.deserialise=function(){
var t=e.Lib.Utils.SsgSerialiser.deserialise("Canvas");t&&(p.layers.Models=t.Models,p.layers.Options=t.Options,p.layers.CardSize=t.CardSize)},window.ondevicerotate=function(){p.events.fireEvent("onrotate")},window.addOnResizeHandler("onrotate",function(){p.events.fireEvent("onrotate")}),function(){o(),p.options.preview||p.events.registerEventHandler("onrotate",function(){n.onRotate&&n.onRotate(n),f(p.layers.CardSize)}),i(),a(),s(),null!=t.oncontrollerload&&t.oncontrollerload(t),t.loaded=!0}()};return e.exports("Components.Canvas.Controller",t)}(window.ServerSide||{}),window.APITracker=function(){function e(e,t,n,i,o,a){if(!o(e,t))return void a();u&&-1!==APITrackerConfig.Actions.indexOf(e)&&r(i(n,e,t))}function t(e,t,n){return c+"/"+e+"/"+s+"/"+l+"/"+n}function n(e,t,n){return c+"/"+e+"/"+s+"/"+l+"/"+t+"?infodesc="+encodeURIComponent(n)}function r(e){try{var t=new XMLHttpRequest;t.open("GET",e,!0),t.send(null)}catch(e){}}function i(e){return!e||0===e.length}function o(e){return!i(e)}function a(e,t){return!i(e)&&!i(t)}var s,l,u=!0,c=ServerSide.Configuration.Urls.ApiTRackerUrl;return sessionStorage.getItem("ApiTrack_FIKey")&&(s=sessionStorage.getItem("ApiTrack_FIKey")),sessionStorage.getItem("ApiTrack_UniqueKey")&&(l=sessionStorage.getItem("ApiTrack_UniqueKey")),{SetKeys:function(e,t,n){s=e,l=t,sessionStorage.setItem("ApiTrack_FIKey",s),sessionStorage.setItem("ApiTrack_UniqueKey",l),u=APITrackerConfig.Enabled&&n},Action:function(n){e("action",n,"trackaction",t,o,function(){})},Info:function(t,r){e(t,r,"trackinfo",n,a,function(){})}}},window.APITrackerConfig={Urls:{APITrackerBaseUrl:"https://localhost/apitracker"},Actions:["IO_TB","IO_CM","IS","load","submit"],Enabled:!1,Messages:{UploadCustom:"Upload custom image with Id {0}",UploadGallery:"Select gallery image with Id {0}",SubmitSuccess:"Submited sucessfully",SubmitError:"Error while submiting",Load:"{0}",MoveUp:"Moved up by {0} px",MoveDown:"Moved down by {0} px",MoveLeft:"Moved left by {0} px",MoveRight:"Moved right by {0} px",Reset:"Reset",RotateRight:"Rotate 90 right",Flip:"Flip",GestureComplete:"scale: {0}, rotation: {1}, move: {2}x {3}y",Scale:"Scaled by {0}%"},Keys:{ImageSelection:"IS",ToolBar:"IO_TB",CardManipulation:"IO_CM",PageLoad:"load",Submit:"submit"}},H=void 0,z=function(e,t){var n=function(n){var r=null,i=null,o=!1;if(n=n||{},n.options=n.options||{},document.querySelector){var a=document.querySelector('script[data-name="aam-designer"]');if(a){i=a.getAttribute("data-handoverkey")||null;var s=a.getAttribute("data-bootstrap");o=s&&"true"===s.toLowerCase()}}var l=document.getElementsByClassName("aam-designer-init");l&&l[0]&&(r=l[0],i=i||r.getAttribute("handoverkey")),i=n.handoverKey||i,i||n.callbacks.onError&&n.callbacks.onError("Please specify handover key"),r=n.el||r;var u={uk:{apiurl:"https://uk.personalcard.net/pcs/api/v1",cdnurl:"https://uk.personalcard.net/pcs/cdn/V2/App/Skins/",apitrackerurl:"https://uk.personalcard.net/apitracker"},us:{apiurl:"https://us.personalcard.net/pcs/api/v1",cdnurl:"https://us.personalcard.net/pcs/cdn/V2/App/Skins/",apitrackerurl:"https://us.personalcard.net/apitracker"},syd:{apiurl:"https://au.personalcard.net/api/v1",cdnurl:"https://au.personalcard.net/pcs/cdn/V2/App/Skins/",apitrackerurl:"https://au.personalcard.net/apitracker"},sta:{apiurl:"https://staging.serversidegraphics.com/pcs/api/v1",cdnurl:"https://staging.serversidegraphics.com/pcs/cdn/V2/App/Skins/",apitrackerurl:"https://staging.serversidegraphics.com/apitracker"},uat:{apiurl:"https://uat.serversidegraphics.com/pcs/api/v1",cdnurl:"https://uat.serversidegraphics.com/pcs/cdn/V2/App/Skins/",apitrackerurl:"https://uat.serversidegraphics.com/apitracker"},dev:{apiurl:"https://devserver.serversidegraphics.com/pcs/api/v1",cdnurl:"https://devserver.serversidegraphics.com/pcs/cdn/V2/App/Skins/",apitrackerurl:"https://devserver.serversidegraphics.com/apitracker"},default:{apiurl:"https://localhost/api",cdnurl:"https://localhost/PCS/CDN/V2/App/Skins/",apitrackerurl:"https://localhost/apitracker"}},c=n.options.env||"default";ServerSide.Configuration.Urls.Api=u[c].apiurl,ServerSide.Configuration.Urls.Cdn=u[c].cdnurl,ServerSide.Configuration.Urls.ApiTRackerUrl=u[c].apitrackerurl,this.start=function(){var o=e(r);o.hasClass("aam-designer-init")||o.addClass("aam-designer-init"),o.addClass("loading"),r.App=new t(n),r.App.addLoadSubscriber(function(){(ServerSide.Configuration.Urls.Resources=n.options.resourcesFolder||ServerSide.Configuration.Urls.Cdn,o.removeClass("loading"),(new ServerSide.Lib.Utils.BrowserCheck).isTouchDevice()&&o.addClass("mobile"),r.App.Designer.KeepAlive.Enabled)&&new ServerSide.Components.KeepAlive(r.App.Designer.KeepAlive.URL,{period:r.App.Designer.KeepAlive.Timing,units:"minutes"}).start()}),ServerSide.Lib.Utils.SsgSerialiser.init(r.id),r.App.init(i,r)},this.hide=function(){r.App.hide()},this.show=function(){r.App.show()},this.close=function(){r.App.close()},r&&i&&o&&this.start(r)};return window.AAM=n,n}(t,D)}()}();